{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nimport { isBlazor } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { contextMenuClick, contextMenuOpen, contextMenuBeforeItemRender } from '../enum/enum';\nimport { createHtmlElement } from '../../diagram/utility/dom-util';\n/**\n * @private\n */\n\nexport var menuClass = {\n  content: '.e-diagramcontent',\n  copy: 'e-copy',\n  paste: 'e-paste',\n  undo: 'e-undo',\n  redo: 'e-redo',\n  cut: 'e-cut',\n  selectAll: 'e-selectall',\n  grouping: 'e-grouping',\n  group: 'e-group',\n  unGroup: 'e-ungroup',\n  bringToFront: 'e-bringfront',\n  sendToBack: 'e-sendback',\n  moveForward: 'e-bringforward',\n  sendBackward: 'e-sendbackward',\n  order: 'e-order'\n};\n/**\n * 'ContextMenu module used to handle context menu actions.'\n *\n * @private\n */\n\nvar DiagramContextMenu =\n/** @class */\nfunction () {\n  function DiagramContextMenu(parent, service) {\n    this.defaultItems = {};\n    /**\n     * @private\n     */\n\n    this.disableItems = [];\n    /**\n     * @private\n     */\n\n    this.hiddenItems = [];\n    this.localeText = this.setLocaleKey();\n    this.parent = parent;\n    this.serviceLocator = service;\n    this.addEventListener();\n  }\n  /**\n   * addEventListener method \\\n   *\n   * @returns { void } addEventListener method .\\\n   *\n   * @private\n   */\n\n\n  DiagramContextMenu.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on('initial-load', this.render, this);\n  };\n  /**\n   * removeEventListener method \\\n   *\n   * @returns { void } removeEventListener method .\\\n   *\n   * @private\n   */\n\n\n  DiagramContextMenu.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off('initial-load', this.render);\n  };\n\n  DiagramContextMenu.prototype.render = function () {\n    this.l10n = this.serviceLocator.getService('localization');\n\n    if (!isBlazor()) {\n      this.element = createHtmlElement('ul', {\n        id: this.parent.element.id + '_contextMenu'\n      });\n      this.parent.element.appendChild(this.element);\n      var target = '#' + this.parent.element.id;\n      this.contextMenu = new Menu({\n        items: this.getMenuItems(),\n        enableRtl: this.parent.enableRtl,\n        enablePersistence: this.parent.enablePersistence,\n        locale: this.parent.locale,\n        target: target,\n        select: this.contextMenuItemClick.bind(this),\n        beforeOpen: this.contextMenuBeforeOpen.bind(this),\n        onOpen: this.contextMenuOpen.bind(this),\n        beforeItemRender: this.BeforeItemRender.bind(this),\n        onClose: this.contextMenuOnClose.bind(this),\n        cssClass: 'e-diagram-menu',\n        animationSettings: {\n          effect: 'None'\n        }\n      });\n      this.contextMenu.appendTo(this.element);\n    }\n  };\n\n  DiagramContextMenu.prototype.getMenuItems = function () {\n    var menuItems = [];\n    var orderItems = [];\n    var groupItems = [];\n\n    if (!this.parent.contextMenuSettings.showCustomMenuOnly) {\n      for (var _i = 0, _a = this.getDefaultItems(); _i < _a.length; _i++) {\n        var item = _a[_i];\n\n        if (item.toLocaleLowerCase().indexOf('group') !== -1) {\n          if (item.toLocaleLowerCase() !== 'grouping') {\n            groupItems.push(this.buildDefaultItems(item));\n          }\n        } else if (item.toLocaleLowerCase().indexOf('order') !== -1) {\n          if (item.toLocaleLowerCase() !== 'order') {\n            orderItems.push(this.buildDefaultItems(item));\n          }\n        } else {\n          menuItems.push(this.buildDefaultItems(item));\n        }\n      }\n\n      if (groupItems.length > 0) {\n        var orderGroup = this.buildDefaultItems('grouping');\n        orderGroup.items = groupItems;\n        menuItems.push(orderGroup);\n      }\n\n      if (orderItems.length > 0) {\n        var orderGroup = this.buildDefaultItems('order');\n        orderGroup.items = orderItems;\n        menuItems.push(orderGroup);\n      }\n    }\n\n    if (this.parent.contextMenuSettings.items) {\n      for (var _b = 0, _c = this.parent.contextMenuSettings.items; _b < _c.length; _b++) {\n        var customItem = _c[_b];\n        menuItems.push(customItem);\n      }\n    }\n\n    return menuItems;\n  };\n\n  DiagramContextMenu.prototype.contextMenuOpen = function () {\n    this.isOpen = true;\n  };\n\n  DiagramContextMenu.prototype.BeforeItemRender = function (args) {\n    this.parent.trigger(contextMenuBeforeItemRender, args);\n  };\n\n  DiagramContextMenu.prototype.contextMenuItemClick = function (args) {\n    document.getElementById(this.parent.element.id + 'content').focus();\n    this.parent.trigger(contextMenuClick, args);\n    var item = this.getKeyFromId(args.item.id);\n\n    if (!args.cancel) {\n      switch (item) {\n        case 'cut':\n          this.parent.cut();\n          break;\n\n        case 'copy':\n          this.parent.copy();\n          break;\n\n        case 'undo':\n          this.parent.undo();\n          break;\n\n        case 'redo':\n          this.parent.redo();\n          break;\n\n        case 'paste':\n          this.parent.paste();\n          break;\n\n        case 'selectAll':\n          this.parent.selectAll();\n          break;\n\n        case 'group':\n          this.parent.group();\n          break;\n\n        case 'unGroup':\n          this.parent.unGroup();\n          break;\n\n        case 'bringToFrontOrder':\n          this.parent.bringToFront();\n          break;\n\n        case 'moveForwardOrder':\n          this.parent.moveForward();\n          break;\n\n        case 'sendToBackOrder':\n          this.parent.sendToBack();\n          break;\n\n        case 'sendBackwardOrder':\n          this.parent.sendBackward();\n          break;\n      }\n    }\n  };\n\n  DiagramContextMenu.prototype.contextMenuOnClose = function (args) {\n    var parent = 'parentObj';\n\n    if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n      this.updateItemStatus();\n    }\n  };\n\n  DiagramContextMenu.prototype.getLocaleText = function (item) {\n    return this.l10n.getConstant(this.localeText[item]);\n  };\n\n  DiagramContextMenu.prototype.updateItemStatus = function () {\n    this.contextMenu.showItems(this.hiddenItems, true);\n    this.contextMenu.enableItems(this.disableItems, false, true);\n    this.hiddenItems = [];\n    this.disableItems = [];\n    this.isOpen = false;\n  };\n  /**\n   * ensureItems method \\\n   *\n   * @returns { void } ensureItems method .\\\n   * @param {MenuItemModel} item - provide the item value.\n   * @param {Event} event - provide the event value.\n   *\n   * @private\n   */\n\n\n  DiagramContextMenu.prototype.ensureItems = function (item, event) {\n    var key = this.getKeyFromId(item.id); // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n    var dItem = this.defaultItems[key];\n\n    if (this.getDefaultItems().indexOf(key) !== -1) {\n      if (item.target && (event || this.parent.checkMenu) && !this.ensureTarget(item)) {\n        this.hiddenItems.push(item.id);\n      }\n    }\n  };\n  /**\n   * refreshItems method \\\n   *\n   * @returns { void } refreshItems method .\\\n   *\n   * @private\n   */\n\n\n  DiagramContextMenu.prototype.refreshItems = function () {\n    this.updateItems();\n    this.contextMenu.refresh();\n  };\n\n  DiagramContextMenu.prototype.updateItems = function () {\n    var canInsert = true;\n\n    for (var i = 0; i < this.parent.contextMenuSettings.items.length; i++) {\n      var items = this.parent.contextMenuSettings.items[i];\n\n      for (var j = 0; j < this.contextMenu.items.length; j++) {\n        if (this.contextMenu.items[j].text === this.parent.contextMenuSettings.items[i].text) {\n          canInsert = false;\n        }\n      }\n\n      if (canInsert) {\n        this.contextMenu.insertAfter([items], this.contextMenu.items[this.contextMenu.items.length - 1].text);\n      }\n    }\n  };\n\n  DiagramContextMenu.prototype.contextMenuBeforeOpen = function (args) {\n    return __awaiter(this, void 0, void 0, function () {\n      var diagramArgs, _i, _a, item, _b, _c, newItem, hidden, contextItems, i, item, i, item;\n\n      return __generator(this, function (_d) {\n        switch (_d.label) {\n          case 0:\n            if (!this.parent.checkMenu && (window.navigator.userAgent.indexOf('Linux') !== -1 || window.navigator.userAgent.indexOf('X11') !== -1)) {\n              this.parent.checkMenu = args.cancel = true;\n            }\n\n            if (this.parent.checkMenu) {\n              this.hiddenItems = [];\n            }\n\n            diagramArgs = args;\n            diagramArgs.hiddenItems = [];\n\n            for (_i = 0, _a = args.items; _i < _a.length; _i++) {\n              item = _a[_i];\n              this.ensureItems(item, args.event);\n\n              if (item.items.length) {\n                for (_b = 0, _c = item.items; _b < _c.length; _b++) {\n                  newItem = _c[_b];\n                  this.ensureItems(newItem, args.event);\n                }\n              }\n            }\n\n            this.eventArgs = args.event;\n            if (!isBlazor()) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , this.parent.trigger(contextMenuOpen, diagramArgs)];\n\n          case 1:\n            diagramArgs = _d.sent() || diagramArgs;\n\n            if (typeof diagramArgs === 'string') {\n              diagramArgs = JSON.parse(diagramArgs);\n            }\n\n            return [3\n            /*break*/\n            , 3];\n\n          case 2:\n            this.parent.trigger(contextMenuOpen, diagramArgs);\n            _d.label = 3;\n\n          case 3:\n            hidden = true;\n            this.hiddenItems = this.hiddenItems.concat(diagramArgs.hiddenItems);\n            this.contextMenu.enableItems(this.disableItems, false, true);\n            contextItems = this;\n\n            for (i = 0; i < args.items.length; i++) {\n              item = args.items[i];\n\n              if (contextItems.hiddenItems.indexOf(item.id) > -1) {\n                contextItems.contextMenu.hideItems([item.id], true);\n              }\n            }\n\n            for (i = 0; i < contextItems.contextMenu.items.length; i++) {\n              item = contextItems.contextMenu.items[i];\n\n              if (contextItems.hiddenItems.indexOf(item.id) === -1) {\n                hidden = false;\n                contextItems.contextMenu.showItems([item.id], true);\n              }\n            }\n\n            if (hidden) {\n              diagramArgs.cancel = hidden;\n              this.hiddenItems = [];\n            }\n            /* tslint:disable */\n\n\n            if (this.parent.selectedItems.nodes.length && this.parent.selectedItems.nodes[0].isPhase) {\n              args.cancel = true;\n            }\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  DiagramContextMenu.prototype.ensureTarget = function (item) {\n    var selectedLength = this.parent.selectedItems.nodes.length + this.parent.selectedItems.connectors.length;\n    var itemText = this.getKeyFromId(item.id);\n    var target = false;\n\n    switch (itemText) {\n      case 'undo':\n        target = this.parent.historyManager && this.parent.historyManager.canUndo ? true : false;\n        break;\n\n      case 'redo':\n        target = this.parent.historyManager && this.parent.historyManager.canRedo ? true : false;\n        break;\n\n      case 'paste':\n        target = this.parent.commandHandler.clipboardData.clipObject ? true : false;\n        break;\n\n      case 'selectAll':\n        target = this.parent.nodes.length + this.parent.connectors.length ? true : false;\n        break;\n\n      case 'grouping':\n        target = selectedLength > 1 || this.parent.selectedItems.nodes[0] && this.parent.selectedItems.nodes[0].children && this.parent.selectedItems.nodes[0].children.length > 1 ? true : false;\n        break;\n\n      case 'group':\n        target = selectedLength > 1;\n        break;\n\n      case 'unGroup':\n        target = this.parent.selectedItems.nodes[0] && this.parent.selectedItems.nodes[0].children && this.parent.selectedItems.nodes[0].children.length > 1 ? true : false;\n        break;\n\n      case 'cut':\n      case 'copy':\n      case 'order':\n      case 'bringToFrontOrder':\n      case 'moveForwardOrder':\n      case 'sendToBackOrder':\n      case 'sendBackwardOrder':\n        target = selectedLength ? true : false;\n        break;\n    }\n\n    return target;\n  };\n  /**\n   *To destroy the context menu\n   *\n   * @returns {void} To destroy the context menu\n   */\n\n\n  DiagramContextMenu.prototype.destroy = function () {\n    if (!isBlazor()) {\n      this.contextMenu.destroy();\n      remove(this.element);\n    }\n\n    this.removeEventListener();\n  };\n\n  DiagramContextMenu.prototype.getModuleName = function () {\n    return 'contextMenu';\n  };\n\n  DiagramContextMenu.prototype.generateID = function (item) {\n    return this.parent.element.id + '_contextMenu_' + item;\n  };\n\n  DiagramContextMenu.prototype.getKeyFromId = function (id) {\n    return id.replace(this.parent.element.id + '_contextMenu_', '');\n  };\n\n  DiagramContextMenu.prototype.buildDefaultItems = function (item) {\n    var menuItem;\n\n    switch (item) {\n      case 'copy':\n        menuItem = {\n          target: menuClass.content,\n          iconCss: menuClass.copy\n        };\n        break;\n\n      case 'cut':\n        menuItem = {\n          target: menuClass.content,\n          iconCss: menuClass.cut\n        };\n        break;\n\n      case 'paste':\n        menuItem = {\n          target: menuClass.content,\n          iconCss: menuClass.paste\n        };\n        break;\n\n      case 'undo':\n        menuItem = {\n          target: menuClass.content,\n          iconCss: menuClass.undo\n        };\n        break;\n\n      case 'redo':\n        menuItem = {\n          target: menuClass.content,\n          iconCss: menuClass.redo\n        };\n        break;\n\n      case 'grouping':\n        menuItem = {\n          target: menuClass.content\n        };\n        break;\n\n      case 'group':\n        menuItem = {\n          target: menuClass.content,\n          iconCss: menuClass.group\n        };\n        break;\n\n      case 'unGroup':\n        menuItem = {\n          target: menuClass.content,\n          iconCss: menuClass.unGroup\n        };\n        break;\n\n      case 'order':\n        menuItem = {\n          target: menuClass.content,\n          iconCss: menuClass.order\n        };\n        break;\n\n      case 'bringToFrontOrder':\n        menuItem = {\n          target: menuClass.content,\n          iconCss: menuClass.bringToFront\n        };\n        break;\n\n      case 'moveForwardOrder':\n        menuItem = {\n          target: menuClass.content,\n          iconCss: menuClass.moveForward\n        };\n        break;\n\n      case 'sendToBackOrder':\n        menuItem = {\n          target: menuClass.content,\n          iconCss: menuClass.sendToBack\n        };\n        break;\n\n      case 'sendBackwardOrder':\n        menuItem = {\n          target: menuClass.content,\n          iconCss: menuClass.sendBackward\n        };\n        break;\n\n      case 'selectAll':\n        menuItem = {\n          target: menuClass.content\n        };\n        break;\n    }\n\n    this.defaultItems[item] = {\n      text: this.getLocaleText(item),\n      id: this.generateID(item),\n      target: menuItem.target,\n      iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : ''\n    };\n    return this.defaultItems[item];\n  };\n\n  DiagramContextMenu.prototype.getDefaultItems = function () {\n    return ['copy', 'cut', 'paste', 'undo', 'redo', 'selectAll', 'grouping', 'group', 'unGroup', 'order', 'bringToFrontOrder', 'moveForwardOrder', 'sendToBackOrder', 'sendBackwardOrder'];\n  };\n\n  DiagramContextMenu.prototype.setLocaleKey = function () {\n    return {\n      'copy': 'Copy',\n      'cut': 'Cut',\n      'paste': 'Paste',\n      'undo': 'Undo',\n      'redo': 'Redo',\n      'selectAll': 'SelectAll',\n      'grouping': 'Grouping',\n      'group': 'Group',\n      'unGroup': 'UnGroup',\n      'order': 'Order',\n      'bringToFrontOrder': 'BringToFront',\n      'moveForwardOrder': 'MoveForward',\n      'sendToBackOrder': 'SendToBack',\n      'sendBackwardOrder': 'SendBackward'\n    };\n  };\n\n  return DiagramContextMenu;\n}();\n\nexport { DiagramContextMenu };","map":{"version":3,"sources":["/home/ubuntu*/Desktop/streamify/node_modules/@syncfusion/ej2-diagrams/src/diagram/objects/context-menu.js"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","isBlazor","remove","ContextMenu","Menu","contextMenuClick","contextMenuOpen","contextMenuBeforeItemRender","createHtmlElement","menuClass","content","copy","paste","undo","redo","cut","selectAll","grouping","group","unGroup","bringToFront","sendToBack","moveForward","sendBackward","order","DiagramContextMenu","parent","service","defaultItems","disableItems","hiddenItems","localeText","setLocaleKey","serviceLocator","addEventListener","prototype","isDestroyed","on","render","removeEventListener","off","l10n","getService","element","id","appendChild","target","contextMenu","items","getMenuItems","enableRtl","enablePersistence","locale","select","contextMenuItemClick","bind","beforeOpen","contextMenuBeforeOpen","onOpen","beforeItemRender","BeforeItemRender","onClose","contextMenuOnClose","cssClass","animationSettings","effect","appendTo","menuItems","orderItems","groupItems","contextMenuSettings","showCustomMenuOnly","_i","_a","getDefaultItems","item","toLocaleLowerCase","indexOf","buildDefaultItems","orderGroup","_b","_c","customItem","isOpen","args","trigger","document","getElementById","focus","getKeyFromId","cancel","updateItemStatus","getLocaleText","getConstant","showItems","enableItems","ensureItems","event","key","dItem","checkMenu","ensureTarget","refreshItems","updateItems","refresh","canInsert","i","j","text","insertAfter","diagramArgs","newItem","hidden","contextItems","_d","window","navigator","userAgent","eventArgs","JSON","parse","concat","hideItems","selectedItems","nodes","isPhase","selectedLength","connectors","itemText","historyManager","canUndo","canRedo","commandHandler","clipboardData","clipObject","children","destroy","getModuleName","generateID","replace","menuItem","iconCss"],"mappings":"AAAA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA4B,UAAUC,OAAV,EAAmBC,UAAnB,EAA+BC,CAA/B,EAAkCC,SAAlC,EAA6C;AACrF,SAAO,KAAKD,CAAC,KAAKA,CAAC,GAAGE,OAAT,CAAN,EAAyB,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AACvD,aAASC,SAAT,CAAmBC,KAAnB,EAA0B;AAAE,UAAI;AAAEC,QAAAA,IAAI,CAACN,SAAS,CAACO,IAAV,CAAeF,KAAf,CAAD,CAAJ;AAA8B,OAApC,CAAqC,OAAOG,CAAP,EAAU;AAAEL,QAAAA,MAAM,CAACK,CAAD,CAAN;AAAY;AAAE;;AAC3F,aAASC,QAAT,CAAkBJ,KAAlB,EAAyB;AAAE,UAAI;AAAEC,QAAAA,IAAI,CAACN,SAAS,CAAC,OAAD,CAAT,CAAmBK,KAAnB,CAAD,CAAJ;AAAkC,OAAxC,CAAyC,OAAOG,CAAP,EAAU;AAAEL,QAAAA,MAAM,CAACK,CAAD,CAAN;AAAY;AAAE;;AAC9F,aAASF,IAAT,CAAcI,MAAd,EAAsB;AAAEA,MAAAA,MAAM,CAACC,IAAP,GAAcT,OAAO,CAACQ,MAAM,CAACL,KAAR,CAArB,GAAsC,IAAIN,CAAJ,CAAM,UAAUG,OAAV,EAAmB;AAAEA,QAAAA,OAAO,CAACQ,MAAM,CAACL,KAAR,CAAP;AAAwB,OAAnD,EAAqDO,IAArD,CAA0DR,SAA1D,EAAqEK,QAArE,CAAtC;AAAuH;;AAC/IH,IAAAA,IAAI,CAAC,CAACN,SAAS,GAAGA,SAAS,CAACa,KAAV,CAAgBhB,OAAhB,EAAyBC,UAAU,IAAI,EAAvC,CAAb,EAAyDS,IAAzD,EAAD,CAAJ;AACH,GALM,CAAP;AAMH,CAPD;;AAQA,IAAIO,WAAW,GAAI,QAAQ,KAAKA,WAAd,IAA8B,UAAUjB,OAAV,EAAmBkB,IAAnB,EAAyB;AACrE,MAAIC,CAAC,GAAG;AAAEC,IAAAA,KAAK,EAAE,CAAT;AAAYC,IAAAA,IAAI,EAAE,YAAW;AAAE,UAAIC,CAAC,CAAC,CAAD,CAAD,GAAO,CAAX,EAAc,MAAMA,CAAC,CAAC,CAAD,CAAP;AAAY,aAAOA,CAAC,CAAC,CAAD,CAAR;AAAc,KAAvE;AAAyEC,IAAAA,IAAI,EAAE,EAA/E;AAAmFC,IAAAA,GAAG,EAAE;AAAxF,GAAR;AAAA,MAAsGC,CAAtG;AAAA,MAAyGC,CAAzG;AAAA,MAA4GJ,CAA5G;AAAA,MAA+GK,CAA/G;AACA,SAAOA,CAAC,GAAG;AAAEjB,IAAAA,IAAI,EAAEkB,IAAI,CAAC,CAAD,CAAZ;AAAiB,aAASA,IAAI,CAAC,CAAD,CAA9B;AAAmC,cAAUA,IAAI,CAAC,CAAD;AAAjD,GAAJ,EAA4D,OAAOC,MAAP,KAAkB,UAAlB,KAAiCF,CAAC,CAACE,MAAM,CAACC,QAAR,CAAD,GAAqB,YAAW;AAAE,WAAO,IAAP;AAAc,GAAjF,CAA5D,EAAgJH,CAAvJ;;AACA,WAASC,IAAT,CAAcG,CAAd,EAAiB;AAAE,WAAO,UAAUC,CAAV,EAAa;AAAE,aAAOvB,IAAI,CAAC,CAACsB,CAAD,EAAIC,CAAJ,CAAD,CAAX;AAAsB,KAA5C;AAA+C;;AAClE,WAASvB,IAAT,CAAcwB,EAAd,EAAkB;AACd,QAAIR,CAAJ,EAAO,MAAM,IAAIS,SAAJ,CAAc,iCAAd,CAAN;;AACP,WAAOf,CAAP,EAAU,IAAI;AACV,UAAIM,CAAC,GAAG,CAAJ,EAAOC,CAAC,KAAKJ,CAAC,GAAGW,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR,GAAYP,CAAC,CAAC,QAAD,CAAb,GAA0BO,EAAE,CAAC,CAAD,CAAF,GAAQP,CAAC,CAAC,OAAD,CAAD,KAAe,CAACJ,CAAC,GAAGI,CAAC,CAAC,QAAD,CAAN,KAAqBJ,CAAC,CAACa,IAAF,CAAOT,CAAP,CAArB,EAAgC,CAA/C,CAAR,GAA4DA,CAAC,CAAChB,IAAjG,CAAD,IAA2G,CAAC,CAACY,CAAC,GAAGA,CAAC,CAACa,IAAF,CAAOT,CAAP,EAAUO,EAAE,CAAC,CAAD,CAAZ,CAAL,EAAuBnB,IAA9I,EAAoJ,OAAOQ,CAAP;AACpJ,UAAII,CAAC,GAAG,CAAJ,EAAOJ,CAAX,EAAcW,EAAE,GAAG,CAACA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAT,EAAYX,CAAC,CAACd,KAAd,CAAL;;AACd,cAAQyB,EAAE,CAAC,CAAD,CAAV;AACI,aAAK,CAAL;AAAQ,aAAK,CAAL;AAAQX,UAAAA,CAAC,GAAGW,EAAJ;AAAQ;;AACxB,aAAK,CAAL;AAAQd,UAAAA,CAAC,CAACC,KAAF;AAAW,iBAAO;AAAEZ,YAAAA,KAAK,EAAEyB,EAAE,CAAC,CAAD,CAAX;AAAgBnB,YAAAA,IAAI,EAAE;AAAtB,WAAP;;AACnB,aAAK,CAAL;AAAQK,UAAAA,CAAC,CAACC,KAAF;AAAWM,UAAAA,CAAC,GAAGO,EAAE,CAAC,CAAD,CAAN;AAAWA,UAAAA,EAAE,GAAG,CAAC,CAAD,CAAL;AAAU;;AACxC,aAAK,CAAL;AAAQA,UAAAA,EAAE,GAAGd,CAAC,CAACK,GAAF,CAAMY,GAAN,EAAL;;AAAkBjB,UAAAA,CAAC,CAACI,IAAF,CAAOa,GAAP;;AAAc;;AACxC;AACI,cAAI,EAAEd,CAAC,GAAGH,CAAC,CAACI,IAAN,EAAYD,CAAC,GAAGA,CAAC,CAACe,MAAF,GAAW,CAAX,IAAgBf,CAAC,CAACA,CAAC,CAACe,MAAF,GAAW,CAAZ,CAAnC,MAAuDJ,EAAE,CAAC,CAAD,CAAF,KAAU,CAAV,IAAeA,EAAE,CAAC,CAAD,CAAF,KAAU,CAAhF,CAAJ,EAAwF;AAAEd,YAAAA,CAAC,GAAG,CAAJ;AAAO;AAAW;;AAC5G,cAAIc,EAAE,CAAC,CAAD,CAAF,KAAU,CAAV,KAAgB,CAACX,CAAD,IAAOW,EAAE,CAAC,CAAD,CAAF,GAAQX,CAAC,CAAC,CAAD,CAAT,IAAgBW,EAAE,CAAC,CAAD,CAAF,GAAQX,CAAC,CAAC,CAAD,CAAhD,CAAJ,EAA2D;AAAEH,YAAAA,CAAC,CAACC,KAAF,GAAUa,EAAE,CAAC,CAAD,CAAZ;AAAiB;AAAQ;;AACtF,cAAIA,EAAE,CAAC,CAAD,CAAF,KAAU,CAAV,IAAed,CAAC,CAACC,KAAF,GAAUE,CAAC,CAAC,CAAD,CAA9B,EAAmC;AAAEH,YAAAA,CAAC,CAACC,KAAF,GAAUE,CAAC,CAAC,CAAD,CAAX;AAAgBA,YAAAA,CAAC,GAAGW,EAAJ;AAAQ;AAAQ;;AACrE,cAAIX,CAAC,IAAIH,CAAC,CAACC,KAAF,GAAUE,CAAC,CAAC,CAAD,CAApB,EAAyB;AAAEH,YAAAA,CAAC,CAACC,KAAF,GAAUE,CAAC,CAAC,CAAD,CAAX;;AAAgBH,YAAAA,CAAC,CAACK,GAAF,CAAMc,IAAN,CAAWL,EAAX;;AAAgB;AAAQ;;AACnE,cAAIX,CAAC,CAAC,CAAD,CAAL,EAAUH,CAAC,CAACK,GAAF,CAAMY,GAAN;;AACVjB,UAAAA,CAAC,CAACI,IAAF,CAAOa,GAAP;;AAAc;AAXtB;;AAaAH,MAAAA,EAAE,GAAGf,IAAI,CAACiB,IAAL,CAAUnC,OAAV,EAAmBmB,CAAnB,CAAL;AACH,KAjBS,CAiBR,OAAOR,CAAP,EAAU;AAAEsB,MAAAA,EAAE,GAAG,CAAC,CAAD,EAAItB,CAAJ,CAAL;AAAae,MAAAA,CAAC,GAAG,CAAJ;AAAQ,KAjBzB,SAiBkC;AAAED,MAAAA,CAAC,GAAGH,CAAC,GAAG,CAAR;AAAY;;AAC1D,QAAIW,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAZ,EAAe,MAAMA,EAAE,CAAC,CAAD,CAAR;AAAa,WAAO;AAAEzB,MAAAA,KAAK,EAAEyB,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAAV,GAAgB,KAAK,CAA9B;AAAiCnB,MAAAA,IAAI,EAAE;AAAvC,KAAP;AAC/B;AACJ,CA1BD;AA2BA;;;AACA,SAASyB,QAAT,QAAyB,sBAAzB;AACA,SAASC,MAAT,QAAuB,sBAAvB;AACA,SAASC,WAAW,IAAIC,IAAxB,QAAoC,6BAApC;AACA,SAASC,gBAAT,EAA2BC,eAA3B,EAA4CC,2BAA5C,QAA+E,cAA/E;AACA,SAASC,iBAAT,QAAkC,gCAAlC;AACA;AACA;AACA;;AACA,OAAO,IAAIC,SAAS,GAAG;AACnBC,EAAAA,OAAO,EAAE,mBADU;AAEnBC,EAAAA,IAAI,EAAE,QAFa;AAGnBC,EAAAA,KAAK,EAAE,SAHY;AAInBC,EAAAA,IAAI,EAAE,QAJa;AAKnBC,EAAAA,IAAI,EAAE,QALa;AAMnBC,EAAAA,GAAG,EAAE,OANc;AAOnBC,EAAAA,SAAS,EAAE,aAPQ;AAQnBC,EAAAA,QAAQ,EAAE,YARS;AASnBC,EAAAA,KAAK,EAAE,SATY;AAUnBC,EAAAA,OAAO,EAAE,WAVU;AAWnBC,EAAAA,YAAY,EAAE,cAXK;AAYnBC,EAAAA,UAAU,EAAE,YAZO;AAanBC,EAAAA,WAAW,EAAE,gBAbM;AAcnBC,EAAAA,YAAY,EAAE,gBAdK;AAenBC,EAAAA,KAAK,EAAE;AAfY,CAAhB;AAiBP;AACA;AACA;AACA;AACA;;AACA,IAAIC,kBAAkB;AAAG;AAAe,YAAY;AAChD,WAASA,kBAAT,CAA4BC,MAA5B,EAAoCC,OAApC,EAA6C;AACzC,SAAKC,YAAL,GAAoB,EAApB;AACA;AACR;AACA;;AACQ,SAAKC,YAAL,GAAoB,EAApB;AACA;AACR;AACA;;AACQ,SAAKC,WAAL,GAAmB,EAAnB;AACA,SAAKC,UAAL,GAAkB,KAAKC,YAAL,EAAlB;AACA,SAAKN,MAAL,GAAcA,MAAd;AACA,SAAKO,cAAL,GAAsBN,OAAtB;AACA,SAAKO,gBAAL;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACIT,EAAAA,kBAAkB,CAACU,SAAnB,CAA6BD,gBAA7B,GAAgD,YAAY;AACxD,QAAI,KAAKR,MAAL,CAAYU,WAAhB,EAA6B;AACzB;AACH;;AACD,SAAKV,MAAL,CAAYW,EAAZ,CAAe,cAAf,EAA+B,KAAKC,MAApC,EAA4C,IAA5C;AACH,GALD;AAMA;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACIb,EAAAA,kBAAkB,CAACU,SAAnB,CAA6BI,mBAA7B,GAAmD,YAAY;AAC3D,QAAI,KAAKb,MAAL,CAAYU,WAAhB,EAA6B;AACzB;AACH;;AACD,SAAKV,MAAL,CAAYc,GAAZ,CAAgB,cAAhB,EAAgC,KAAKF,MAArC;AACH,GALD;;AAMAb,EAAAA,kBAAkB,CAACU,SAAnB,CAA6BG,MAA7B,GAAsC,YAAY;AAC9C,SAAKG,IAAL,GAAY,KAAKR,cAAL,CAAoBS,UAApB,CAA+B,cAA/B,CAAZ;;AACA,QAAI,CAACzC,QAAQ,EAAb,EAAiB;AACb,WAAK0C,OAAL,GAAenC,iBAAiB,CAAC,IAAD,EAAO;AAAEoC,QAAAA,EAAE,EAAE,KAAKlB,MAAL,CAAYiB,OAAZ,CAAoBC,EAApB,GAAyB;AAA/B,OAAP,CAAhC;AACA,WAAKlB,MAAL,CAAYiB,OAAZ,CAAoBE,WAApB,CAAgC,KAAKF,OAArC;AACA,UAAIG,MAAM,GAAG,MAAM,KAAKpB,MAAL,CAAYiB,OAAZ,CAAoBC,EAAvC;AACA,WAAKG,WAAL,GAAmB,IAAI3C,IAAJ,CAAS;AACxB4C,QAAAA,KAAK,EAAE,KAAKC,YAAL,EADiB;AAExBC,QAAAA,SAAS,EAAE,KAAKxB,MAAL,CAAYwB,SAFC;AAGxBC,QAAAA,iBAAiB,EAAE,KAAKzB,MAAL,CAAYyB,iBAHP;AAIxBC,QAAAA,MAAM,EAAE,KAAK1B,MAAL,CAAY0B,MAJI;AAKxBN,QAAAA,MAAM,EAAEA,MALgB;AAMxBO,QAAAA,MAAM,EAAE,KAAKC,oBAAL,CAA0BC,IAA1B,CAA+B,IAA/B,CANgB;AAOxBC,QAAAA,UAAU,EAAE,KAAKC,qBAAL,CAA2BF,IAA3B,CAAgC,IAAhC,CAPY;AAQxBG,QAAAA,MAAM,EAAE,KAAKpD,eAAL,CAAqBiD,IAArB,CAA0B,IAA1B,CARgB;AASxBI,QAAAA,gBAAgB,EAAE,KAAKC,gBAAL,CAAsBL,IAAtB,CAA2B,IAA3B,CATM;AAUxBM,QAAAA,OAAO,EAAE,KAAKC,kBAAL,CAAwBP,IAAxB,CAA6B,IAA7B,CAVe;AAWxBQ,QAAAA,QAAQ,EAAE,gBAXc;AAYxBC,QAAAA,iBAAiB,EAAE;AAAEC,UAAAA,MAAM,EAAE;AAAV;AAZK,OAAT,CAAnB;AAcA,WAAKlB,WAAL,CAAiBmB,QAAjB,CAA0B,KAAKvB,OAA/B;AACH;AACJ,GAtBD;;AAuBAlB,EAAAA,kBAAkB,CAACU,SAAnB,CAA6Bc,YAA7B,GAA4C,YAAY;AACpD,QAAIkB,SAAS,GAAG,EAAhB;AACA,QAAIC,UAAU,GAAG,EAAjB;AACA,QAAIC,UAAU,GAAG,EAAjB;;AACA,QAAI,CAAC,KAAK3C,MAAL,CAAY4C,mBAAZ,CAAgCC,kBAArC,EAAyD;AACrD,WAAK,IAAIC,EAAE,GAAG,CAAT,EAAYC,EAAE,GAAG,KAAKC,eAAL,EAAtB,EAA8CF,EAAE,GAAGC,EAAE,CAAC1E,MAAtD,EAA8DyE,EAAE,EAAhE,EAAoE;AAChE,YAAIG,IAAI,GAAGF,EAAE,CAACD,EAAD,CAAb;;AACA,YAAIG,IAAI,CAACC,iBAAL,GAAyBC,OAAzB,CAAiC,OAAjC,MAA8C,CAAC,CAAnD,EAAsD;AAClD,cAAIF,IAAI,CAACC,iBAAL,OAA6B,UAAjC,EAA6C;AACzCP,YAAAA,UAAU,CAACrE,IAAX,CAAgB,KAAK8E,iBAAL,CAAuBH,IAAvB,CAAhB;AACH;AACJ,SAJD,MAKK,IAAIA,IAAI,CAACC,iBAAL,GAAyBC,OAAzB,CAAiC,OAAjC,MAA8C,CAAC,CAAnD,EAAsD;AACvD,cAAIF,IAAI,CAACC,iBAAL,OAA6B,OAAjC,EAA0C;AACtCR,YAAAA,UAAU,CAACpE,IAAX,CAAgB,KAAK8E,iBAAL,CAAuBH,IAAvB,CAAhB;AACH;AACJ,SAJI,MAKA;AACDR,UAAAA,SAAS,CAACnE,IAAV,CAAe,KAAK8E,iBAAL,CAAuBH,IAAvB,CAAf;AACH;AACJ;;AACD,UAAIN,UAAU,CAACtE,MAAX,GAAoB,CAAxB,EAA2B;AACvB,YAAIgF,UAAU,GAAG,KAAKD,iBAAL,CAAuB,UAAvB,CAAjB;AACAC,QAAAA,UAAU,CAAC/B,KAAX,GAAmBqB,UAAnB;AACAF,QAAAA,SAAS,CAACnE,IAAV,CAAe+E,UAAf;AACH;;AACD,UAAIX,UAAU,CAACrE,MAAX,GAAoB,CAAxB,EAA2B;AACvB,YAAIgF,UAAU,GAAG,KAAKD,iBAAL,CAAuB,OAAvB,CAAjB;AACAC,QAAAA,UAAU,CAAC/B,KAAX,GAAmBoB,UAAnB;AACAD,QAAAA,SAAS,CAACnE,IAAV,CAAe+E,UAAf;AACH;AACJ;;AACD,QAAI,KAAKrD,MAAL,CAAY4C,mBAAZ,CAAgCtB,KAApC,EAA2C;AACvC,WAAK,IAAIgC,EAAE,GAAG,CAAT,EAAYC,EAAE,GAAG,KAAKvD,MAAL,CAAY4C,mBAAZ,CAAgCtB,KAAtD,EAA6DgC,EAAE,GAAGC,EAAE,CAAClF,MAArE,EAA6EiF,EAAE,EAA/E,EAAmF;AAC/E,YAAIE,UAAU,GAAGD,EAAE,CAACD,EAAD,CAAnB;AACAb,QAAAA,SAAS,CAACnE,IAAV,CAAekF,UAAf;AACH;AACJ;;AACD,WAAOf,SAAP;AACH,GAvCD;;AAwCA1C,EAAAA,kBAAkB,CAACU,SAAnB,CAA6B7B,eAA7B,GAA+C,YAAY;AACvD,SAAK6E,MAAL,GAAc,IAAd;AACH,GAFD;;AAGA1D,EAAAA,kBAAkB,CAACU,SAAnB,CAA6ByB,gBAA7B,GAAgD,UAAUwB,IAAV,EAAgB;AAC5D,SAAK1D,MAAL,CAAY2D,OAAZ,CAAoB9E,2BAApB,EAAiD6E,IAAjD;AACH,GAFD;;AAGA3D,EAAAA,kBAAkB,CAACU,SAAnB,CAA6BmB,oBAA7B,GAAoD,UAAU8B,IAAV,EAAgB;AAChEE,IAAAA,QAAQ,CAACC,cAAT,CAAwB,KAAK7D,MAAL,CAAYiB,OAAZ,CAAoBC,EAApB,GAAyB,SAAjD,EAA4D4C,KAA5D;AACA,SAAK9D,MAAL,CAAY2D,OAAZ,CAAoBhF,gBAApB,EAAsC+E,IAAtC;AACA,QAAIT,IAAI,GAAG,KAAKc,YAAL,CAAkBL,IAAI,CAACT,IAAL,CAAU/B,EAA5B,CAAX;;AACA,QAAI,CAACwC,IAAI,CAACM,MAAV,EAAkB;AACd,cAAQf,IAAR;AACI,aAAK,KAAL;AACI,eAAKjD,MAAL,CAAYX,GAAZ;AACA;;AACJ,aAAK,MAAL;AACI,eAAKW,MAAL,CAAYf,IAAZ;AACA;;AACJ,aAAK,MAAL;AACI,eAAKe,MAAL,CAAYb,IAAZ;AACA;;AACJ,aAAK,MAAL;AACI,eAAKa,MAAL,CAAYZ,IAAZ;AACA;;AACJ,aAAK,OAAL;AACI,eAAKY,MAAL,CAAYd,KAAZ;AACA;;AACJ,aAAK,WAAL;AACI,eAAKc,MAAL,CAAYV,SAAZ;AACA;;AACJ,aAAK,OAAL;AACI,eAAKU,MAAL,CAAYR,KAAZ;AACA;;AACJ,aAAK,SAAL;AACI,eAAKQ,MAAL,CAAYP,OAAZ;AACA;;AACJ,aAAK,mBAAL;AACI,eAAKO,MAAL,CAAYN,YAAZ;AACA;;AACJ,aAAK,kBAAL;AACI,eAAKM,MAAL,CAAYJ,WAAZ;AACA;;AACJ,aAAK,iBAAL;AACI,eAAKI,MAAL,CAAYL,UAAZ;AACA;;AACJ,aAAK,mBAAL;AACI,eAAKK,MAAL,CAAYH,YAAZ;AACA;AApCR;AAsCH;AACJ,GA5CD;;AA6CAE,EAAAA,kBAAkB,CAACU,SAAnB,CAA6B2B,kBAA7B,GAAkD,UAAUsB,IAAV,EAAgB;AAC9D,QAAI1D,MAAM,GAAG,WAAb;;AACA,QAAI0D,IAAI,CAACpC,KAAL,CAAWjD,MAAX,GAAoB,CAApB,IAAyBqF,IAAI,CAACpC,KAAL,CAAW,CAAX,EAActB,MAAd,aAAiCtB,IAA9D,EAAoE;AAChE,WAAKuF,gBAAL;AACH;AACJ,GALD;;AAMAlE,EAAAA,kBAAkB,CAACU,SAAnB,CAA6ByD,aAA7B,GAA6C,UAAUjB,IAAV,EAAgB;AACzD,WAAO,KAAKlC,IAAL,CAAUoD,WAAV,CAAsB,KAAK9D,UAAL,CAAgB4C,IAAhB,CAAtB,CAAP;AACH,GAFD;;AAGAlD,EAAAA,kBAAkB,CAACU,SAAnB,CAA6BwD,gBAA7B,GAAgD,YAAY;AACxD,SAAK5C,WAAL,CAAiB+C,SAAjB,CAA2B,KAAKhE,WAAhC,EAA6C,IAA7C;AACA,SAAKiB,WAAL,CAAiBgD,WAAjB,CAA6B,KAAKlE,YAAlC,EAAgD,KAAhD,EAAuD,IAAvD;AACA,SAAKC,WAAL,GAAmB,EAAnB;AACA,SAAKD,YAAL,GAAoB,EAApB;AACA,SAAKsD,MAAL,GAAc,KAAd;AACH,GAND;AAOA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACI1D,EAAAA,kBAAkB,CAACU,SAAnB,CAA6B6D,WAA7B,GAA2C,UAAUrB,IAAV,EAAgBsB,KAAhB,EAAuB;AAC9D,QAAIC,GAAG,GAAG,KAAKT,YAAL,CAAkBd,IAAI,CAAC/B,EAAvB,CAAV,CAD8D,CAE9D;;AACA,QAAIuD,KAAK,GAAG,KAAKvE,YAAL,CAAkBsE,GAAlB,CAAZ;;AACA,QAAI,KAAKxB,eAAL,GAAuBG,OAAvB,CAA+BqB,GAA/B,MAAwC,CAAC,CAA7C,EAAgD;AAC5C,UAAIvB,IAAI,CAAC7B,MAAL,KAAgBmD,KAAK,IAAI,KAAKvE,MAAL,CAAY0E,SAArC,KACA,CAAC,KAAKC,YAAL,CAAkB1B,IAAlB,CADL,EAC8B;AAC1B,aAAK7C,WAAL,CAAiB9B,IAAjB,CAAsB2E,IAAI,CAAC/B,EAA3B;AACH;AACJ;AACJ,GAVD;AAWA;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACInB,EAAAA,kBAAkB,CAACU,SAAnB,CAA6BmE,YAA7B,GAA4C,YAAY;AACpD,SAAKC,WAAL;AACA,SAAKxD,WAAL,CAAiByD,OAAjB;AACH,GAHD;;AAIA/E,EAAAA,kBAAkB,CAACU,SAAnB,CAA6BoE,WAA7B,GAA2C,YAAY;AACnD,QAAIE,SAAS,GAAG,IAAhB;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKhF,MAAL,CAAY4C,mBAAZ,CAAgCtB,KAAhC,CAAsCjD,MAA1D,EAAkE2G,CAAC,EAAnE,EAAuE;AACnE,UAAI1D,KAAK,GAAG,KAAKtB,MAAL,CAAY4C,mBAAZ,CAAgCtB,KAAhC,CAAsC0D,CAAtC,CAAZ;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK5D,WAAL,CAAiBC,KAAjB,CAAuBjD,MAA3C,EAAmD4G,CAAC,EAApD,EAAwD;AACpD,YAAI,KAAK5D,WAAL,CAAiBC,KAAjB,CAAuB2D,CAAvB,EAA0BC,IAA1B,KAAmC,KAAKlF,MAAL,CAAY4C,mBAAZ,CAAgCtB,KAAhC,CAAsC0D,CAAtC,EAAyCE,IAAhF,EAAsF;AAClFH,UAAAA,SAAS,GAAG,KAAZ;AACH;AACJ;;AACD,UAAIA,SAAJ,EAAe;AACX,aAAK1D,WAAL,CAAiB8D,WAAjB,CAA6B,CAAC7D,KAAD,CAA7B,EAAsC,KAAKD,WAAL,CAAiBC,KAAjB,CAAuB,KAAKD,WAAL,CAAiBC,KAAjB,CAAuBjD,MAAvB,GAAgC,CAAvD,EAA0D6G,IAAhG;AACH;AACJ;AACJ,GAbD;;AAcAnF,EAAAA,kBAAkB,CAACU,SAAnB,CAA6BsB,qBAA7B,GAAqD,UAAU2B,IAAV,EAAgB;AACjE,WAAO3H,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,YAAY;AAC/C,UAAIqJ,WAAJ,EAAiBtC,EAAjB,EAAqBC,EAArB,EAAyBE,IAAzB,EAA+BK,EAA/B,EAAmCC,EAAnC,EAAuC8B,OAAvC,EAAgDC,MAAhD,EAAwDC,YAAxD,EAAsEP,CAAtE,EAAyE/B,IAAzE,EAA+E+B,CAA/E,EAAkF/B,IAAlF;;AACA,aAAOhG,WAAW,CAAC,IAAD,EAAO,UAAUuI,EAAV,EAAc;AACnC,gBAAQA,EAAE,CAACpI,KAAX;AACI,eAAK,CAAL;AACI,gBAAI,CAAC,KAAK4C,MAAL,CAAY0E,SAAb,KACCe,MAAM,CAACC,SAAP,CAAiBC,SAAjB,CAA2BxC,OAA3B,CAAmC,OAAnC,MAAgD,CAAC,CAAjD,IAAsDsC,MAAM,CAACC,SAAP,CAAiBC,SAAjB,CAA2BxC,OAA3B,CAAmC,KAAnC,MAA8C,CAAC,CADtG,CAAJ,EAC8G;AAC1G,mBAAKnD,MAAL,CAAY0E,SAAZ,GAAwBhB,IAAI,CAACM,MAAL,GAAc,IAAtC;AACH;;AACD,gBAAI,KAAKhE,MAAL,CAAY0E,SAAhB,EAA2B;AACvB,mBAAKtE,WAAL,GAAmB,EAAnB;AACH;;AACDgF,YAAAA,WAAW,GAAG1B,IAAd;AACA0B,YAAAA,WAAW,CAAChF,WAAZ,GAA0B,EAA1B;;AACA,iBAAK0C,EAAE,GAAG,CAAL,EAAQC,EAAE,GAAGW,IAAI,CAACpC,KAAvB,EAA8BwB,EAAE,GAAGC,EAAE,CAAC1E,MAAtC,EAA8CyE,EAAE,EAAhD,EAAoD;AAChDG,cAAAA,IAAI,GAAGF,EAAE,CAACD,EAAD,CAAT;AACA,mBAAKwB,WAAL,CAAiBrB,IAAjB,EAAuBS,IAAI,CAACa,KAA5B;;AACA,kBAAItB,IAAI,CAAC3B,KAAL,CAAWjD,MAAf,EAAuB;AACnB,qBAAKiF,EAAE,GAAG,CAAL,EAAQC,EAAE,GAAGN,IAAI,CAAC3B,KAAvB,EAA8BgC,EAAE,GAAGC,EAAE,CAAClF,MAAtC,EAA8CiF,EAAE,EAAhD,EAAoD;AAChD+B,kBAAAA,OAAO,GAAG9B,EAAE,CAACD,EAAD,CAAZ;AACA,uBAAKgB,WAAL,CAAiBe,OAAjB,EAA0B3B,IAAI,CAACa,KAA/B;AACH;AACJ;AACJ;;AACD,iBAAKqB,SAAL,GAAiBlC,IAAI,CAACa,KAAtB;AACA,gBAAI,CAAChG,QAAQ,EAAb,EAAiB,OAAO,CAAC;AAAE;AAAH,cAAc,CAAd,CAAP;AACjB,mBAAO,CAAC;AAAE;AAAH,cAAc,KAAKyB,MAAL,CAAY2D,OAAZ,CAAoB/E,eAApB,EAAqCwG,WAArC,CAAd,CAAP;;AACJ,eAAK,CAAL;AACIA,YAAAA,WAAW,GACNI,EAAE,CAACnI,IAAH,EAAD,IAAe+H,WADnB;;AAEA,gBAAI,OAAOA,WAAP,KAAuB,QAA3B,EAAqC;AACjCA,cAAAA,WAAW,GAAGS,IAAI,CAACC,KAAL,CAAWV,WAAX,CAAd;AACH;;AACD,mBAAO,CAAC;AAAE;AAAH,cAAc,CAAd,CAAP;;AACJ,eAAK,CAAL;AACI,iBAAKpF,MAAL,CAAY2D,OAAZ,CAAoB/E,eAApB,EAAqCwG,WAArC;AACAI,YAAAA,EAAE,CAACpI,KAAH,GAAW,CAAX;;AACJ,eAAK,CAAL;AACIkI,YAAAA,MAAM,GAAG,IAAT;AACA,iBAAKlF,WAAL,GAAmB,KAAKA,WAAL,CAAiB2F,MAAjB,CAAwBX,WAAW,CAAChF,WAApC,CAAnB;AACA,iBAAKiB,WAAL,CAAiBgD,WAAjB,CAA6B,KAAKlE,YAAlC,EAAgD,KAAhD,EAAuD,IAAvD;AACAoF,YAAAA,YAAY,GAAG,IAAf;;AACA,iBAAKP,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGtB,IAAI,CAACpC,KAAL,CAAWjD,MAA3B,EAAmC2G,CAAC,EAApC,EAAwC;AACpC/B,cAAAA,IAAI,GAAGS,IAAI,CAACpC,KAAL,CAAW0D,CAAX,CAAP;;AACA,kBAAIO,YAAY,CAACnF,WAAb,CAAyB+C,OAAzB,CAAiCF,IAAI,CAAC/B,EAAtC,IAA4C,CAAC,CAAjD,EAAoD;AAChDqE,gBAAAA,YAAY,CAAClE,WAAb,CAAyB2E,SAAzB,CAAmC,CAAC/C,IAAI,CAAC/B,EAAN,CAAnC,EAA8C,IAA9C;AACH;AACJ;;AACD,iBAAK8D,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGO,YAAY,CAAClE,WAAb,CAAyBC,KAAzB,CAA+BjD,MAA/C,EAAuD2G,CAAC,EAAxD,EAA4D;AACxD/B,cAAAA,IAAI,GAAGsC,YAAY,CAAClE,WAAb,CAAyBC,KAAzB,CAA+B0D,CAA/B,CAAP;;AACA,kBAAIO,YAAY,CAACnF,WAAb,CAAyB+C,OAAzB,CAAiCF,IAAI,CAAC/B,EAAtC,MAA8C,CAAC,CAAnD,EAAsD;AAClDoE,gBAAAA,MAAM,GAAG,KAAT;AACAC,gBAAAA,YAAY,CAAClE,WAAb,CAAyB+C,SAAzB,CAAmC,CAACnB,IAAI,CAAC/B,EAAN,CAAnC,EAA8C,IAA9C;AACH;AACJ;;AACD,gBAAIoE,MAAJ,EAAY;AACRF,cAAAA,WAAW,CAACpB,MAAZ,GAAqBsB,MAArB;AACA,mBAAKlF,WAAL,GAAmB,EAAnB;AACH;AACD;;;AACA,gBAAI,KAAKJ,MAAL,CAAYiG,aAAZ,CAA0BC,KAA1B,CAAgC7H,MAAhC,IAA0C,KAAK2B,MAAL,CAAYiG,aAAZ,CAA0BC,KAA1B,CAAgC,CAAhC,EAAmCC,OAAjF,EAA0F;AACtFzC,cAAAA,IAAI,CAACM,MAAL,GAAc,IAAd;AACH;;AACD,mBAAO,CAAC;AAAE;AAAH,aAAP;AA5DR;AA8DH,OA/DiB,CAAlB;AAgEH,KAlEe,CAAhB;AAmEH,GApED;;AAqEAjE,EAAAA,kBAAkB,CAACU,SAAnB,CAA6BkE,YAA7B,GAA4C,UAAU1B,IAAV,EAAgB;AACxD,QAAImD,cAAc,GAAG,KAAKpG,MAAL,CAAYiG,aAAZ,CAA0BC,KAA1B,CAAgC7H,MAAhC,GACjB,KAAK2B,MAAL,CAAYiG,aAAZ,CAA0BI,UAA1B,CAAqChI,MADzC;AAEA,QAAIiI,QAAQ,GAAG,KAAKvC,YAAL,CAAkBd,IAAI,CAAC/B,EAAvB,CAAf;AACA,QAAIE,MAAM,GAAG,KAAb;;AACA,YAAQkF,QAAR;AACI,WAAK,MAAL;AACIlF,QAAAA,MAAM,GAAG,KAAKpB,MAAL,CAAYuG,cAAZ,IAA8B,KAAKvG,MAAL,CAAYuG,cAAZ,CAA2BC,OAAzD,GAAmE,IAAnE,GAA0E,KAAnF;AACA;;AACJ,WAAK,MAAL;AACIpF,QAAAA,MAAM,GAAG,KAAKpB,MAAL,CAAYuG,cAAZ,IAA8B,KAAKvG,MAAL,CAAYuG,cAAZ,CAA2BE,OAAzD,GAAmE,IAAnE,GAA0E,KAAnF;AACA;;AACJ,WAAK,OAAL;AACIrF,QAAAA,MAAM,GAAG,KAAKpB,MAAL,CAAY0G,cAAZ,CAA2BC,aAA3B,CAAyCC,UAAzC,GAAsD,IAAtD,GAA6D,KAAtE;AACA;;AACJ,WAAK,WAAL;AACIxF,QAAAA,MAAM,GAAG,KAAKpB,MAAL,CAAYkG,KAAZ,CAAkB7H,MAAlB,GAA2B,KAAK2B,MAAL,CAAYqG,UAAZ,CAAuBhI,MAAlD,GAA2D,IAA3D,GAAkE,KAA3E;AACA;;AACJ,WAAK,UAAL;AACI+C,QAAAA,MAAM,GAAKgF,cAAc,GAAG,CAAlB,IAAyB,KAAKpG,MAAL,CAAYiG,aAAZ,CAA0BC,KAA1B,CAAgC,CAAhC,KAAsC,KAAKlG,MAAL,CAAYiG,aAAZ,CAA0BC,KAA1B,CAAgC,CAAhC,EAAmCW,QAAzE,IAC5B,KAAK7G,MAAL,CAAYiG,aAAZ,CAA0BC,KAA1B,CAAgC,CAAhC,EAAmCW,QAAnC,CAA4CxI,MAA5C,GAAqD,CADnD,GACyD,IADzD,GACgE,KADzE;AAEA;;AACJ,WAAK,OAAL;AACI+C,QAAAA,MAAM,GAAGgF,cAAc,GAAG,CAA1B;AACA;;AACJ,WAAK,SAAL;AACIhF,QAAAA,MAAM,GAAK,KAAKpB,MAAL,CAAYiG,aAAZ,CAA0BC,KAA1B,CAAgC,CAAhC,KAAsC,KAAKlG,MAAL,CAAYiG,aAAZ,CAA0BC,KAA1B,CAAgC,CAAhC,EAAmCW,QAAzE,IACJ,KAAK7G,MAAL,CAAYiG,aAAZ,CAA0BC,KAA1B,CAAgC,CAAhC,EAAmCW,QAAnC,CAA4CxI,MAA5C,GAAqD,CADnD,GACyD,IADzD,GACgE,KADzE;AAEA;;AACJ,WAAK,KAAL;AACA,WAAK,MAAL;AACA,WAAK,OAAL;AACA,WAAK,mBAAL;AACA,WAAK,kBAAL;AACA,WAAK,iBAAL;AACA,WAAK,mBAAL;AACI+C,QAAAA,MAAM,GAAGgF,cAAc,GAAG,IAAH,GAAU,KAAjC;AACA;AAhCR;;AAkCA,WAAOhF,MAAP;AACH,GAxCD;AAyCA;AACJ;AACA;AACA;AACA;;;AACIrB,EAAAA,kBAAkB,CAACU,SAAnB,CAA6BqG,OAA7B,GAAuC,YAAY;AAC/C,QAAI,CAACvI,QAAQ,EAAb,EAAiB;AACb,WAAK8C,WAAL,CAAiByF,OAAjB;AACAtI,MAAAA,MAAM,CAAC,KAAKyC,OAAN,CAAN;AACH;;AACD,SAAKJ,mBAAL;AACH,GAND;;AAOAd,EAAAA,kBAAkB,CAACU,SAAnB,CAA6BsG,aAA7B,GAA6C,YAAY;AACrD,WAAO,aAAP;AACH,GAFD;;AAGAhH,EAAAA,kBAAkB,CAACU,SAAnB,CAA6BuG,UAA7B,GAA0C,UAAU/D,IAAV,EAAgB;AACtD,WAAO,KAAKjD,MAAL,CAAYiB,OAAZ,CAAoBC,EAApB,GAAyB,eAAzB,GAA2C+B,IAAlD;AACH,GAFD;;AAGAlD,EAAAA,kBAAkB,CAACU,SAAnB,CAA6BsD,YAA7B,GAA4C,UAAU7C,EAAV,EAAc;AACtD,WAAOA,EAAE,CAAC+F,OAAH,CAAW,KAAKjH,MAAL,CAAYiB,OAAZ,CAAoBC,EAApB,GAAyB,eAApC,EAAqD,EAArD,CAAP;AACH,GAFD;;AAGAnB,EAAAA,kBAAkB,CAACU,SAAnB,CAA6B2C,iBAA7B,GAAiD,UAAUH,IAAV,EAAgB;AAC7D,QAAIiE,QAAJ;;AACA,YAAQjE,IAAR;AACI,WAAK,MAAL;AACIiE,QAAAA,QAAQ,GAAG;AAAE9F,UAAAA,MAAM,EAAErC,SAAS,CAACC,OAApB;AAA6BmI,UAAAA,OAAO,EAAEpI,SAAS,CAACE;AAAhD,SAAX;AACA;;AACJ,WAAK,KAAL;AACIiI,QAAAA,QAAQ,GAAG;AAAE9F,UAAAA,MAAM,EAAErC,SAAS,CAACC,OAApB;AAA6BmI,UAAAA,OAAO,EAAEpI,SAAS,CAACM;AAAhD,SAAX;AACA;;AACJ,WAAK,OAAL;AACI6H,QAAAA,QAAQ,GAAG;AAAE9F,UAAAA,MAAM,EAAErC,SAAS,CAACC,OAApB;AAA6BmI,UAAAA,OAAO,EAAEpI,SAAS,CAACG;AAAhD,SAAX;AACA;;AACJ,WAAK,MAAL;AACIgI,QAAAA,QAAQ,GAAG;AAAE9F,UAAAA,MAAM,EAAErC,SAAS,CAACC,OAApB;AAA6BmI,UAAAA,OAAO,EAAEpI,SAAS,CAACI;AAAhD,SAAX;AACA;;AACJ,WAAK,MAAL;AACI+H,QAAAA,QAAQ,GAAG;AAAE9F,UAAAA,MAAM,EAAErC,SAAS,CAACC,OAApB;AAA6BmI,UAAAA,OAAO,EAAEpI,SAAS,CAACK;AAAhD,SAAX;AACA;;AACJ,WAAK,UAAL;AACI8H,QAAAA,QAAQ,GAAG;AAAE9F,UAAAA,MAAM,EAAErC,SAAS,CAACC;AAApB,SAAX;AACA;;AACJ,WAAK,OAAL;AACIkI,QAAAA,QAAQ,GAAG;AAAE9F,UAAAA,MAAM,EAAErC,SAAS,CAACC,OAApB;AAA6BmI,UAAAA,OAAO,EAAEpI,SAAS,CAACS;AAAhD,SAAX;AACA;;AACJ,WAAK,SAAL;AACI0H,QAAAA,QAAQ,GAAG;AAAE9F,UAAAA,MAAM,EAAErC,SAAS,CAACC,OAApB;AAA6BmI,UAAAA,OAAO,EAAEpI,SAAS,CAACU;AAAhD,SAAX;AACA;;AACJ,WAAK,OAAL;AACIyH,QAAAA,QAAQ,GAAG;AAAE9F,UAAAA,MAAM,EAAErC,SAAS,CAACC,OAApB;AAA6BmI,UAAAA,OAAO,EAAEpI,SAAS,CAACe;AAAhD,SAAX;AACA;;AACJ,WAAK,mBAAL;AACIoH,QAAAA,QAAQ,GAAG;AAAE9F,UAAAA,MAAM,EAAErC,SAAS,CAACC,OAApB;AAA6BmI,UAAAA,OAAO,EAAEpI,SAAS,CAACW;AAAhD,SAAX;AACA;;AACJ,WAAK,kBAAL;AACIwH,QAAAA,QAAQ,GAAG;AAAE9F,UAAAA,MAAM,EAAErC,SAAS,CAACC,OAApB;AAA6BmI,UAAAA,OAAO,EAAEpI,SAAS,CAACa;AAAhD,SAAX;AACA;;AACJ,WAAK,iBAAL;AACIsH,QAAAA,QAAQ,GAAG;AAAE9F,UAAAA,MAAM,EAAErC,SAAS,CAACC,OAApB;AAA6BmI,UAAAA,OAAO,EAAEpI,SAAS,CAACY;AAAhD,SAAX;AACA;;AACJ,WAAK,mBAAL;AACIuH,QAAAA,QAAQ,GAAG;AAAE9F,UAAAA,MAAM,EAAErC,SAAS,CAACC,OAApB;AAA6BmI,UAAAA,OAAO,EAAEpI,SAAS,CAACc;AAAhD,SAAX;AACA;;AACJ,WAAK,WAAL;AACIqH,QAAAA,QAAQ,GAAG;AAAE9F,UAAAA,MAAM,EAAErC,SAAS,CAACC;AAApB,SAAX;AACA;AA1CR;;AA4CA,SAAKkB,YAAL,CAAkB+C,IAAlB,IAA0B;AACtBiC,MAAAA,IAAI,EAAE,KAAKhB,aAAL,CAAmBjB,IAAnB,CADgB;AACU/B,MAAAA,EAAE,EAAE,KAAK8F,UAAL,CAAgB/D,IAAhB,CADd;AAEtB7B,MAAAA,MAAM,EAAE8F,QAAQ,CAAC9F,MAFK;AAEG+F,MAAAA,OAAO,EAAED,QAAQ,CAACC,OAAT,GAAmB,aAAaD,QAAQ,CAACC,OAAzC,GAAmD;AAF/D,KAA1B;AAIA,WAAO,KAAKjH,YAAL,CAAkB+C,IAAlB,CAAP;AACH,GAnDD;;AAoDAlD,EAAAA,kBAAkB,CAACU,SAAnB,CAA6BuC,eAA7B,GAA+C,YAAY;AACvD,WAAO,CACH,MADG,EAEH,KAFG,EAEI,OAFJ,EAEa,MAFb,EAEqB,MAFrB,EAE6B,WAF7B,EAE0C,UAF1C,EAEsD,OAFtD,EAE+D,SAF/D,EAE0E,OAF1E,EAGH,mBAHG,EAGkB,kBAHlB,EAGsC,iBAHtC,EAGyD,mBAHzD,CAAP;AAKH,GAND;;AAOAjD,EAAAA,kBAAkB,CAACU,SAAnB,CAA6BH,YAA7B,GAA4C,YAAY;AACpD,WAAO;AACH,cAAQ,MADL;AAEH,aAAO,KAFJ;AAGH,eAAS,OAHN;AAIH,cAAQ,MAJL;AAKH,cAAQ,MALL;AAMH,mBAAa,WANV;AAOH,kBAAY,UAPT;AAQH,eAAS,OARN;AASH,iBAAW,SATR;AAUH,eAAS,OAVN;AAWH,2BAAqB,cAXlB;AAYH,0BAAoB,aAZjB;AAaH,yBAAmB,YAbhB;AAcH,2BAAqB;AAdlB,KAAP;AAgBH,GAjBD;;AAkBA,SAAOP,kBAAP;AACH,CA1auC,EAAxC;;AA2aA,SAASA,kBAAT","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isBlazor } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { contextMenuClick, contextMenuOpen, contextMenuBeforeItemRender } from '../enum/enum';\nimport { createHtmlElement } from '../../diagram/utility/dom-util';\n/**\n * @private\n */\nexport var menuClass = {\n    content: '.e-diagramcontent',\n    copy: 'e-copy',\n    paste: 'e-paste',\n    undo: 'e-undo',\n    redo: 'e-redo',\n    cut: 'e-cut',\n    selectAll: 'e-selectall',\n    grouping: 'e-grouping',\n    group: 'e-group',\n    unGroup: 'e-ungroup',\n    bringToFront: 'e-bringfront',\n    sendToBack: 'e-sendback',\n    moveForward: 'e-bringforward',\n    sendBackward: 'e-sendbackward',\n    order: 'e-order'\n};\n/**\n * 'ContextMenu module used to handle context menu actions.'\n *\n * @private\n */\nvar DiagramContextMenu = /** @class */ (function () {\n    function DiagramContextMenu(parent, service) {\n        this.defaultItems = {};\n        /**\n         * @private\n         */\n        this.disableItems = [];\n        /**\n         * @private\n         */\n        this.hiddenItems = [];\n        this.localeText = this.setLocaleKey();\n        this.parent = parent;\n        this.serviceLocator = service;\n        this.addEventListener();\n    }\n    /**\n     * addEventListener method \\\n     *\n     * @returns { void } addEventListener method .\\\n     *\n     * @private\n     */\n    DiagramContextMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on('initial-load', this.render, this);\n    };\n    /**\n     * removeEventListener method \\\n     *\n     * @returns { void } removeEventListener method .\\\n     *\n     * @private\n     */\n    DiagramContextMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('initial-load', this.render);\n    };\n    DiagramContextMenu.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        if (!isBlazor()) {\n            this.element = createHtmlElement('ul', { id: this.parent.element.id + '_contextMenu' });\n            this.parent.element.appendChild(this.element);\n            var target = '#' + this.parent.element.id;\n            this.contextMenu = new Menu({\n                items: this.getMenuItems(),\n                enableRtl: this.parent.enableRtl,\n                enablePersistence: this.parent.enablePersistence,\n                locale: this.parent.locale,\n                target: target,\n                select: this.contextMenuItemClick.bind(this),\n                beforeOpen: this.contextMenuBeforeOpen.bind(this),\n                onOpen: this.contextMenuOpen.bind(this),\n                beforeItemRender: this.BeforeItemRender.bind(this),\n                onClose: this.contextMenuOnClose.bind(this),\n                cssClass: 'e-diagram-menu',\n                animationSettings: { effect: 'None' }\n            });\n            this.contextMenu.appendTo(this.element);\n        }\n    };\n    DiagramContextMenu.prototype.getMenuItems = function () {\n        var menuItems = [];\n        var orderItems = [];\n        var groupItems = [];\n        if (!this.parent.contextMenuSettings.showCustomMenuOnly) {\n            for (var _i = 0, _a = this.getDefaultItems(); _i < _a.length; _i++) {\n                var item = _a[_i];\n                if (item.toLocaleLowerCase().indexOf('group') !== -1) {\n                    if (item.toLocaleLowerCase() !== 'grouping') {\n                        groupItems.push(this.buildDefaultItems(item));\n                    }\n                }\n                else if (item.toLocaleLowerCase().indexOf('order') !== -1) {\n                    if (item.toLocaleLowerCase() !== 'order') {\n                        orderItems.push(this.buildDefaultItems(item));\n                    }\n                }\n                else {\n                    menuItems.push(this.buildDefaultItems(item));\n                }\n            }\n            if (groupItems.length > 0) {\n                var orderGroup = this.buildDefaultItems('grouping');\n                orderGroup.items = groupItems;\n                menuItems.push(orderGroup);\n            }\n            if (orderItems.length > 0) {\n                var orderGroup = this.buildDefaultItems('order');\n                orderGroup.items = orderItems;\n                menuItems.push(orderGroup);\n            }\n        }\n        if (this.parent.contextMenuSettings.items) {\n            for (var _b = 0, _c = this.parent.contextMenuSettings.items; _b < _c.length; _b++) {\n                var customItem = _c[_b];\n                menuItems.push(customItem);\n            }\n        }\n        return menuItems;\n    };\n    DiagramContextMenu.prototype.contextMenuOpen = function () {\n        this.isOpen = true;\n    };\n    DiagramContextMenu.prototype.BeforeItemRender = function (args) {\n        this.parent.trigger(contextMenuBeforeItemRender, args);\n    };\n    DiagramContextMenu.prototype.contextMenuItemClick = function (args) {\n        document.getElementById(this.parent.element.id + 'content').focus();\n        this.parent.trigger(contextMenuClick, args);\n        var item = this.getKeyFromId(args.item.id);\n        if (!args.cancel) {\n            switch (item) {\n                case 'cut':\n                    this.parent.cut();\n                    break;\n                case 'copy':\n                    this.parent.copy();\n                    break;\n                case 'undo':\n                    this.parent.undo();\n                    break;\n                case 'redo':\n                    this.parent.redo();\n                    break;\n                case 'paste':\n                    this.parent.paste();\n                    break;\n                case 'selectAll':\n                    this.parent.selectAll();\n                    break;\n                case 'group':\n                    this.parent.group();\n                    break;\n                case 'unGroup':\n                    this.parent.unGroup();\n                    break;\n                case 'bringToFrontOrder':\n                    this.parent.bringToFront();\n                    break;\n                case 'moveForwardOrder':\n                    this.parent.moveForward();\n                    break;\n                case 'sendToBackOrder':\n                    this.parent.sendToBack();\n                    break;\n                case 'sendBackwardOrder':\n                    this.parent.sendBackward();\n                    break;\n            }\n        }\n    };\n    DiagramContextMenu.prototype.contextMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.updateItemStatus();\n        }\n    };\n    DiagramContextMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    DiagramContextMenu.prototype.updateItemStatus = function () {\n        this.contextMenu.showItems(this.hiddenItems, true);\n        this.contextMenu.enableItems(this.disableItems, false, true);\n        this.hiddenItems = [];\n        this.disableItems = [];\n        this.isOpen = false;\n    };\n    /**\n     * ensureItems method \\\n     *\n     * @returns { void } ensureItems method .\\\n     * @param {MenuItemModel} item - provide the item value.\n     * @param {Event} event - provide the event value.\n     *\n     * @private\n     */\n    DiagramContextMenu.prototype.ensureItems = function (item, event) {\n        var key = this.getKeyFromId(item.id);\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var dItem = this.defaultItems[key];\n        if (this.getDefaultItems().indexOf(key) !== -1) {\n            if (item.target && (event || this.parent.checkMenu) &&\n                !this.ensureTarget(item)) {\n                this.hiddenItems.push(item.id);\n            }\n        }\n    };\n    /**\n     * refreshItems method \\\n     *\n     * @returns { void } refreshItems method .\\\n     *\n     * @private\n     */\n    DiagramContextMenu.prototype.refreshItems = function () {\n        this.updateItems();\n        this.contextMenu.refresh();\n    };\n    DiagramContextMenu.prototype.updateItems = function () {\n        var canInsert = true;\n        for (var i = 0; i < this.parent.contextMenuSettings.items.length; i++) {\n            var items = this.parent.contextMenuSettings.items[i];\n            for (var j = 0; j < this.contextMenu.items.length; j++) {\n                if (this.contextMenu.items[j].text === this.parent.contextMenuSettings.items[i].text) {\n                    canInsert = false;\n                }\n            }\n            if (canInsert) {\n                this.contextMenu.insertAfter([items], this.contextMenu.items[this.contextMenu.items.length - 1].text);\n            }\n        }\n    };\n    DiagramContextMenu.prototype.contextMenuBeforeOpen = function (args) {\n        return __awaiter(this, void 0, void 0, function () {\n            var diagramArgs, _i, _a, item, _b, _c, newItem, hidden, contextItems, i, item, i, item;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        if (!this.parent.checkMenu &&\n                            (window.navigator.userAgent.indexOf('Linux') !== -1 || window.navigator.userAgent.indexOf('X11') !== -1)) {\n                            this.parent.checkMenu = args.cancel = true;\n                        }\n                        if (this.parent.checkMenu) {\n                            this.hiddenItems = [];\n                        }\n                        diagramArgs = args;\n                        diagramArgs.hiddenItems = [];\n                        for (_i = 0, _a = args.items; _i < _a.length; _i++) {\n                            item = _a[_i];\n                            this.ensureItems(item, args.event);\n                            if (item.items.length) {\n                                for (_b = 0, _c = item.items; _b < _c.length; _b++) {\n                                    newItem = _c[_b];\n                                    this.ensureItems(newItem, args.event);\n                                }\n                            }\n                        }\n                        this.eventArgs = args.event;\n                        if (!isBlazor()) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.parent.trigger(contextMenuOpen, diagramArgs)];\n                    case 1:\n                        diagramArgs =\n                            (_d.sent()) || diagramArgs;\n                        if (typeof diagramArgs === 'string') {\n                            diagramArgs = JSON.parse(diagramArgs);\n                        }\n                        return [3 /*break*/, 3];\n                    case 2:\n                        this.parent.trigger(contextMenuOpen, diagramArgs);\n                        _d.label = 3;\n                    case 3:\n                        hidden = true;\n                        this.hiddenItems = this.hiddenItems.concat(diagramArgs.hiddenItems);\n                        this.contextMenu.enableItems(this.disableItems, false, true);\n                        contextItems = this;\n                        for (i = 0; i < args.items.length; i++) {\n                            item = args.items[i];\n                            if (contextItems.hiddenItems.indexOf(item.id) > -1) {\n                                contextItems.contextMenu.hideItems([item.id], true);\n                            }\n                        }\n                        for (i = 0; i < contextItems.contextMenu.items.length; i++) {\n                            item = contextItems.contextMenu.items[i];\n                            if (contextItems.hiddenItems.indexOf(item.id) === -1) {\n                                hidden = false;\n                                contextItems.contextMenu.showItems([item.id], true);\n                            }\n                        }\n                        if (hidden) {\n                            diagramArgs.cancel = hidden;\n                            this.hiddenItems = [];\n                        }\n                        /* tslint:disable */\n                        if (this.parent.selectedItems.nodes.length && this.parent.selectedItems.nodes[0].isPhase) {\n                            args.cancel = true;\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    DiagramContextMenu.prototype.ensureTarget = function (item) {\n        var selectedLength = this.parent.selectedItems.nodes.length +\n            this.parent.selectedItems.connectors.length;\n        var itemText = this.getKeyFromId(item.id);\n        var target = false;\n        switch (itemText) {\n            case 'undo':\n                target = this.parent.historyManager && this.parent.historyManager.canUndo ? true : false;\n                break;\n            case 'redo':\n                target = this.parent.historyManager && this.parent.historyManager.canRedo ? true : false;\n                break;\n            case 'paste':\n                target = this.parent.commandHandler.clipboardData.clipObject ? true : false;\n                break;\n            case 'selectAll':\n                target = this.parent.nodes.length + this.parent.connectors.length ? true : false;\n                break;\n            case 'grouping':\n                target = ((selectedLength > 1) || (this.parent.selectedItems.nodes[0] && this.parent.selectedItems.nodes[0].children\n                    && this.parent.selectedItems.nodes[0].children.length > 1)) ? true : false;\n                break;\n            case 'group':\n                target = selectedLength > 1;\n                break;\n            case 'unGroup':\n                target = ((this.parent.selectedItems.nodes[0] && this.parent.selectedItems.nodes[0].children\n                    && this.parent.selectedItems.nodes[0].children.length > 1)) ? true : false;\n                break;\n            case 'cut':\n            case 'copy':\n            case 'order':\n            case 'bringToFrontOrder':\n            case 'moveForwardOrder':\n            case 'sendToBackOrder':\n            case 'sendBackwardOrder':\n                target = selectedLength ? true : false;\n                break;\n        }\n        return target;\n    };\n    /**\n     *To destroy the context menu\n     *\n     * @returns {void} To destroy the context menu\n     */\n    DiagramContextMenu.prototype.destroy = function () {\n        if (!isBlazor()) {\n            this.contextMenu.destroy();\n            remove(this.element);\n        }\n        this.removeEventListener();\n    };\n    DiagramContextMenu.prototype.getModuleName = function () {\n        return 'contextMenu';\n    };\n    DiagramContextMenu.prototype.generateID = function (item) {\n        return this.parent.element.id + '_contextMenu_' + item;\n    };\n    DiagramContextMenu.prototype.getKeyFromId = function (id) {\n        return id.replace(this.parent.element.id + '_contextMenu_', '');\n    };\n    DiagramContextMenu.prototype.buildDefaultItems = function (item) {\n        var menuItem;\n        switch (item) {\n            case 'copy':\n                menuItem = { target: menuClass.content, iconCss: menuClass.copy };\n                break;\n            case 'cut':\n                menuItem = { target: menuClass.content, iconCss: menuClass.cut };\n                break;\n            case 'paste':\n                menuItem = { target: menuClass.content, iconCss: menuClass.paste };\n                break;\n            case 'undo':\n                menuItem = { target: menuClass.content, iconCss: menuClass.undo };\n                break;\n            case 'redo':\n                menuItem = { target: menuClass.content, iconCss: menuClass.redo };\n                break;\n            case 'grouping':\n                menuItem = { target: menuClass.content };\n                break;\n            case 'group':\n                menuItem = { target: menuClass.content, iconCss: menuClass.group };\n                break;\n            case 'unGroup':\n                menuItem = { target: menuClass.content, iconCss: menuClass.unGroup };\n                break;\n            case 'order':\n                menuItem = { target: menuClass.content, iconCss: menuClass.order };\n                break;\n            case 'bringToFrontOrder':\n                menuItem = { target: menuClass.content, iconCss: menuClass.bringToFront };\n                break;\n            case 'moveForwardOrder':\n                menuItem = { target: menuClass.content, iconCss: menuClass.moveForward };\n                break;\n            case 'sendToBackOrder':\n                menuItem = { target: menuClass.content, iconCss: menuClass.sendToBack };\n                break;\n            case 'sendBackwardOrder':\n                menuItem = { target: menuClass.content, iconCss: menuClass.sendBackward };\n                break;\n            case 'selectAll':\n                menuItem = { target: menuClass.content };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            target: menuItem.target, iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : ''\n        };\n        return this.defaultItems[item];\n    };\n    DiagramContextMenu.prototype.getDefaultItems = function () {\n        return [\n            'copy',\n            'cut', 'paste', 'undo', 'redo', 'selectAll', 'grouping', 'group', 'unGroup', 'order',\n            'bringToFrontOrder', 'moveForwardOrder', 'sendToBackOrder', 'sendBackwardOrder'\n        ];\n    };\n    DiagramContextMenu.prototype.setLocaleKey = function () {\n        return {\n            'copy': 'Copy',\n            'cut': 'Cut',\n            'paste': 'Paste',\n            'undo': 'Undo',\n            'redo': 'Redo',\n            'selectAll': 'SelectAll',\n            'grouping': 'Grouping',\n            'group': 'Group',\n            'unGroup': 'UnGroup',\n            'order': 'Order',\n            'bringToFrontOrder': 'BringToFront',\n            'moveForwardOrder': 'MoveForward',\n            'sendToBackOrder': 'SendToBack',\n            'sendBackwardOrder': 'SendBackward'\n        };\n    };\n    return DiagramContextMenu;\n}());\nexport { DiagramContextMenu };\n"]},"metadata":{},"sourceType":"module"}