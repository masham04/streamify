{"ast":null,"code":"import { Size } from './../primitives/size';\nimport { Rect } from './../primitives/rect';\nimport { identityMatrix, rotateMatrix, transformPointByMatrix, scaleMatrix } from './../primitives/matrix';\nimport { DiagramElement } from './../core/elements/diagram-element';\nimport { Container } from './../core/containers/container';\nimport { StrokeStyle, Stop } from './../core/appearance';\nimport { Point } from './../primitives/point';\nimport { ConnectorConstraints, NodeConstraints, PortConstraints, DiagramConstraints, DiagramTools, Transform, BlazorAction } from './../enum/enum';\nimport { SelectorConstraints, ThumbsConstraints } from './../enum/enum';\nimport { PathElement } from './../core/elements/path-element';\nimport { DiagramNativeElement } from './../core/elements/native-element';\nimport { TextElement } from '../core/elements/text-element';\nimport { ImageElement } from '../core/elements/image-element';\nimport { PathAnnotation, ShapeAnnotation } from './../objects/annotation';\nimport { Node, FlowShape, BasicShape, Native, Html, UmlActivityShape, BpmnGateway, BpmnDataObject, BpmnEvent, BpmnSubEvent, BpmnActivity, BpmnAnnotation, MethodArguments, UmlClassAttribute, UmlClassMethod, UmlClass, UmlInterface, UmlEnumerationMember, UmlEnumeration, Lane, Phase, ChildContainer, SwimLane, Path, Image, Text, BpmnShape, UmlClassifierShape, Header } from './../objects/node';\nimport { Connector, bezierPoints, BezierSegment, StraightSegment, OrthogonalSegment } from './../objects/connector';\nimport { getBasicShape } from './../objects/dictionary/basic-shapes';\nimport { getFlowShape } from './../objects/dictionary/flow-shapes';\nimport { Diagram } from './../diagram';\nimport { findAngle } from './connector';\nimport { getContent, removeElement, hasClass, getDiagramElement } from './dom-util';\nimport { getBounds, cloneObject, rotatePoint, getFunction } from './base-util';\nimport { getPolygonPath } from './../utility/path-util';\nimport { DiagramHtmlElement } from '../core/elements/html-element';\nimport { getRulerSize } from '../ruler/ruler';\nimport { canResize } from './constraints-util';\nimport { UserHandle } from '../interaction/selector';\nimport { getUMLActivityShape } from '../objects/dictionary/umlactivity-shapes';\nimport { Canvas } from '../core/containers/canvas';\nimport { PointPort } from '../objects/port';\nimport { Command } from '../diagram/keyboard-commands';\nimport { pasteSwimLane } from './swim-lane-util';\nimport { isBlazor, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ConnectorFixedUserHandle } from '../objects/fixed-user-handle';\n/**\n * completeRegion method\\\n *\n * @returns {  void }    completeRegion method .\\\n * @param {Rect} region - provide the region value.\n * @param {(NodeModel | ConnectorModel)[]} selectedObjects - provide the selectedObjects value.\n * @private\n */\n\nexport function completeRegion(region, selectedObjects) {\n  var collection = [];\n\n  for (var i = 0; i < selectedObjects.length; i++) {\n    var obj = selectedObjects[i];\n\n    if (region.containsRect(obj.wrapper.bounds)) {\n      collection.push(obj);\n    }\n  }\n\n  return collection;\n}\n/**\n * findNodeByName method \\\n *\n * @returns {  boolean } findNodeByName method .\\\n * @param {(NodeModel | ConnectorModel)[]} nodes - provide the nodes  value.\n * @param {string} name - provide the orientation  value.\n * @private\n */\n\nexport function findNodeByName(nodes, name) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].id === name) {\n      return true;\n    }\n  }\n\n  return false;\n}\n/**\n * findNodeByName method \\\n *\n * @returns {  string } findNodeByName method .\\\n * @param {(NodeModel | ConnectorModel)[]} drawingObject - provide the drawingObject  value.\n * @private\n */\n\nexport function findObjectType(drawingObject) {\n  var type;\n\n  if (drawingObject) {\n    if (drawingObject.type) {\n      type = 'Connector';\n    } else if (drawingObject.shape && !drawingObject.type) {\n      type = 'Node';\n    }\n  }\n\n  return type;\n}\n/**\n * setSwimLaneDefaults method \\\n *\n * @returns {  void } setSwimLaneDefaults method .\\\n * @param {NodeModel | ConnectorModel} child - provide the child  value.\n * @param {NodeModel | ConnectorModel} node - provide the node  value.\n * @private\n */\n\nexport function setSwimLaneDefaults(child, node) {\n  if (node instanceof Node) {\n    if (!child.shape.header) {\n      node.shape.hasHeader = false;\n    }\n  }\n}\n/**\n * getSpaceValue method \\\n *\n * @returns {  number } getSpaceValue method .\\\n * @param {number[]} intervals - provide the intervals  value.\n * @param {boolean} isLine - provide the isLine  value.\n * @param {number} i - provide the i  value.\n * @param {number} space - provide the space  value.\n * @private\n */\n\nexport function getSpaceValue(intervals, isLine, i, space) {\n  space = !isLine ? intervals[i - 1] !== undefined ? intervals[i - 1] + space : 0 : space;\n  return space;\n}\n/**\n * getInterval method \\\n *\n * @returns {  number[] } getInterval method .\\\n * @param {number[]} intervals - provide the intervals  value.\n * @param {boolean} isLine - provide the isLine  value.\n * @private\n */\n\nexport function getInterval(intervals, isLine) {\n  var newInterval = [];\n\n  if (!isLine) {\n    for (var k = 0; k < intervals.length; k++) {\n      newInterval.push(intervals[k]);\n    }\n\n    newInterval.push(intervals[newInterval.length - 2]);\n    newInterval.push(intervals[newInterval.length - 2]);\n  } else {\n    newInterval = intervals;\n  }\n\n  return newInterval;\n}\n/**\n * setPortsEdges method \\\n *\n * @returns {  Node } setPortsEdges method .\\\n * @param {Node} node - provide the node  value.\n * @private\n */\n\nexport function setPortsEdges(node) {\n  for (var k = 0; k < node.ports.length; k++) {\n    node.ports[k].inEdges = [];\n    node.ports[k].outEdges = [];\n  }\n\n  return node;\n}\n/**\n * setUMLActivityDefaults method \\\n *\n * @returns {  void } setUMLActivityDefaults method .\\\n * @param {NodeModel | ConnectorModel} child - provide the child  value.\n * @param {NodeModel | ConnectorModel} node - provide the node  value.\n * @private\n */\n\nexport function setUMLActivityDefaults(child, node) {\n  if (node instanceof Node) {\n    var shape = isBlazor() ? child.shape.umlActivityShape : child.shape.shape;\n\n    switch (shape) {\n      case 'JoinNode':\n        if (!child.width) {\n          node.width = 20;\n        }\n\n        if (!child.height) {\n          node.height = 90;\n        }\n\n        if (!child.style || !child.style.fill) {\n          node.style.fill = 'black';\n        }\n\n        break;\n\n      case 'ForkNode':\n        if (!child.width) {\n          node.width = 90;\n        }\n\n        if (!child.height) {\n          node.height = 20;\n        }\n\n        if (!child.style || !child.style.fill) {\n          node.style.fill = 'black';\n        }\n\n        break;\n\n      case 'InitialNode':\n        if (!child.style || !child.style.fill) {\n          node.style.fill = 'black';\n        }\n\n        break;\n\n      case 'FinalNode':\n        if (!child.style || !child.style.fill) {\n          node.style.fill = 'black';\n        }\n\n        break;\n    }\n  } else {\n    var flow = isBlazor() ? child.shape.umlActivityFlow : child.shape.flow;\n\n    switch (flow) {\n      case 'Object':\n        if (!child.style || !child.style.strokeDashArray) {\n          node.style.strokeDashArray = '8 4';\n        }\n\n        if (!child.style || !child.style.strokeWidth) {\n          node.style.strokeWidth = 2;\n        }\n\n        if (!child.targetDecorator || !child.targetDecorator.shape) {\n          node.targetDecorator.shape = 'OpenArrow';\n        }\n\n        break;\n\n      case 'Control':\n        if (!child.style || !child.style.strokeWidth) {\n          node.style.strokeWidth = 2;\n        }\n\n        if (!child.targetDecorator || !child.targetDecorator.shape) {\n          node.targetDecorator.shape = 'OpenArrow';\n        }\n\n        if (!child.sourceDecorator || !child.sourceDecorator.shape) {\n          node.sourceDecorator.shape = 'None';\n        }\n\n        break;\n    }\n  }\n}\n/* eslint-disable */\n\n/**\n * setConnectorDefaults method \\\n *\n * @returns {  void } setConnectorDefaults method .\\\n * @param {ConnectorModel} child - provide the child  value.\n * @param {ConnectorModel} node - provide the node  value.\n * @private\n */\n\nexport function setConnectorDefaults(child, node) {\n  switch (child.shape.type) {\n    case 'Bpmn':\n      var bpmnFlow = isBlazor() ? child.shape.bpmnFlow : child.shape.flow;\n\n      switch (bpmnFlow) {\n        case 'Sequence':\n          if (child.shape.sequence === 'Normal' && child.type !== 'Bezier' || child.shape.sequence === 'Default' || child.shape.sequence === 'Conditional') {\n            if (node.targetDecorator && node.targetDecorator.style) {\n              node.targetDecorator.style.fill = child.targetDecorator && child.targetDecorator.style && child.targetDecorator.style.fill || 'black';\n            }\n\n            if (child.shape.sequence === 'Conditional' && node.sourceDecorator) {\n              if (node.sourceDecorator.style) {\n                node.sourceDecorator.style.fill = child.sourceDecorator && child.sourceDecorator.style && child.sourceDecorator.style.fill || 'white';\n              }\n\n              node.sourceDecorator.width = child.sourceDecorator && child.sourceDecorator.width || 20;\n              node.sourceDecorator.height = child.sourceDecorator && child.sourceDecorator.width || 10;\n            }\n          }\n\n          break;\n\n        case 'Association':\n          if (child.shape.association === 'Default' || child.shape.association === 'Directional' || child.shape.association === 'BiDirectional') {\n            if (node.targetDecorator && node.targetDecorator.style) {\n              node.targetDecorator.style.fill = child.targetDecorator && child.targetDecorator.style && child.targetDecorator.style.fill || 'black';\n            }\n\n            if (child.shape.association === 'BiDirectional') {\n              if (node.sourceDecorator && node.sourceDecorator.style) {\n                node.sourceDecorator.style.fill = child.sourceDecorator && child.sourceDecorator.style && child.sourceDecorator.style.fill || 'white';\n                node.sourceDecorator.width = child.sourceDecorator && child.sourceDecorator.width || 5;\n                node.sourceDecorator.height = child.sourceDecorator && child.sourceDecorator.height || 10;\n              }\n            }\n          }\n\n          break;\n\n        case 'Message':\n          if (node.style && !node.style.strokeDashArray) {\n            node.style.strokeDashArray = child.style && child.style.strokeDashArray || '4 4';\n          }\n\n          break;\n      }\n\n      break;\n\n    case 'UmlActivity':\n      var flow = isBlazor() ? child.shape.umlActivityFlow : child.shape.flow;\n\n      switch (flow) {\n        case 'Exception':\n          if (child.shape.association === 'Directional' || child.shape.association === 'BiDirectional') {\n            node.style.strokeDashArray = child.style && child.style.strokeDashArray || '2 2';\n          }\n\n          break;\n      }\n\n      break;\n\n    case 'UmlClassifier':\n      var hasRelation = false;\n\n      if (child.shape.relationship === 'Association') {\n        hasRelation = true;\n      } else if (child.shape.relationship === 'Inheritance') {\n        if (node.targetDecorator && node.targetDecorator.style) {\n          node.targetDecorator.style.fill = child.targetDecorator && child.targetDecorator.style && child.targetDecorator.style.fill || 'white';\n        }\n\n        if (node.style) {\n          hasRelation = true;\n          node.style.strokeDashArray = child.style && child.style.strokeDashArray || '4 4';\n        }\n      } else if (child.shape.relationship === 'Composition') {\n        if (node.sourceDecorator && node.sourceDecorator.style) {\n          node.sourceDecorator.style.fill = child.sourceDecorator && child.sourceDecorator.style && child.sourceDecorator.style.fill || 'black';\n        }\n\n        hasRelation = true;\n      } else if (child.shape.relationship === 'Aggregation' || child.shape.relationship === undefined) {\n        if (node.sourceDecorator && node.sourceDecorator.style) {\n          node.sourceDecorator.style.fill = child.sourceDecorator && child.sourceDecorator.style && child.sourceDecorator.style.fill || 'white';\n        }\n\n        hasRelation = true;\n      } else if (child.shape.relationship === 'Dependency') {\n        if (node.sourceDecorator && node.sourceDecorator.style) {\n          node.sourceDecorator.style.fill = child.sourceDecorator && child.sourceDecorator.style && child.sourceDecorator.style.fill || 'white';\n        }\n\n        hasRelation = true;\n        node.style.strokeDashArray = '4 4';\n      } else if (child.shape.relationship === 'Realization') {\n        if (node.sourceDecorator && node.sourceDecorator.style) {\n          node.sourceDecorator.style.fill = child.sourceDecorator && child.sourceDecorator.style && child.sourceDecorator.style.fill || 'white';\n        }\n\n        hasRelation = true;\n      }\n\n      if (hasRelation) {\n        node.style.strokeWidth = child.style && child.style.strokeWidth || 2;\n      }\n\n      break;\n  }\n}\n/* eslint-enable */\n\n/**\n * findNearestPoint method \\\n *\n * @returns {  PointModel } findNearestPoint method .\\\n * @param {PointModel} reference - provide the reference  value.\n * @param {PointModel} start - provide the start  value.\n * @param {PointModel} end - provide the end  value.\n * @private\n */\n\nexport function findNearestPoint(reference, start, end) {\n  var shortestPoint;\n  var shortest = Point.findLength(start, reference);\n  var shortest1 = Point.findLength(end, reference);\n\n  if (shortest > shortest1) {\n    shortestPoint = end;\n  } else {\n    shortestPoint = start;\n  }\n\n  var angleBWStAndEnd = Point.findAngle(start, end);\n  var angleBWStAndRef = Point.findAngle(shortestPoint, reference);\n  var r = Point.findLength(shortestPoint, reference);\n  var vaAngle = angleBWStAndRef + (angleBWStAndEnd - angleBWStAndRef) * 2;\n  return {\n    x: shortestPoint.x + r * Math.cos(vaAngle * Math.PI / 180),\n    y: shortestPoint.y + r * Math.sin(vaAngle * Math.PI / 180)\n  };\n}\n/**\n * pointsForBezier method \\\n *\n * @returns {   PointModel[] } pointsForBezier method .\\\n * @param {ConnectorModel} connector - provide the connector  value.\n * @private\n */\n\nfunction pointsForBezier(connector) {\n  var points = [];\n\n  if (connector.type === 'Bezier') {\n    var k = 0;\n\n    for (var i = 0; i < connector.segments.length; i++) {\n      var tolerance = 1.5;\n      var segment = connector.segments[i]; //const pt: PointModel = { x: 0, y: 0 };\n\n      var point1 = !Point.isEmptyPoint(segment.point1) ? segment.point1 : segment.bezierPoint1;\n      var point2 = !Point.isEmptyPoint(segment.point2) ? segment.point2 : segment.bezierPoint2;\n      var max = Number((connector.distance(point1, segment.points[0]) + connector.distance(point2, point1) + connector.distance(segment.points[1], point2)) / tolerance);\n\n      for (var j = 0; j < max - 1; j = j + 10) {\n        points[k] = bezierPoints(connector, segment.points[0], !Point.isEmptyPoint(segment.point1) ? segment.point1 : segment.bezierPoint1, !Point.isEmptyPoint(segment.point2) ? segment.point2 : segment.bezierPoint2, segment.points[1], j, max);\n        k++;\n      }\n    }\n  }\n\n  return points;\n}\n/**\n * isDiagramChild method \\\n *\n * @returns {  boolean } isDiagramChild method .\\\n * @param {HTMLElement} htmlLayer - provide the htmlLayer  value.\n * @private\n */\n\n\nexport function isDiagramChild(htmlLayer) {\n  var element = htmlLayer.parentElement;\n\n  do {\n    if (hasClass(element, 'e-diagram')) {\n      return true;\n    }\n\n    element = element.parentElement;\n  } while (element);\n\n  return false;\n}\n/**\n * groupHasType method \\\n *\n * @returns {  boolean } groupHasType method .\\\n * @param {NodeModel} node - provide the node  value.\n * @param {Shapes} type - provide the type  value.\n * @param {{}} nameTable - provide the nameTable  value.\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\n\nexport function groupHasType(node, type, nameTable) {\n  var contains = false;\n\n  if (node && node.children && node.children.length > 0) {\n    var child = void 0;\n    var i = 0;\n\n    for (; i < node.children.length; i++) {\n      child = nameTable[node.children[i]];\n\n      if (child.shape.type === type) {\n        return true;\n      }\n\n      return groupHasType(child, type, nameTable);\n    }\n  }\n\n  return contains;\n}\n/**\n * groupHasType method \\\n *\n * @returns {  void } groupHasType method .\\\n * @param {NodeModel | ConnectorModel} actualNode - provide the actualNode  value.\n * @param { NodeModel | ConnectorModel} plainValue - provide the plainValue  value.\n * @param {object} defaultValue - provide the defaultValue  value.\n * @param {NodeModel | ConnectorModel} property - provide the property  value.\n * @param {string} oldKey - provide the oldKey  value.\n * @private\n */\n\nexport function updateDefaultValues(actualNode, plainValue, // eslint-disable-next-line @typescript-eslint/ban-types\ndefaultValue, property, oldKey) {\n  if (defaultValue && (actualNode instanceof Connector || actualNode && (actualNode.shape && actualNode.shape.type !== 'SwimLane' || actualNode.shape === undefined))) {\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    var keyObj = void 0;\n\n    for (var _i = 0, _a = Object.keys(defaultValue); _i < _a.length; _i++) {\n      var key = _a[_i];\n      keyObj = defaultValue[key];\n\n      if (key === 'shape' && keyObj.type) {\n        actualNode.shape = {\n          type: keyObj.type\n        };\n      }\n\n      if (keyObj) {\n        if (Array.isArray(keyObj) && keyObj.length && keyObj.length > 0 && oldKey !== 'annotations' && oldKey !== 'ports') {\n          if (actualNode[key].length > 0) {\n            for (var i = 0; i <= actualNode[key].length; i++) {\n              updateDefaultValues(actualNode[key], plainValue ? plainValue[key] : undefined, defaultValue[key], key === 'annotations' || key === 'ports' ? actualNode : undefined, key);\n            }\n          } else {\n            updateDefaultValues(actualNode[key], plainValue ? plainValue[key] : undefined, defaultValue[key], key === 'annotations' || key === 'ports' ? actualNode : undefined, key);\n          }\n        } else if (keyObj instanceof Object && plainValue && oldKey !== 'annotations' && oldKey !== 'ports') {\n          updateDefaultValues(actualNode[key], plainValue[key], defaultValue[key]);\n        } else if (oldKey !== 'annotations' && oldKey !== 'ports' && plainValue && !plainValue[key] || !plainValue && actualNode && (actualNode[key] || actualNode[key] !== undefined)) {\n          actualNode[key] = defaultValue[key];\n        } else {\n          var createObject = void 0;\n\n          if (oldKey === 'annotations' || oldKey === 'ports') {\n            if (oldKey === 'annotations') {\n              if (actualNode[key]) {\n                updateDefaultValues(actualNode[key], plainValue[key], defaultValue[key]);\n              }\n\n              if (!actualNode[key]) {\n                if (getObjectType(property) === Connector) {\n                  createObject = new PathAnnotation(property, 'annotations', defaultValue[key]);\n                  property.annotations.push(createObject);\n                } else {\n                  createObject = new ShapeAnnotation(property, 'annotations', defaultValue[key]);\n                  property.annotations.push(createObject);\n                }\n              }\n            } else {\n              if (actualNode[key]) {\n                updateDefaultValues(actualNode[key], plainValue[key], defaultValue[key]);\n              } else {\n                createObject = new PointPort(property, 'ports', defaultValue[key]);\n                property.ports.push(createObject);\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n/* tslint:disable:no-string-literal */\n\n/**\n * updateLayoutValue method \\\n *\n * @returns {  void } updateLayoutValue method .\\\n * @param {TreeInfo} actualNode - provide the actualNode  value.\n * @param { object} defaultValue - provide the defaultValue  value.\n * @param {INode[]} nodes - provide the nodes  value.\n * @param {INode} node - provide the node  value.\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\n\nexport function updateLayoutValue(actualNode, defaultValue, nodes, node) {\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  var keyObj;\n  var assistantKey = \"Role\";\n\n  if (defaultValue) {\n    for (var _i = 0, _a = Object.keys(defaultValue); _i < _a.length; _i++) {\n      var key = _a[_i];\n      keyObj = defaultValue[key];\n\n      if (key === 'getAssistantDetails') {\n        if (isBlazor()) {\n          // Iterate the node data and get the assistant.\n          for (var _b = 0, _c = Object.keys(node.data); _b < _c.length; _b++) {\n            var dataValue = _c[_b];\n            assistantKey = dataValue;\n\n            if (node.data[assistantKey] === defaultValue[key]['root']) {\n              break;\n            }\n          }\n        }\n\n        if (node.data[assistantKey] === defaultValue[key]['root']) {\n          var assitants = defaultValue[key]['assistants'];\n\n          for (var i = 0; i < assitants.length; i++) {\n            for (var j = 0; j < nodes.length; j++) {\n              if (nodes[j].data[assistantKey] === assitants[i]) {\n                actualNode.assistants.push(nodes[j].id);\n                actualNode.children.splice(0, 1);\n              }\n            }\n          }\n        }\n      } else if (keyObj) {\n        actualNode[key] = defaultValue[key];\n      }\n    }\n  }\n\n  if (!actualNode.hasSubTree && defaultValue.canEnableSubTree) {\n    actualNode.orientation = node.layoutInfo.orientation;\n    actualNode.type = node.layoutInfo.type;\n\n    if (node.layoutInfo.offset !== actualNode.offset && node.layoutInfo.offset !== undefined) {\n      actualNode.offset = node.layoutInfo.offset;\n    }\n  }\n\n  node.layoutInfo.hasSubTree = actualNode.hasSubTree;\n}\n/* tslint:enable:no-string-literal */\n\n/**\n * isPointOverConnector method \\\n *\n * @returns {  boolean } isPointOverConnector method .\\\n * @param {ConnectorModel} connector - provide the connector  value.\n * @param { PointModel} reference - provide the reference  value.\n * @private\n */\n\nexport function isPointOverConnector(connector, reference) {\n  //let intermediatePoints: PointModel[];\n  var intermediatePoints = connector.type === 'Bezier' ? pointsForBezier(connector) : connector.intermediatePoints;\n\n  for (var i = 0; i < intermediatePoints.length - 1; i++) {\n    var start = intermediatePoints[i];\n    var end = intermediatePoints[i + 1];\n    var rect = Rect.toBounds([start, end]);\n    rect.Inflate(connector.hitPadding);\n\n    if (rect.containsPoint(reference)) {\n      var intersectinPt = findNearestPoint(reference, start, end);\n      var segment1 = {\n        x1: start.x,\n        x2: end.x,\n        y1: start.y,\n        y2: end.y\n      };\n      var segment2 = {\n        x1: reference.x,\n        x2: intersectinPt.x,\n        y1: reference.y,\n        y2: intersectinPt.y\n      };\n      var intersectDetails = intersect3(segment1, segment2);\n\n      if (intersectDetails.enabled) {\n        var distance = Point.findLength(reference, intersectDetails.intersectPt);\n\n        if (Math.abs(distance) < connector.hitPadding) {\n          return true;\n        }\n      } else {\n        var rect_1 = Rect.toBounds([reference, reference]);\n        rect_1.Inflate(3);\n\n        if (rect_1.containsPoint(start) || rect_1.containsPoint(end)) {\n          return true;\n        }\n      }\n\n      if (Point.equals(reference, intersectinPt)) {\n        return true;\n      }\n    }\n  }\n\n  if (connector.annotations.length > 0) {\n    var container = connector.wrapper.children;\n\n    for (var i = 3; i < container.length; i++) {\n      var textElement = container[i];\n\n      if (textElement.bounds.containsPoint(reference)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n/**\n * intersect3 method \\\n *\n * @returns {  Intersection } intersect3 method .\\\n * @param {ConnectorModel} lineUtil1 - provide the lineUtil1  value.\n * @param { PointModel} lineUtil2 - provide the lineUtil2  value.\n * @private\n */\n\nexport function intersect3(lineUtil1, lineUtil2) {\n  var point = {\n    x: 0,\n    y: 0\n  };\n  var l1 = lineUtil1;\n  var l2 = lineUtil2;\n  var d = (l2.y2 - l2.y1) * (l1.x2 - l1.x1) - (l2.x2 - l2.x1) * (l1.y2 - l1.y1);\n  var na = (l2.x2 - l2.x1) * (l1.y1 - l2.y1) - (l2.y2 - l2.y1) * (l1.x1 - l2.x1);\n  var nb = (l1.x2 - l1.x1) * (l1.y1 - l2.y1) - (l1.y2 - l1.y1) * (l1.x1 - l2.x1);\n  /*( EJ2-42102 - Connector segments not update properly ) by sivakumar sekar - condition added to avoid bridging for\n   overlapping segments in the connectors and to validate whether the connector is intersecting over the other */\n\n  if (d === 0 || (lineUtil1.x1 === lineUtil2.x1 || lineUtil1.y1 === lineUtil2.y1) && (lineUtil1.x2 === lineUtil2.x2 || lineUtil1.y2 === lineUtil2.y2) && (na === 0 || nb === 0) && d > 0) {\n    return {\n      enabled: false,\n      intersectPt: point\n    };\n  }\n\n  var ua = na / d;\n  var ub = nb / d;\n\n  if (ua >= 0 && ua <= 1 && ub >= 0 && ub <= 1) {\n    point.x = l1.x1 + ua * (l1.x2 - l1.x1);\n    point.y = l1.y1 + ua * (l1.y2 - l1.y1);\n    return {\n      enabled: true,\n      intersectPt: point\n    };\n  }\n\n  return {\n    enabled: false,\n    intersectPt: point\n  };\n}\n/**\n * intersect2 method \\\n *\n * @returns {  PointModel } intersect2 method .\\\n * @param {PointModel} start1 - provide the start1  value.\n * @param { PointModel} end1 - provide the end1  value.\n * @param { PointModel} start2 - provide the start2  value.\n * @param { PointModel} end2 - provide the end2  value.\n * @private\n */\n\nexport function intersect2(start1, end1, start2, end2) {\n  var point = {\n    x: 0,\n    y: 0\n  };\n  var lineUtil1 = getLineSegment(start1.x, start1.y, end1.x, end1.y);\n  var lineUtil2 = getLineSegment(start2.x, start2.y, end2.x, end2.y);\n  var line3 = intersect3(lineUtil1, lineUtil2);\n\n  if (line3.enabled) {\n    return line3.intersectPt;\n  } else {\n    return point;\n  }\n}\n/**\n * getLineSegment method \\\n *\n * @returns {  Segment } getLineSegment method .\\\n * @param {number} x1 - provide the x1  value.\n * @param { number} y1 - provide the y1  value.\n * @param { number} x2 - provide the x2  value.\n * @param { number} y2 - provide the y2  value.\n * @private\n */\n\nexport function getLineSegment(x1, y1, x2, y2) {\n  return {\n    'x1': Number(x1) || 0,\n    'y1': Number(y1) || 0,\n    'x2': Number(x2) || 0,\n    'y2': Number(y2) || 0\n  };\n}\n/**\n * getPoints method \\\n *\n * @returns {  PointModel[] } getPoints method .\\\n * @param {number} element - provide the element  value.\n * @param { number} corners - provide the corners  value.\n * @param { number} padding - provide the padding  value.\n * @private\n */\n\nexport function getPoints(element, corners, padding) {\n  var line = [];\n  padding = padding || 0;\n  var left = {\n    x: corners.topLeft.x - padding,\n    y: corners.topLeft.y\n  };\n  var right = {\n    x: corners.topRight.x + padding,\n    y: corners.topRight.y\n  };\n  var top = {\n    x: corners.bottomRight.x,\n    y: corners.bottomRight.y - padding\n  };\n  var bottom = {\n    x: corners.bottomLeft.x,\n    y: corners.bottomLeft.y + padding\n  };\n  line.push(left);\n  line.push(right);\n  line.push(top);\n  line.push(bottom);\n  return line;\n}\n/**\n * getTooltipOffset method \\\n *\n * @returns {  PointModel[] } getTooltipOffset method .\\\n * @param {number} diagram - provide the diagram  value.\n * @param { number} mousePosition - provide the mousePosition  value.\n * @param { NodeModel | ConnectorModel} node - provide the node  value.\n * @param { string} type - provide the type  value.\n * @private\n */\n\nexport function getTooltipOffset(diagram, mousePosition, node, type) {\n  //let offset: PointModel;\n  var inheritTooltip = node instanceof Node ? node.constraints & NodeConstraints.InheritTooltip : node.constraints & ConnectorConstraints.InheritTooltip;\n  var objectTooltip = node instanceof Node ? node.constraints & NodeConstraints.Tooltip : node.constraints & ConnectorConstraints.Tooltip;\n  var isMouseBased = (!inheritTooltip && objectTooltip ? node.tooltip.relativeMode : diagram.tooltip.relativeMode) === 'Mouse' ? true : false;\n\n  if (type === 'Mouse') {\n    isMouseBased = true;\n  } else if (type === 'Object') {\n    isMouseBased = false;\n  }\n\n  var offset = tooltipOffset(node, mousePosition, diagram, isMouseBased);\n  var rulerSize = getRulerSize(diagram);\n  return {\n    x: offset.x + rulerSize.width,\n    y: offset.y + rulerSize.height\n  };\n}\n/**\n * tooltipOffset method \\\n *\n * @returns { PointModel } tooltipOffset method .\\\n * @param {NodeModel | ConnectorModel} node - provide the node  value.\n * @param { PointModel} mousePosition - provide the mousePosition  value.\n * @param { Diagram } diagram - provide the diagram  value.\n * @param { boolean} isMouseBased - provide the isMouseBased  value.\n * @private\n */\n\nfunction tooltipOffset(node, mousePosition, diagram, isMouseBased) {\n  var point = {}; //let scale: number = diagram.scroller.transform.scale;\n\n  var element = document.getElementById(diagram.element.id);\n  var bounds = node.wrapper.bounds;\n  var rect = element.getBoundingClientRect();\n  /* eslint-enable */\n  //let horizontalOffset: number = diagram.scroller.horizontalOffset;\n  //let verticalOffset: number = diagram.scroller.verticalOffset;\n\n  switch (diagram.tooltipObject.position) {\n    case 'BottomCenter':\n      point = offsetPoint(mousePosition, bounds.bottomCenter, diagram, isMouseBased, rect.width / 2, rect.height);\n      break;\n\n    case 'BottomLeft':\n    case 'LeftBottom':\n      point = offsetPoint(mousePosition, bounds.bottomLeft, diagram, isMouseBased, 0, rect.height);\n      break;\n\n    case 'BottomRight':\n    case 'RightBottom':\n      point = offsetPoint(mousePosition, bounds.bottomRight, diagram, isMouseBased, rect.width, rect.height);\n      break;\n\n    case 'LeftCenter':\n      point = offsetPoint(mousePosition, bounds.middleLeft, diagram, isMouseBased, 0, rect.height / 2);\n      break;\n\n    case 'LeftTop':\n    case 'TopLeft':\n      point = offsetPoint(mousePosition, bounds.topLeft, diagram, isMouseBased, 0, 0);\n      break;\n\n    case 'RightCenter':\n      point = offsetPoint(mousePosition, bounds.middleRight, diagram, isMouseBased, rect.width, rect.height / 2);\n      break;\n\n    case 'RightTop':\n    case 'TopRight':\n      point = offsetPoint(mousePosition, bounds.topRight, diagram, isMouseBased, rect.width, 0);\n      break;\n\n    case 'TopCenter':\n      point = offsetPoint(mousePosition, bounds.topCenter, diagram, isMouseBased, rect.width / 2, 0);\n      break;\n  }\n\n  return point;\n}\n/**\n * offsetPoint method \\\n *\n * @returns { PointModel } offsetPoint method .\\\n * @param { PointModel} mousePosition - provide the mousePosition  value.\n * @param { PointModel } bound - provide the diagram  value.\n * @param { Diagram} diagram - provide the isMouseBased  value.\n * @param { boolean} isMouseBased - provide the isMouseBased  value.\n * @param { number} x - provide the isMouseBased  value.\n * @param { number} y - provide the isMouseBased  value.\n * @private\n */\n\n\nfunction offsetPoint(mousePosition, bound, diagram, isMouseBased, x, y) {\n  var point = {};\n  var scale = diagram.scroller.transform.scale;\n  var horizontalOffset = diagram.scroller.horizontalOffset;\n  var verticalOffset = diagram.scroller.verticalOffset;\n  point.x = (isMouseBased ? mousePosition.x : bound.x) * scale + horizontalOffset - x;\n  point.y = (isMouseBased ? mousePosition.y : bound.y) * scale + verticalOffset - y;\n  return point;\n}\n/**\n * Gets the fixed user handles symbol \\\n *\n * @returns { DiagramElement } Gets the fixed user handles symbol .\\\n * @param {ConnectorFixedUserHandleModel | NodeFixedUserHandleModel} options - provide the options  value.\n * @param { Canvas} fixedUserHandleContainer - provide the fixedUserHandleContainer  value.\n * @private\n */\n\n\nexport function initfixedUserHandlesSymbol(options, fixedUserHandleContainer) {\n  //let fixedUserHandleContent: PathElement | DiagramNativeElement;\n  var fixedUserHandleContent = new PathElement();\n  fixedUserHandleContent.data = options.pathData;\n  fixedUserHandleContent.height = options.height > 10 ? options.height - (options.padding.bottom + options.padding.top) : options.height;\n  fixedUserHandleContent.width = options.width > 10 ? options.width - (options.padding.left + options.padding.right) : options.width;\n  fixedUserHandleContent.visible = fixedUserHandleContainer.visible;\n  fixedUserHandleContent.id = fixedUserHandleContainer.id + '_shape';\n  fixedUserHandleContent.inversedAlignment = false;\n  fixedUserHandleContent.horizontalAlignment = 'Center';\n  fixedUserHandleContent.verticalAlignment = 'Center';\n  fixedUserHandleContent.style = {\n    fill: options.iconStrokeColor,\n    strokeColor: options.iconStrokeColor,\n    strokeWidth: options.iconStrokeWidth\n  };\n  fixedUserHandleContent.setOffsetWithRespectToBounds(0.5, 0.5, 'Fraction');\n  fixedUserHandleContent.relativeMode = 'Object';\n  fixedUserHandleContent.description = fixedUserHandleContainer.description || '';\n  return fixedUserHandleContent;\n}\n/**\n * sort method \\\n *\n * @returns { (NodeModel | ConnectorModel)[] } sort method .\\\n * @param {(NodeModel | ConnectorModel)[]} objects - provide the options  value.\n * @param { DistributeOptions} option - provide the fixedUserHandleContainer  value.\n * @private\n */\n\nexport function sort(objects, option) {\n  var i = 0;\n  var j = 0;\n  var temp;\n\n  for (i = 0; i < objects.length; i++) {\n    var b = getBounds(objects[i].wrapper);\n\n    for (j = 0; j < objects.length; j++) {\n      var bounds = getBounds(objects[j].wrapper);\n\n      if (option === 'Top' || option === 'Bottom' || option === 'BottomToTop' || option === 'Middle') {\n        if (b.center.y > bounds.center.y) {\n          temp = objects[i];\n          objects[i] = objects[j];\n          objects[j] = temp;\n        }\n      } else {\n        if (b.center.x > bounds.center.x) {\n          temp = objects[i];\n          objects[i] = objects[j];\n          objects[j] = temp;\n        }\n      }\n    }\n  }\n\n  return objects;\n}\n/**\n * getAnnotationPosition method \\\n *\n * @returns {SegmentInfo } getAnnotationPosition method .\\\n * @param {PointModel[]} pts - provide the pts  value.\n * @param { PathAnnotation | ConnectorFixedUserHandle} annotation - provide the annotation  value.\n * @param { Rect } bound - provide the bound  value.\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\nexport function getAnnotationPosition(pts, annotation, bound) {\n  //let angle: number;\n  //let getloop: SegmentInfo;\n  //let point: PointModel;\n  var getloop = getOffsetOfConnector(pts, annotation);\n  var angle = Point.findAngle(pts[getloop.index], pts[getloop.index + 1]);\n  var alignednumber = getAlignedPosition(annotation);\n  var point = Point.transform(getloop.point, angle + 45, alignednumber);\n  getloop.point = point;\n  getloop.angle = angle;\n  return getloop;\n}\n/**\n * getOffsetOfConnector method \\\n *\n * @returns {SegmentInfo } getOffsetOfConnector method .\\\n * @param {PointModel[]} points - provide the pts  value.\n * @param { PathAnnotation | ConnectorFixedUserHandle} annotation - provide the annotation  value.\n * @private\n */\n\nexport function getOffsetOfConnector(points, annotation) {\n  // eslint-disable-next-line\n  var length = 0;\n  var offset = annotation.offset;\n  var point;\n  var angle;\n  var lengths = [];\n  var prevLength;\n  var kCount;\n\n  for (var j = 0; j < points.length - 1; j++) {\n    length += Point.distancePoints(points[j], points[j + 1]);\n    lengths.push(length);\n  }\n\n  var offsetLength = offset * length;\n\n  for (var k = 0; k < lengths.length; k++) {\n    if (lengths[k] >= offsetLength) {\n      angle = Point.findAngle(points[k], points[k + 1]);\n      point = Point.transform(points[k], angle, offsetLength - (prevLength || 0));\n      kCount = k;\n      return {\n        point: point,\n        index: kCount\n      };\n    }\n\n    prevLength = lengths[k];\n  }\n\n  return {\n    point: point,\n    index: kCount\n  };\n}\n/**\n * getAlignedPosition method \\\n *\n * @returns {number } getAlignedPosition method .\\\n * @param {PointModel[]} annotation - provide the annotation  value.\n * @private\n */\n\nexport function getAlignedPosition(annotation) {\n  var cnst;\n\n  if (annotation instanceof ConnectorFixedUserHandle) {\n    cnst = 0;\n  } else {\n    cnst = annotation.content === undefined ? 10 : 0;\n  }\n\n  var state = 0;\n\n  switch (annotation.alignment) {\n    case 'Center':\n      state = 0;\n      break;\n\n    case 'Before':\n      state = -(0 / 2 + cnst);\n      break;\n\n    case 'After':\n      state = 0 / 2 + cnst;\n      break;\n  }\n\n  return state;\n}\n/**\n * alignLabelOnSegments method \\\n *\n * @returns {Alignment } alignLabelOnSegments method .\\\n * @param {PathAnnotation | ConnectorFixedUserHandle} obj - provide the obj  value.\n * @param { number } ang - provide the ang  value.\n * @param { PointModel[] } pts - provide the pts  value.\n * @private\n */\n\nexport function alignLabelOnSegments(obj, ang, pts) {\n  //let angle: number = ang % 360;\n  ang %= 360;\n  var fourty5 = 45;\n  var one35 = 135;\n  var two25 = 225;\n  var three15 = 315;\n  var vAlign;\n  var hAlign;\n\n  switch (obj.alignment) {\n    case 'Before':\n      if (ang >= fourty5 && ang <= one35) {\n        hAlign = 'right';\n        vAlign = obj.offset === 0.5 ? 'center' : 'top';\n      } else if (ang >= two25 && ang <= three15) {\n        hAlign = 'left';\n        vAlign = obj.offset === 0.5 ? 'center' : 'bottom';\n      } else if (ang > fourty5 && ang < two25) {\n        vAlign = 'top';\n        hAlign = obj.offset === 0.5 ? 'center' : 'right';\n      } else {\n        vAlign = 'bottom';\n        hAlign = obj.offset === 0.5 ? 'center' : 'left';\n      }\n\n      break;\n\n    case 'After':\n      if (ang >= fourty5 && ang <= one35) {\n        hAlign = 'left';\n        vAlign = obj.offset === 0.5 ? 'center' : 'top';\n      } else if (ang >= two25 && ang <= three15) {\n        hAlign = 'right';\n        vAlign = obj.offset === 0.5 ? 'center' : 'bottom';\n      } else if (ang > fourty5 && ang < two25) {\n        vAlign = 'bottom';\n        hAlign = obj.offset === 0.5 ? 'center' : 'right';\n      } else {\n        vAlign = 'top';\n        hAlign = obj.offset === 0.5 ? 'center' : 'left';\n      }\n\n      break;\n\n    case 'Center':\n      hAlign = !isNullOrUndefined(obj.horizontalAlignment) ? obj.horizontalAlignment.toLowerCase() : \"center\";\n      ;\n      vAlign = !isNullOrUndefined(obj.verticalAlignment) ? obj.verticalAlignment.toLowerCase() : \"center\";\n      break;\n  }\n\n  if (obj.offset === 0 || obj.offset === 1) {\n    //let direction: string;\n    var direction = getBezierDirection(pts[0], pts[1]);\n\n    switch (direction) {\n      case 'left':\n        hAlign = obj.offset === 0 ? 'right' : 'left';\n        break;\n\n      case 'right':\n        hAlign = obj.offset === 0 ? 'left' : 'right';\n        break;\n\n      case 'bottom':\n        vAlign = obj.offset === 0 ? 'top' : 'bottom';\n        break;\n\n      case 'top':\n        vAlign = obj.offset === 0 ? 'bottom' : 'top';\n        break;\n    }\n  }\n\n  return {\n    hAlign: hAlign,\n    vAlign: vAlign\n  };\n}\n/**\n * getBezierDirection method \\\n *\n * @returns {string } getBezierDirection method .\\\n * @param {PointModel} src - provide the src  value.\n * @param { PointModel } tar - provide the tar  value.\n * @private\n */\n\nexport function getBezierDirection(src, tar) {\n  if (Math.abs(tar.x - src.x) > Math.abs(tar.y - src.y)) {\n    return src.x < tar.x ? 'right' : 'left';\n  } else {\n    return src.y < tar.y ? 'bottom' : 'top';\n  }\n}\n/**\n * removeChildNodes method \\\n *\n * @returns {void } removeChildNodes method .\\\n * @param {NodeModel} node - provide the node  value.\n * @param { Diagram } diagram - provide the diagram  value.\n * @private\n */\n\nexport function removeChildNodes(node, diagram) {\n  if (node instanceof Node && node.children) {\n    for (var i = 0; i < node.children.length; i++) {\n      if (diagram.nameTable[node.children[i]].children) {\n        removeChildNodes(node, diagram);\n      }\n\n      diagram.removeFromAQuad(diagram.nameTable[node.children[i]]);\n      diagram.removeObjectsFromLayer(diagram.nameTable[node.children[i]]);\n      delete diagram.nameTable[node.children[i]];\n    }\n  }\n}\n/**\n * getChild method \\\n *\n * @returns {string[] } getChild method .\\\n * @param {Canvas} child - provide the child  value.\n * @param { string[] } children - provide the children  value.\n * @private\n */\n\nexport function getChild(child, children) {\n  if (child && child.children && child.children.length > 0) {\n    for (var j = 0; j < child.children.length; j++) {\n      var subChild = child.children[j];\n\n      if (subChild instanceof Canvas) {\n        getChild(subChild, children);\n      }\n    }\n  }\n\n  if (children.indexOf(child.id) === -1) {\n    children.push(child.id);\n  }\n\n  return children;\n}\n/**\n * getSwimLaneChildren method \\\n *\n * @returns {string[] } getSwimLaneChildren method .\\\n * @param {NodeModel[]} nodes - provide the nodes  value.\n * @private\n */\n\nfunction getSwimLaneChildren(nodes) {\n  var children = [];\n  var node;\n  var grid;\n  var childTable;\n  var child;\n  var gridChild = 'childTable';\n\n  for (var i = 0; i < nodes.length; i++) {\n    node = nodes[i];\n\n    if (node.shape.type === 'SwimLane') {\n      grid = node.wrapper.children[0];\n      childTable = grid[gridChild];\n\n      for (var _i = 0, _a = Object.keys(childTable); _i < _a.length; _i++) {\n        var key = _a[_i];\n        child = childTable[key];\n        children = getChild(child, children);\n      }\n    }\n  }\n\n  return children;\n}\n/**\n * removeUnnecessaryNodes method \\\n *\n * @returns {void } removeUnnecessaryNodes method .\\\n * @param {string[]} children - provide the children  value.\n * @param {Diagram} diagram - provide the diagram  value.\n * @private\n */\n\n\nfunction removeUnnecessaryNodes(children, diagram) {\n  var nodes = diagram.nodes;\n\n  if (nodes) {\n    for (var i = 0; i < nodes.length; i++) {\n      if (children.indexOf(nodes[i].id) !== -1) {\n        nodes.splice(i, 1);\n        i--;\n      }\n    }\n  }\n}\n/**\n * serialize method \\\n *\n * @returns {string } serialize method .\\\n * @param {Diagram} model - provide the model  value.\n * @private\n */\n\n\nexport function serialize(model) {\n  var removeNodes = getSwimLaneChildren(model.nodes);\n  var clonedObject = cloneObject(model, model.getCustomProperty);\n  clonedObject.selectedItems.nodes = [];\n  clonedObject.selectedItems.connectors = [];\n  clonedObject.selectedItems.wrapper = null;\n\n  if (model.serializationSettings.preventDefaults) {\n    clonedObject = preventDefaults(clonedObject, model);\n  }\n\n  removeUnnecessaryNodes(removeNodes, clonedObject);\n  return JSON.stringify(clonedObject);\n}\n/**\n * preventDefaults method \\\n *\n * @returns {string } preventDefaults method .\\\n * @param {Object} clonedObject - provide the clonedObject  value.\n * @param {object} model - provide the model  value.\n * @param {object} defaultObject - provide the defaultObject  value.\n * @param {boolean} isNodeShape - provide the isNodeShape  value.\n * @private\n */\n// eslint-disable-next-line\n\nfunction preventDefaults(clonedObject, model, defaultObject, isNodeShape) {\n  defaultObject = getConstructor(model, defaultObject);\n  var properties = [];\n  properties = properties.concat(Object.keys(clonedObject));\n\n  for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n    var property = properties_1[_i];\n\n    if (model instanceof Node) {\n      isNodeShape = property === 'shape' ? true : false;\n    }\n\n    if (clonedObject[property] instanceof Array) {\n      preventArrayDefaults(clonedObject, defaultObject, model, property);\n    } else if (clonedObject[property] instanceof Object && defaultObject && defaultObject[property]) {\n      if (property !== 'wrapper') {\n        clonedObject[property] = preventDefaults(clonedObject[property], model[property], defaultObject[property], isNodeShape);\n      }\n    } else if (defaultObject && clonedObject[property] === defaultObject[property] || clonedObject[property] === undefined) {\n      if (!(isNodeShape && property === 'type') && !(model instanceof SwimLane && property === 'orientation')) {\n        delete clonedObject[property];\n      }\n    }\n\n    if (JSON.stringify(clonedObject[property]) === '[]' || JSON.stringify(clonedObject[property]) === '{}' || clonedObject[property] === undefined) {\n      delete clonedObject[property];\n    }\n  }\n\n  return clonedObject;\n}\n/**\n * preventArrayDefaults method \\\n *\n * @returns {void } preventArrayDefaults method .\\\n * @param {object} clonedObject - provide the clonedObject  value.\n * @param {object} defaultObject - provide the defaultObject  value.\n * @param {object} model - provide the model  value.\n * @param {string} property - provide the property  value.\n * @private\n */\n// eslint-disable-next-line\n\n\nfunction preventArrayDefaults(clonedObject, defaultObject, model, property) {\n  if (clonedObject[property].length === 0) {\n    delete clonedObject[property]; // eslint-disable-next-line\n  } else if (clonedObject[property].every(function (element) {\n    return typeof element === 'number';\n  })) {\n    var i = void 0;\n    var isSameArray = true;\n\n    for (i = 0; i < clonedObject[property].length; i++) {\n      if (isSameArray && clonedObject[property][i] === defaultObject[property][i]) {\n        isSameArray = true;\n      } else {\n        isSameArray = false;\n      }\n    }\n\n    if (isSameArray) {\n      delete clonedObject[property];\n    }\n  } else {\n    var i = void 0;\n\n    if (property === 'layers') {\n      clonedObject[property].splice(0, 1);\n\n      if (clonedObject[property].length === 0) {\n        delete clonedObject[property];\n      }\n    }\n\n    if (clonedObject[property]) {\n      for (i = clonedObject[property].length - 1; i >= 0; i--) {\n        if (property === 'nodes' || property === 'connectors') {\n          clonedObject[property][i].wrapper = null;\n        }\n\n        if (property !== 'dataManager') {\n          clonedObject[property][i] = preventDefaults(clonedObject[property][i], model[property][i], defaultObject[property] !== undefined ? defaultObject[property][i] : []);\n\n          if (JSON.stringify(clonedObject[property][i]) === '[]' || JSON.stringify(clonedObject[property][i]) === '{}' || clonedObject[property][i] === undefined) {\n            clonedObject[property].splice(i, 1);\n          }\n        }\n      }\n    }\n  }\n}\n/* eslint-disable */\n\n/**\n * getConstructor method \\\n *\n * @returns {object } getConstructor method .\\\n * @param {object} model - provide the model  value.\n * @param {object} defaultObject - provide the defaultObject  value.\n * @private\n */\n\n/* tslint:disable */\n\n\nfunction getConstructor(model, defaultObject) {\n  var obj = [];\n  var constructor;\n  var parent = new Diagram();\n  var getClassName = 'getClassName';\n\n  if (model[getClassName]) {\n    switch (model[getClassName]()) {\n      case 'Diagram':\n        constructor = new Diagram();\n        break;\n\n      case 'Node':\n        constructor = new Node(parent, '', obj);\n        break;\n\n      case 'Path':\n        constructor = new Path(parent, '', obj);\n        break;\n\n      case 'Native':\n        constructor = new Native(parent, '', obj);\n        break;\n\n      case 'Html':\n        constructor = new Html(parent, '', obj);\n        break;\n\n      case 'Image':\n        constructor = new Image(parent, '', obj);\n        break;\n\n      case 'Text':\n        constructor = new Text(parent, '', obj);\n        break;\n\n      case 'BasicShape':\n        constructor = new BasicShape(parent, '', obj);\n        break;\n\n      case 'FlowShape':\n        constructor = new FlowShape(parent, '', obj);\n        break;\n\n      case 'BpmnShape':\n        constructor = new BpmnShape(parent, '', obj);\n        break;\n\n      case 'UmlActivityShape':\n        constructor = new UmlActivityShape(parent, '', obj);\n        break;\n\n      case 'UmlClassifierShape':\n        constructor = new UmlClassifierShape(parent, '', obj);\n        break;\n\n      case 'SwimLane':\n        constructor = new SwimLane(parent, '', obj);\n\n        if (model.header) {\n          constructor.header = new Header(parent, '', obj);\n          constructor.header.style.fill = '';\n        }\n\n        break;\n\n      case 'ShapeAnnotation':\n        constructor = new ShapeAnnotation(parent, '', obj);\n        break;\n\n      case 'PointPort':\n        constructor = new PointPort(parent, '', obj);\n        break;\n\n      case 'BpmnGateway':\n        constructor = new BpmnGateway(parent, '', obj);\n        break;\n\n      case 'BpmnDataObject':\n        constructor = new BpmnDataObject(parent, '', obj);\n        break;\n\n      case 'BpmnEvent':\n        constructor = new BpmnEvent(parent, '', obj);\n        break;\n\n      case 'BpmnSubEvent':\n        constructor = new BpmnSubEvent(parent, '', obj);\n        break;\n\n      case 'BpmnActivity':\n        constructor = new BpmnActivity(parent, '', obj);\n        break;\n\n      case 'BpmnAnnotation':\n        constructor = new BpmnAnnotation(parent, '', obj);\n        break;\n\n      case 'MethodArguments':\n        constructor = new MethodArguments(parent, '', obj);\n        break;\n\n      case 'UmlClassAttribute':\n        constructor = new UmlClassAttribute(parent, '', obj);\n        break;\n\n      case 'UmlClassMethod':\n        constructor = new UmlClassMethod(parent, '', obj);\n        break;\n\n      case 'UmlClass':\n        constructor = new UmlClass(parent, '', obj);\n        break;\n\n      case 'UmlInterface':\n        constructor = new UmlInterface(parent, '', obj);\n        break;\n\n      case 'UmlEnumerationMember':\n        constructor = new UmlEnumerationMember(parent, '', obj);\n        break;\n\n      case 'UmlEnumeration':\n        constructor = new UmlEnumeration(parent, '', obj);\n        break;\n\n      case 'Lane':\n        constructor = new Lane(parent, '', obj);\n        break;\n\n      case 'Phase':\n        constructor = new Phase(parent, '', obj);\n        break;\n\n      case 'ChildContainer':\n        constructor = new ChildContainer();\n        break;\n\n      case 'Connector':\n        constructor = new Connector(parent, '', obj);\n        break;\n\n      case 'StraightSegment':\n        constructor = new StraightSegment(parent, '', obj);\n        break;\n\n      case 'BezierSegment':\n        constructor = new BezierSegment(parent, '', obj);\n        break;\n\n      case 'OrthogonalSegment':\n        constructor = new OrthogonalSegment(parent, '', obj);\n        break;\n\n      case 'PathAnnotation':\n        constructor = new PathAnnotation(parent, '', obj);\n        break;\n\n      case 'Stop':\n        constructor = new Stop(parent, '', obj);\n        break;\n\n      case 'Point':\n        if (!defaultObject) {\n          constructor = new Point(parent, '', obj);\n        } else {\n          constructor = defaultObject;\n        }\n\n        break;\n\n      case 'UserHandle':\n        constructor = new UserHandle(parent, '', obj);\n        break;\n\n      case 'Command':\n        constructor = new Command(parent, '', obj);\n        break;\n    }\n  } else {\n    constructor = defaultObject;\n  }\n\n  return constructor;\n}\n/* eslint-enable */\n\n/* eslint-disable */\n\n/** @private */\n\n\nexport function deserialize(model, diagram) {\n  diagram.enableServerDataBinding(false);\n  var blazorAction = diagram.blazorActions;\n  diagram.blazorActions = diagram.addConstraints(blazorAction, BlazorAction.ClearObject);\n  diagram.clear();\n  diagram.blazorActions = diagram.removeConstraints(blazorAction, BlazorAction.ClearObject);\n  diagram.protectPropertyChange(true);\n  var map = diagram.dataSourceSettings.doBinding;\n  var nodeTemp = diagram.setNodeTemplate;\n  var getDescription = diagram.getDescription;\n  var getCustomProperty = diagram.getCustomProperty;\n  var commands = {};\n\n  for (var _i = 0, _a = diagram.commandManager.commands; _i < _a.length; _i++) {\n    var command = _a[_i];\n    commands[command.name] = {\n      execute: command.execute,\n      canExecute: command.canExecute\n    };\n  }\n\n  var arrangeTickHorizontal = diagram.rulerSettings.horizontalRuler.arrangeTick;\n  var arrangeTickVertical = diagram.rulerSettings.verticalRuler.arrangeTick;\n  var getLayoutInfo = diagram.layout.getLayoutInfo;\n  var getBranch = diagram.layout.getBranch;\n  var nodeDefaults = diagram.getNodeDefaults;\n  var connectorDefaults = diagram.getConnectorDefaults;\n  var dataObj = JSON.parse(model);\n  dataObj = upgrade(dataObj);\n  diagram.contextMenuSettings = dataObj.contextMenuSettings || {};\n  diagram.constraints = dataObj.constraints || DiagramConstraints.Default;\n  diagram.tool = dataObj.tool || DiagramTools.Default;\n  diagram.bridgeDirection = dataObj.bridgeDirection || 'Top';\n  diagram.pageSettings = dataObj.pageSettings || {};\n  diagram.drawingObject = dataObj.drawingObject || undefined;\n  diagram.tooltip = dataObj.tooltip || {};\n  diagram.addInfo = dataObj.addInfo || undefined;\n  diagram.getDescription = getDescription;\n  diagram.scrollSettings = dataObj.scrollSettings || {};\n  diagram.commandManager = dataObj.commandManager || {};\n  diagram.layers = dataObj.layers || [];\n  diagram.rulerSettings.horizontalRuler.arrangeTick = arrangeTickHorizontal;\n  diagram.rulerSettings.verticalRuler.arrangeTick = arrangeTickVertical;\n\n  for (var _b = 0, _c = diagram.commandManager.commands; _b < _c.length; _b++) {\n    var cmd = _c[_b];\n\n    if (commands[cmd.name]) {\n      cmd.execute = commands[cmd.name].execute;\n      cmd.canExecute = commands[cmd.name].canExecute;\n    }\n  }\n\n  diagram.backgroundColor = dataObj.backgroundColor || 'transparent';\n  diagram.basicElements = dataObj.basicElements || [];\n  diagram.connectors = dataObj.connectors || [];\n  diagram.dataSourceSettings = dataObj.dataSourceSettings || {};\n  diagram.dataSourceSettings.doBinding = map;\n  diagram.height = dataObj.height || '100%';\n  diagram.setNodeTemplate = nodeTemp;\n  diagram.getConnectorDefaults = connectorDefaults;\n  diagram.getNodeDefaults = nodeDefaults;\n  diagram.getCustomProperty = getCustomProperty;\n  diagram.mode = dataObj.mode || 'SVG';\n\n  if (dataObj.nodes) {\n    for (var i = 0; i < dataObj.nodes.length; i++) {\n      if (dataObj.nodes[i].shape && dataObj.nodes[i].shape.type === 'SwimLane') {\n        if (dataObj.nodes[i].wrapper == null) {\n          {\n            dataObj.nodes[i].wrapper = {\n              actualSize: {\n                width: dataObj.nodes[i].width,\n                height: dataObj.nodes[i].height\n              },\n              offsetX: dataObj.nodes[i].offsetX,\n              offsetY: dataObj.nodes[i].offsetY\n            };\n          }\n        }\n\n        pasteSwimLane(dataObj.nodes[i], undefined, undefined, undefined, undefined, true);\n      }\n    }\n  }\n\n  diagram.nodes = dataObj.nodes || [];\n  diagram.rulerSettings = dataObj.rulerSettings || {};\n  diagram.snapSettings = dataObj.snapSettings || {};\n  diagram.width = dataObj.width || '100%';\n  diagram.layout = dataObj.layout || {};\n\n  if (dataObj.layout && dataObj.layout.type !== \"None\") {\n    diagram.canLayout = false;\n  }\n\n  diagram.layout.getLayoutInfo = getFunction(getLayoutInfo);\n  diagram.layout.getBranch = getFunction(getBranch);\n  diagram.diagramActions = 0;\n  diagram.isLoading = true;\n  diagram.protectPropertyChange(false);\n  var key = 'refresh';\n  var component;\n\n  for (var i = 0; i < diagram.views.length; i++) {\n    component = diagram.views[diagram.views[i]];\n    diagram.blazorActions = diagram.addConstraints(blazorAction, BlazorAction.ClearObject);\n    component.refresh();\n    diagram.blazorActions = diagram.removeConstraints(blazorAction, BlazorAction.ClearObject);\n\n    if (component instanceof Diagram) {\n      diagram.element.classList.add('e-diagram');\n    }\n  }\n\n  if (dataObj.selectedItems) {\n    dataObj.selectedItems.nodes = [];\n    dataObj.selectedItems.connectors = [];\n  }\n\n  diagram.selectedItems = dataObj.selectedItems;\n  diagram.enableServerDataBinding(true);\n  diagram.canLayout = true;\n  diagram.swimlaneChildTable = {};\n  diagram.swimlaneZIndexTable = {};\n  return dataObj;\n}\n/* eslint-enable */\n\n/**\n * upgrade method \\\n *\n * @returns {Diagram } upgrade method .\\\n * @param {Diagram} dataObj - provide the model  value.\n * @private\n */\n\nexport function upgrade(dataObj) {\n  if (dataObj && (dataObj.version === undefined || dataObj.version < 17.1) && dataObj.nodes) {\n    var nodes = dataObj.nodes;\n\n    for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n      var node = nodes_1[_i];\n\n      if (node && node.ports && node.ports.length > 0) {\n        for (var _a = 0, _b = node.ports; _a < _b.length; _a++) {\n          var port = _b[_a];\n\n          if (port && port.constraints && port.constraints === PortConstraints.None) {\n            port.constraints = PortConstraints.Default;\n          }\n        }\n      }\n    }\n  }\n\n  return dataObj;\n}\n/**\n * updateStyle method \\\n *\n * @returns {void } updateStyle method .\\\n * @param {TextStyleModel} changedObject - provide the changedObject  value.\n * @param {DiagramElement} target - provide the target  value.\n * @private\n */\n\nexport function updateStyle(changedObject, target) {\n  //since text style model is the super set of shape style model, we used text style model\n  var style = target.style;\n  var textElement = target;\n  target.canApplyStyle = true;\n\n  for (var _i = 0, _a = Object.keys(changedObject); _i < _a.length; _i++) {\n    var key = _a[_i];\n\n    switch (key) {\n      case 'fill':\n        style.fill = changedObject.fill;\n\n        if (style instanceof StrokeStyle) {\n          /* tslint:disable:no-string-literal */\n          style['fill'] = 'transparent';\n        }\n\n        break;\n\n      case 'textOverflow':\n        style.textOverflow = changedObject.textOverflow;\n        break;\n\n      case 'opacity':\n        style.opacity = changedObject.opacity;\n        break;\n\n      case 'strokeColor':\n        style.strokeColor = changedObject.strokeColor;\n        break;\n\n      case 'strokeDashArray':\n        style.strokeDashArray = changedObject.strokeDashArray;\n        break;\n\n      case 'strokeWidth':\n        style.strokeWidth = changedObject.strokeWidth;\n        break;\n\n      case 'bold':\n        style.bold = changedObject.bold;\n        break;\n\n      case 'color':\n        style.color = changedObject.color;\n        break;\n\n      case 'textWrapping':\n        style.textWrapping = changedObject.textWrapping;\n        break;\n\n      case 'fontFamily':\n        style.fontFamily = changedObject.fontFamily;\n        break;\n\n      case 'fontSize':\n        style.fontSize = changedObject.fontSize;\n        break;\n\n      case 'italic':\n        style.italic = changedObject.italic;\n        break;\n\n      case 'textAlign':\n        style.textAlign = changedObject.textAlign;\n        break;\n\n      case 'whiteSpace':\n        style.whiteSpace = changedObject.whiteSpace;\n        break;\n\n      case 'textDecoration':\n        style.textDecoration = changedObject.textDecoration;\n        break;\n\n      case 'gradient':\n        if (style.gradient) {\n          updateGradient(changedObject.gradient, style.gradient);\n          break;\n        }\n\n    }\n  }\n\n  if (target instanceof TextElement) {\n    textElement.refreshTextElement();\n  }\n}\n/**\n * updateGradient method \\\n *\n * @returns {void } updateGradient method .\\\n * @param {GradientModel | LinearGradientModel | RadialGradientModel} changedGradient - provide the changedGradient  value.\n * @param {GradientModel | LinearGradientModel | RadialGradientModel} targetGradient - provide the targetGradient  value.\n * @private\n */\n\nfunction updateGradient(changedGradient, targetGradient) {\n  for (var _i = 0, _a = Object.keys(changedGradient); _i < _a.length; _i++) {\n    var key = _a[_i];\n\n    switch (key) {\n      case 'type':\n        targetGradient.type = changedGradient.type;\n        break;\n\n      case 'x1':\n        targetGradient.x1 = changedGradient.x1;\n        break;\n\n      case 'x2':\n        targetGradient.x2 = changedGradient.x2;\n        break;\n\n      case 'y1':\n        targetGradient.y1 = changedGradient.y1;\n        break;\n\n      case 'y2':\n        targetGradient.y2 = changedGradient.y2;\n        break;\n\n      case 'cx':\n        targetGradient.cx = changedGradient.cx;\n        break;\n\n      case 'cy':\n        targetGradient.cy = changedGradient.cy;\n        break;\n\n      case 'fx':\n        targetGradient.fx = changedGradient.fx;\n        break;\n\n      case 'fy':\n        targetGradient.fy = changedGradient.fy;\n        break;\n\n      case 'r':\n        targetGradient.r = changedGradient.r;\n        break;\n\n      case 'stops':\n        targetGradient.stops = changedGradient.stops;\n        break;\n    }\n  }\n}\n/* eslint-disable */\n\n/**\n * updateHyperlink method \\\n *\n * @returns {void } updateHyperlink method .\\\n * @param {HyperlinkModel} changedObject - provide the changedObject  value.\n * @param {DiagramElement} target - provide the target  value.\n * @param {AnnotationModel} actualAnnotation - provide the actualAnnotation  value.\n * @private\n */\n\n\nexport function updateHyperlink(changedObject, target, actualAnnotation) {\n  var textElement = target;\n  var hyperlink = textElement.hyperlink;\n\n  for (var _i = 0, _a = Object.keys(changedObject); _i < _a.length; _i++) {\n    var key = _a[_i];\n\n    switch (key) {\n      case 'color':\n        textElement.style.color = hyperlink.color = changedObject.color;\n        break;\n\n      case 'content':\n        textElement.content = hyperlink.content = changedObject.content || hyperlink.link;\n        break;\n\n      case 'link':\n        var labelStyle = actualAnnotation.style;\n        textElement.style.color = changedObject.link ? hyperlink.color : labelStyle.color;\n        textElement.style.textDecoration = changedObject.link ? hyperlink.textDecoration : actualAnnotation.style.textDecoration;\n        textElement.content = changedObject.link ? hyperlink.content || changedObject.link : actualAnnotation.content;\n        hyperlink.link = changedObject.link;\n        break;\n\n      case 'textDecoration':\n        textElement.style.textDecoration = hyperlink.textDecoration = changedObject.textDecoration;\n        break;\n    }\n  }\n}\n/* eslint-enable */\n\n/**\n * updateShapeContent method \\\n *\n * @returns {void } updateShapeContent method .\\\n * @param {DiagramElement} content - provide the content  value.\n * @param {Node} actualObject - provide the actualObject  value.\n * @param {Diagram} diagram - provide the diagram  value.\n * @private\n */\n\nexport function updateShapeContent(content, actualObject, diagram) {\n  content.width = actualObject.width;\n  content.height = actualObject.height;\n  content.minHeight = actualObject.minHeight;\n  content.maxHeight = actualObject.maxHeight;\n  content.minWidth = actualObject.minWidth;\n  content.maxWidth = actualObject.maxWidth;\n  content.horizontalAlignment = actualObject.wrapper.children[0].horizontalAlignment;\n  content.verticalAlignment = actualObject.wrapper.children[0].verticalAlignment;\n  content.relativeMode = actualObject.wrapper.children[0].relativeMode;\n  content.visible = actualObject.wrapper.children[0].visible;\n\n  if (actualObject.shape instanceof Text) {\n    content.margin = actualObject.shape.margin;\n  }\n\n  content.id = actualObject.wrapper.children[0].id;\n  content.style = actualObject.style; //let view: View;\n\n  for (var _i = 0, _a = diagram.views; _i < _a.length; _i++) {\n    var elementId = _a[_i];\n    removeElement(actualObject.id + '_groupElement', elementId);\n    removeElement(actualObject.id + '_content_groupElement', elementId);\n    removeElement(actualObject.id + '_html_element', elementId);\n  }\n\n  actualObject.wrapper.children.splice(0, 1);\n  actualObject.wrapper.children.splice(0, 0, content);\n}\n/* eslint-disable */\n\n/**\n * updateShape method \\\n *\n * @returns {void } updateShape method .\\\n * @param {Node} node - provide the node  value.\n * @param {Node} actualObject - provide the actualObject  value.\n * @param {Node} oldObject - provide the oldObject  value.\n * @param {Diagram} diagram - provide the diagram  value.\n * @private\n */\n\nexport function updateShape(node, actualObject, oldObject, diagram) {\n  var content = new DiagramElement();\n  var i; //let textStyle: TextStyleModel; let nodeStyle: TextStyleModel;\n\n  switch (node.shape.type) {\n    case 'Path':\n      var pathContent = new PathElement();\n      pathContent.data = actualObject.shape.data;\n      content = pathContent;\n      updateShapeContent(content, actualObject, diagram);\n      break;\n\n    case 'Image':\n      var imageContent = new ImageElement();\n      imageContent.source = actualObject.shape.source;\n      imageContent.imageAlign = actualObject.shape.align;\n      imageContent.imageScale = actualObject.shape.scale;\n      content = imageContent;\n      updateShapeContent(content, actualObject, diagram);\n      break;\n\n    case 'Text':\n      //issue\n      var textContent = new TextElement(); //  (textContent as TextElement).content = (node.shape as TextModel).content;\n\n      content = textContent;\n      updateShapeContent(content, actualObject, diagram);\n      break;\n\n    case 'Basic':\n      var element = (isBlazor() ? actualObject.shape.basicShape === 'Rectangle' : actualObject.shape.shape === 'Rectangle') ? new DiagramElement() : new PathElement();\n\n      if (!isBlazor() && actualObject.shape.shape === 'Polygon' || isBlazor() && actualObject.shape.basicShape === 'Polygon') {\n        element.data = getPolygonPath(actualObject.shape.points);\n      } else {\n        element.data = getBasicShape(isBlazor() ? actualObject.shape.basicShape : actualObject.shape.shape);\n      }\n\n      updateShapeContent(content, actualObject, diagram);\n\n      if (!isBlazor() && actualObject.shape.shape === 'Rectangle' || isBlazor() && actualObject.shape.basicShape === 'Rectangle') {\n        element.cornerRadius = actualObject.shape.cornerRadius;\n      }\n\n      content = element;\n      break;\n\n    case 'Flow':\n      /* eslint-disable */\n      var flowShapeElement = new PathElement();\n      var shape = isBlazor() ? actualObject.shape.flowShape : actualObject.shape.shape;\n      flowShapeElement.data = getFlowShape(shape);\n      content = flowShapeElement;\n      updateShapeContent(content, actualObject, diagram);\n      break;\n\n    case 'Native':\n      var nativeContent = new DiagramNativeElement(node.id, diagram.element.id);\n      nativeContent.content = actualObject.shape.content;\n      nativeContent.scale = actualObject.shape.scale;\n      content = nativeContent;\n      updateShapeContent(content, actualObject, diagram);\n      break;\n\n    case 'HTML':\n      var htmlContent = new DiagramHtmlElement(actualObject.id, diagram.element.id);\n      htmlContent.content = actualObject.shape.content;\n      content = htmlContent;\n      updateShapeContent(content, actualObject, diagram);\n  }\n\n  if (node.shape.type === undefined || node.shape.type === oldObject.shape.type || isBlazor() && node.shape.type === 'UmlActivity') {\n    updateContent(node, actualObject, diagram, oldObject);\n  } else {\n    content.width = actualObject.wrapper.children[0].width;\n    content.height = actualObject.wrapper.children[0].height;\n\n    if (actualObject.shape instanceof Text) {\n      content.margin = actualObject.shape.margin;\n    }\n\n    content.style = actualObject.style;\n    actualObject.wrapper.children[0] = content;\n  }\n}\n/* eslint-enable */\n\n/**\n * updateContent method \\\n *\n * @returns {void } updateContent method .\\\n * @param {Node} newValues - provide the newValues  value.\n * @param {Node} actualObject - provide the actualObject  value.\n * @param {Diagram} diagram - provide the diagram  value.\n * @param {Node} oldObject - provide the oldObject  value.\n * @private\n */\n\nexport function updateContent(newValues, actualObject, diagram, oldObject) {\n  if (Object.keys(newValues.shape).length > 0) {\n    if (actualObject.shape.type === 'Path' && newValues.shape.data !== undefined) {\n      actualObject.wrapper.children[0].data = newValues.shape.data;\n    } else if (actualObject.shape.type === 'Text' && newValues.shape.content !== undefined) {\n      actualObject.wrapper.children[0].content = newValues.shape.content;\n    } else if (actualObject.shape.type === 'Image' && newValues.shape.source !== undefined) {\n      actualObject.wrapper.children[0].source = newValues.shape.source;\n    } else if (actualObject.shape.type === 'Native') {\n      var nativeElement = void 0;\n\n      for (var i = 0; i < diagram.views.length; i++) {\n        nativeElement = getDiagramElement(actualObject.wrapper.children[0].id + '_native_element', diagram.views[i]);\n\n        if (newValues.shape.content !== undefined && nativeElement) {\n          nativeElement.removeChild(nativeElement.children[0]);\n          actualObject.wrapper.children[0].content = newValues.shape.content;\n          nativeElement.appendChild(getContent(actualObject.wrapper.children[0], false));\n        }\n      }\n\n      actualObject.wrapper.children[0].scale = newValues.shape.scale ? newValues.shape.scale : actualObject.wrapper.children[0].scale;\n    } else if (actualObject.shape.type === 'HTML') {\n      var htmlElement = void 0;\n\n      for (var i = 0; i < diagram.views.length; i++) {\n        htmlElement = getDiagramElement(actualObject.wrapper.children[0].id + '_html_element', diagram.views[i]);\n\n        if (htmlElement) {\n          htmlElement.removeChild(htmlElement.children[0]);\n          actualObject.wrapper.children[0].content = newValues.shape.content;\n          htmlElement.appendChild(getContent(actualObject.wrapper.children[0], true));\n        }\n      }\n    } else if (actualObject.shape.type === 'Flow' && (isBlazor() && newValues.shape.flowShape !== undefined || newValues.shape.shape !== undefined)) {\n      actualObject.shape.shape = isBlazor() ? newValues.shape.flowShape : newValues.shape.shape;\n      var shapes = actualObject.shape.shape;\n      var flowshapedata = getFlowShape(shapes.toString());\n      actualObject.wrapper.children[0].data = flowshapedata;\n    } else if (actualObject.shape.type === 'UmlActivity' && (isBlazor() && newValues.shape.umlActivityShape !== undefined || !isBlazor() && newValues.shape.shape !== undefined)) {\n      updateUmlActivityNode(actualObject, newValues);\n    } else if (newValues.shape.cornerRadius !== undefined) {\n      actualObject.wrapper.children[0].cornerRadius = newValues.shape.cornerRadius;\n    } else if (actualObject.shape.type === 'Basic' && oldObject && oldObject.shape.shape === 'Rectangle') {\n      var basicshape = new PathElement();\n      var basicshapedata = getBasicShape(isBlazor() ? actualObject.shape.basicShape : actualObject.shape.shape);\n      basicshape.data = basicshapedata;\n      var content = basicshape;\n      updateShapeContent(content, actualObject, diagram);\n    } else if (isBlazor() && newValues.shape.basicShape !== undefined || newValues.shape.shape !== undefined) {\n      actualObject.shape.shape = isBlazor() ? newValues.shape.basicShape : newValues.shape.shape;\n      var shapes = actualObject.shape.shape;\n      var basicShapeData = getBasicShape(shapes.toString());\n      actualObject.wrapper.children[0].data = basicShapeData;\n    }\n  }\n\n  actualObject.wrapper.children[0].canMeasurePath = true;\n}\n/**\n * updateUmlActivityNode method \\\n *\n * @returns {void } updateUmlActivityNode method .\\\n * @param {Node} actualObject - provide the newValues  value.\n * @param {Node} newValues - provide the actualObject  value.\n * @private\n */\n\nexport function updateUmlActivityNode(actualObject, newValues) {\n  if (!isBlazor()) {\n    actualObject.shape.shape = newValues.shape.shape;\n  } else {\n    actualObject.shape.umlActivityShape = newValues.shape.umlActivityShape;\n  }\n\n  var shapes = !isBlazor() ? actualObject.shape.shape : actualObject.shape.umlActivityShape;\n  var umlActivityShapeData = getUMLActivityShape(shapes.toString());\n\n  if (isBlazor() && actualObject.shape.umlActivityShape === 'InitialNode' || !isBlazor() && actualObject.shape.shape === 'InitialNode') {\n    actualObject.wrapper.children[0].style.fill = 'black';\n  } else if (!isBlazor() && (actualObject.shape.shape === 'ForkNode' || actualObject.shape.shape === 'JoinNode') || isBlazor() && (actualObject.shape.umlActivityShape === 'ForkNode' || actualObject.shape.umlActivityShape === 'JoinNode')) {\n    actualObject.wrapper.children[0].style.fill = 'black';\n  } else if (!isBlazor() && actualObject.shape.shape === 'FinalNode' || isBlazor() && actualObject.shape.umlActivityShape === 'FinalNode') {\n    if (actualObject instanceof Node) {\n      actualObject.wrapper = getUMLFinalNode(actualObject);\n    }\n  }\n\n  if (umlActivityShapeData) {\n    actualObject.wrapper.children[0].data = umlActivityShapeData;\n  }\n}\n/**\n * getUMLFinalNode method \\\n *\n * @returns {Canvas } getUMLFinalNode method .\\\n * @param {Node} node - provide the newValues  value.\n * @private\n */\n\nexport function getUMLFinalNode(node) {\n  var finalNodeShape = new Canvas();\n  finalNodeShape.style.fill = 'transparent'; //childNode0\n\n  var pathData = 'M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25' + ' C 50 38.79 38.78 50 25 50';\n  var innerFinalNode = new PathElement();\n  innerFinalNode.data = pathData;\n  innerFinalNode.id = node.id + '_0_finalNode';\n  innerFinalNode.horizontalAlignment = 'Center';\n  innerFinalNode.verticalAlignment = 'Center';\n  innerFinalNode.relativeMode = 'Object';\n  innerFinalNode.style.strokeColor = node.style.strokeColor;\n  innerFinalNode.style.strokeWidth = node.style.strokeWidth; //childNode1\n\n  var outerFinalNode = new PathElement();\n  outerFinalNode.data = pathData;\n  outerFinalNode.id = node.id + '_1_finalNode';\n  outerFinalNode.horizontalAlignment = 'Center';\n  outerFinalNode.verticalAlignment = 'Center';\n  outerFinalNode.relativeMode = 'Object';\n  outerFinalNode.style.fill = node.style.fill;\n  outerFinalNode.style.strokeColor = node.style.strokeColor;\n  outerFinalNode.style.strokeWidth = node.style.strokeWidth; //append child and set style\n\n  finalNodeShape.children = [innerFinalNode, outerFinalNode];\n  finalNodeShape.children[0].width = node.width;\n  finalNodeShape.children[0].height = node.height;\n  finalNodeShape.children[1].height = node.height / 1.5;\n  finalNodeShape.children[1].width = node.width / 1.5;\n  finalNodeShape.style.strokeWidth = 0;\n  finalNodeShape.style.strokeColor = 'transparent';\n  return finalNodeShape;\n}\n/**\n * getUMLActivityShapes method \\\n *\n * @returns {DiagramElement } getUMLActivityShapes method .\\\n * @param {PathElement} umlActivityShape - provide the umlActivityShape  value.\n * @param {DiagramElement} content - provide the content  value.\n * @param {Node} node - provide the node  value.\n * @private\n */\n\nexport function getUMLActivityShapes(umlActivityShape, content, node) {\n  var shape = isBlazor() ? node.shape.umlActivityShape : node.shape.shape;\n  var umlActivityShapeData = getUMLActivityShape(shape);\n  umlActivityShape.data = umlActivityShapeData;\n  content = umlActivityShape;\n\n  switch (shape) {\n    case 'StructuredNode':\n      if (node.annotations) {\n        for (var i = 0; i < node.annotations.length; i++) {\n          node.annotations[i].content = '<<' + node.annotations[i].content + '>>';\n        }\n      }\n\n      content = umlActivityShape;\n      break;\n\n    case 'FinalNode':\n      content = getUMLFinalNode(node);\n      break;\n  }\n\n  return content;\n}\n/**\n * removeGradient method \\\n *\n * @returns {void } removeGradient method .\\\n * @param {string} svgId - provide the umlActivityShape  value.\n * @private\n */\n\nexport function removeGradient(svgId) {\n  removeElement(svgId + '_linear');\n  removeElement(svgId + '_radial');\n}\n/**\n * removeItem method \\\n *\n * @returns {void } removeItem method .\\\n * @param {string[]} array - provide the umlActivityShape  value.\n * @param {string} item - provide the umlActivityShape  value.\n * @private\n */\n\nexport function removeItem(array, item) {\n  var index = array.indexOf(item);\n\n  if (index >= 0) {\n    array.splice(index, 1);\n  }\n}\n/**\n * updateConnector method \\\n *\n * @returns {void } updateConnector method .\\\n * @param {Connector} connector - provide the connector  value.\n * @param {PointModel[]} points - provide the points  value.\n * @param {DiagramAction} diagramActions - provide the diagramActions  value.\n * @private\n */\n\nexport function updateConnector(connector, points, diagramActions) {\n  var anglePoint; //let srcDecorator: DecoratorModel;\n  //let targetPoint: PointModel;\n\n  connector.intermediatePoints = points;\n  connector.updateSegmentElement(connector, points, connector.wrapper.children[0], diagramActions);\n  var srcDecorator = connector.sourceDecorator;\n\n  if (connector.type === 'Bezier') {\n    var firstSegment = connector.segments[0];\n    var lastSegment = connector.segments[connector.segments.length - 1];\n    anglePoint = [!Point.isEmptyPoint(lastSegment.point2) ? lastSegment.point2 : lastSegment.bezierPoint2, !Point.isEmptyPoint(firstSegment.point1) ? firstSegment.point1 : firstSegment.bezierPoint1];\n  } else {\n    anglePoint = connector.intermediatePoints;\n  }\n\n  points = connector.clipDecorators(connector, points, diagramActions);\n  var element = connector.wrapper.children[0];\n  element.canMeasurePath = true;\n  element = connector.wrapper.children[1];\n  connector.updateDecoratorElement(element, points[0], anglePoint[1], srcDecorator); //const targetPoint: PointModel = connector.targetPoint;\n\n  var tarDecorator = connector.targetDecorator;\n  element = connector.wrapper.children[2];\n  connector.updateDecoratorElement(element, points[points.length - 1], anglePoint[anglePoint.length - 2], tarDecorator);\n  connector.updateShapeElement(connector);\n}\n/**\n * getUserHandlePosition method \\\n *\n * @returns {PointModel } getUserHandlePosition method .\\\n * @param {SelectorModel} selectorItem - provide the connector  value.\n * @param {UserHandleModel} handle - provide the handle  value.\n * @param {Transforms} transform - provide the transform  value.\n * @private\n */\n\nexport function getUserHandlePosition(selectorItem, handle, transform) {\n  var wrapper = selectorItem.wrapper; //let positionPoints: PointModel;\n\n  var bounds = wrapper.bounds;\n  var offset = handle.offset;\n  var size = handle.size / transform.scale;\n  var margin = handle.margin;\n  var point;\n  var left = wrapper.offsetX - wrapper.actualSize.width * wrapper.pivot.x;\n  var top = wrapper.offsetY - wrapper.actualSize.height * wrapper.pivot.y;\n  point = {\n    x: 0,\n    y: 0\n  };\n\n  if (selectorItem.nodes.length > 0) {\n    switch (handle.side) {\n      case 'Top':\n        point.x += left + bounds.width * offset;\n        point.y += top - (size / 2 + 12.5);\n        break;\n\n      case 'Bottom':\n        point.x += left + offset * bounds.width;\n        point.y += top + wrapper.actualSize.height + (size / 2 + 12.5);\n        break;\n\n      case 'Left':\n        point.x += left - (size / 2 + 12.5);\n        point.y += top + offset * bounds.height;\n        break;\n\n      case 'Right':\n        point.x += left + wrapper.actualSize.width + (size / 2 + 12.5);\n        point.y += top + offset * bounds.height;\n        break;\n    }\n\n    point.x += (margin.left - margin.right) / transform.scale + size / 2 * (handle.horizontalAlignment === 'Center' ? 0 : handle.horizontalAlignment === 'Right' ? -1 : 1);\n    point.y += (margin.top - margin.bottom) / transform.scale + size / 2 * (handle.verticalAlignment === 'Center' ? 0 : handle.verticalAlignment === 'Top' ? -1 : 1);\n  } else if (selectorItem.connectors.length > 0) {\n    var connector = selectorItem.connectors[0];\n    var annotation = {\n      offset: offset\n    };\n    var connectorOffset = getOffsetOfConnector(connector.intermediatePoints, annotation);\n    var index = connectorOffset.index;\n    point = connectorOffset.point;\n    var getPointloop = getAnnotationPosition(connector.intermediatePoints, annotation, bounds); //const points: PointModel[] = connector.intermediatePoints;\n    //const offsetLength: number;\n\n    var angle = getPointloop.angle;\n    var matrix = identityMatrix();\n    rotateMatrix(matrix, -angle, connector.intermediatePoints[index].x, connector.intermediatePoints[index].y);\n    point = transformPointByMatrix(matrix, point);\n    point.x += margin.left - margin.right + size / 2 * (handle.horizontalAlignment === 'Center' ? 0 : handle.horizontalAlignment === 'Right' ? -1 : 1);\n    point.y += margin.top - margin.bottom + size / 2 * (handle.verticalAlignment === 'Center' ? 0 : handle.verticalAlignment === 'Top' ? -1 : 1);\n    matrix = identityMatrix();\n    rotateMatrix(matrix, angle, connector.intermediatePoints[index].x, connector.intermediatePoints[index].y);\n    point = transformPointByMatrix(matrix, point);\n  }\n\n  if (wrapper.rotateAngle !== 0 || wrapper.parentTransform !== 0) {\n    var matrix = identityMatrix();\n    rotateMatrix(matrix, wrapper.rotateAngle + wrapper.parentTransform, wrapper.offsetX, wrapper.offsetY);\n    point = transformPointByMatrix(matrix, point);\n  }\n\n  return point;\n}\n/**\n * canResizeCorner method \\\n *\n * @returns {SelectorConstraints } canResizeCorner method .\\\n * @param {string} selectorConstraints - provide the selectorConstraints  value.\n * @param {string} action - provide the selectorConstraints  value.\n * @param {ThumbsConstraints} thumbsConstraints - provide the thumbsConstraints  value.\n * @param {Selector} selectedItems - provide the selectedItems  value.\n * @private\n */\n\nexport function canResizeCorner(selectorConstraints, action, thumbsConstraints, selectedItems) {\n  if (selectedItems.annotation) {\n    if (canResize(selectedItems.annotation)) {\n      return true;\n    }\n  } else if (SelectorConstraints[action] & selectorConstraints && ThumbsConstraints[action] & thumbsConstraints) {\n    return true;\n  }\n\n  return false;\n}\n/**\n * canShowCorner method \\\n *\n * @returns {boolean } canShowCorner method .\\\n * @param {SelectorConstraints} selectorConstraints - provide the selectorConstraints  value.\n * @param {string} action - provide the thumbsConstraints  value.\n * @private\n */\n\nexport function canShowCorner(selectorConstraints, action) {\n  if (SelectorConstraints[action] & selectorConstraints) {\n    return true;\n  }\n\n  return false;\n}\n/**\n * checkPortRestriction method \\\n *\n * @returns {number } checkPortRestriction method .\\\n * @param {PointPortModel} port - provide the port  value.\n * @param {PortVisibility} portVisibility - provide the portVisibility  value.\n * @private\n */\n\nexport function checkPortRestriction(port, portVisibility) {\n  return port.visibility & portVisibility;\n}\n/**\n * findAnnotation method \\\n *\n * @returns {ShapeAnnotationModel | PathAnnotationModel | TextModel } findAnnotation method .\\\n * @param { NodeModel | ConnectorModel} node - provide the port  value.\n * @param {string} id - provide the portVisibility  value.\n * @private\n */\n\nexport function findAnnotation(node, id) {\n  var annotation;\n\n  if (node.shape.type === 'Text') {\n    annotation = node.shape;\n  } else {\n    var annotationId = id.split('_');\n    id = annotationId[annotationId.length - 1];\n\n    for (var i = 0; i < node.annotations.length; i++) {\n      if (id === node.annotations[i].id) {\n        annotation = node.annotations[i];\n      }\n    }\n  }\n\n  return annotation;\n}\n/**\n * findPort method \\\n *\n * @returns {PointPortModel} findPort method .\\\n * @param { NodeModel | ConnectorModel} node - provide the port  value.\n * @param {string} id - provide the portVisibility  value.\n * @private\n */\n\nexport function findPort(node, id) {\n  var port;\n  var portId = id.split('_');\n  id = portId[portId.length - 1];\n\n  if (node) {\n    node = node;\n\n    for (var i = 0; i < node.ports.length; i++) {\n      if (id === node.ports[i].id) {\n        return node.ports[i];\n      }\n    }\n  }\n\n  return port;\n}\n/**\n * getInOutConnectPorts method \\\n *\n * @returns {PointPortModel} getInOutConnectPorts method .\\\n * @param { NodeModel} node - provide the port  value.\n * @param {boolean} isInConnect - provide the portVisibility  value.\n * @private\n */\n\nexport function getInOutConnectPorts(node, isInConnect) {\n  var port = {};\n  var i = 0;\n\n  if (node.ports) {\n    var ports = node.ports;\n\n    for (i = 0; i < ports.length; i++) {\n      if (isInConnect) {\n        if (ports[i].constraints & PortConstraints.InConnect) {\n          port = ports[i];\n        }\n      } else {\n        if (ports[i].constraints & PortConstraints.OutConnect) {\n          port = ports[i];\n        }\n      }\n    }\n  }\n\n  return port;\n}\n/**\n * findObjectIndex method \\\n *\n * @returns {PointPortModel} findObjectIndex method .\\\n * @param { NodeModel | ConnectorModel} node - provide the node  value.\n * @param {string} id - provide the string  value.\n * @param {boolean} annotation - provide the boolean  value.\n * @private\n */\n\nexport function findObjectIndex(node, id, annotation) {\n  //let index: number;\n  var collection = annotation ? node.annotations : node.ports;\n\n  for (var i = 0; i < collection.length; i++) {\n    if (collection[i].id === id) {\n      return i.toString();\n    }\n  }\n\n  return '-1';\n}\n/**\n * getObjectFromCollection method \\\n *\n * @returns {boolean} getObjectFromCollection method .\\\n * @param { (NodeModel | ConnectorModel)[] } obj - provide the node  value.\n * @param {string} id - provide the string  value.\n * @private\n */\n\nexport function getObjectFromCollection(obj, id) {\n  var i;\n\n  for (i = 0; i < obj.length; i++) {\n    if (id === obj[i].id) {\n      return true;\n    }\n  }\n\n  return false;\n}\n/**\n * scaleElement method \\\n *\n * @returns {void} scaleElement method .\\\n * @param { DiagramElement } element - provide the element  value.\n * @param {number} sw - provide the string  value.\n * @param {number} sh - provide the string  value.\n * @param {DiagramElement} refObject - provide the refObject  value.\n * @private\n */\n\nexport function scaleElement(element, sw, sh, refObject) {\n  if (element.width !== undefined && element.height !== undefined) {\n    element.width *= sw;\n    element.height *= sh;\n  }\n\n  if (element instanceof Container) {\n    var matrix = identityMatrix();\n    var width = refObject.width || refObject.actualSize.width;\n    var height = refObject.height || refObject.actualSize.height;\n\n    if (width !== undefined && height !== undefined) {\n      var x = refObject.offsetX - width * refObject.pivot.x;\n      var y = refObject.offsetY - height * refObject.pivot.y;\n      var refPoint = {\n        x: x + width * refObject.pivot.x,\n        y: y + height * refObject.pivot.y\n      };\n      refPoint = rotatePoint(refObject.rotateAngle, refObject.offsetX, refObject.offsetY, refPoint);\n      rotateMatrix(matrix, -refObject.rotateAngle, refPoint.x, refPoint.y);\n      scaleMatrix(matrix, sw, sh, refPoint.x, refPoint.y);\n      rotateMatrix(matrix, refObject.rotateAngle, refPoint.x, refPoint.y);\n\n      for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n        var child = _a[_i];\n\n        if (child.width !== undefined && child.height !== undefined) {\n          var newPosition = transformPointByMatrix(matrix, {\n            x: child.offsetX,\n            y: child.offsetY\n          });\n          child.offsetX = newPosition.x;\n          child.offsetY = newPosition.y;\n          scaleElement(child, sw, sh, refObject);\n        }\n      }\n    }\n  }\n}\n/**\n * scaleElement method \\\n *\n * @returns {void} scaleElement method .\\\n * @param { Node } obj - provide the obj  value.\n * @param {number} x - provide the x  value.\n * @param {number} y - provide the y  value.\n * @param {DiagramElement} nameTable - provide the refObject  value.\n * @param {DiagramElement} drop - provide the drop  value.\n * @param {DiagramElement} diagram - provide the diagram  value.\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\n\nexport function arrangeChild(obj, x, y, nameTable, drop, diagram) {\n  var child = obj.children;\n  var node;\n\n  for (var i = 0; i < child.length; i++) {\n    node = nameTable[child[i]];\n\n    if (node) {\n      if (node.children) {\n        arrangeChild(node, x, y, nameTable, drop, diagram);\n      } else {\n        node.offsetX -= x;\n        node.offsetY -= y;\n\n        if (!drop) {\n          //let content: DiagramElement;\n          //let container: Container;\n          nameTable[node.id] = node;\n          var container = node.initContainer();\n\n          if (!container.children) {\n            container.children = [];\n          }\n\n          var content = node.init(diagram);\n          container.children.push(content);\n          container.measure(new Size(node.width, node.height));\n          container.arrange(container.desiredSize);\n        }\n      }\n    }\n  }\n}\n/**\n * insertObject method \\\n *\n * @returns {void} insertObject method .\\\n * @param { NodeModel | ConnectorModel } obj - provide the obj  value.\n * @param { string } key - provide the obj  value.\n * @param { Object[]} collection - provide the x  value.\n * @private\n */\n\nexport function insertObject(obj, key, collection) {\n  if (collection.length === 0) {\n    collection.push(obj);\n  } else if (collection.length === 1) {\n    if (collection[0][key] > obj[key]) {\n      collection.splice(0, 0, obj);\n    } else {\n      collection.push(obj);\n    }\n  } else if (collection.length > 1) {\n    var low = 0;\n    var high = collection.length - 1;\n    var mid = Math.floor((low + high) / 2);\n\n    while (mid !== low) {\n      if (collection[mid][key] < obj[key]) {\n        low = mid;\n        mid = Math.floor((low + high) / 2);\n      } else if (collection[mid][key] > obj[key]) {\n        high = mid;\n        mid = Math.floor((low + high) / 2);\n      } else {\n        break;\n      }\n    }\n\n    if (collection[high][key] < obj[key]) {\n      collection.push(obj);\n    } else if (collection[low][key] > obj[key]) {\n      collection.splice(low, 0, obj);\n    } else if (collection[low][key] < obj[key] && collection[high][key] > obj[key]) {\n      collection.splice(high, 0, obj);\n    }\n  }\n}\n/**\n * getElement method \\\n *\n * @returns {Object} getElement method .\\\n * @param { DiagramHtmlElement | DiagramNativeElement } element - provide the obj  value.\n * @private\n */\n\nexport function getElement(element) {\n  var diagramElement = document.getElementById(element.diagramId);\n  var instance = 'ej2_instances'; // eslint-disable-next-line\n\n  var node = {};\n  var nodes = diagramElement[instance][0].nodes;\n\n  if (nodes === undefined) {\n    nodes = getPaletteSymbols(diagramElement[instance][0]);\n  }\n\n  var length = 'length';\n\n  for (var i = 0; nodes && i < nodes[length]; i++) {\n    if (nodes[i].id === element.nodeId) {\n      return getAnnotation(nodes[i], element);\n    }\n  }\n\n  var connectors = diagramElement[instance][0].connectors;\n\n  for (var i = 0; connectors && i < connectors[length]; i++) {\n    if (connectors[i].id === element.nodeId) {\n      return getAnnotation(connectors[i], element);\n    }\n  } // eslint-disable-next-line\n\n\n  var enterObject = diagramElement[instance][0].enterObject;\n\n  if (enterObject && (enterObject['id'] === element.nodeId || enterObject['children'])) {\n    if (enterObject['children'] && groupHasType(enterObject, 'HTML', diagramElement[instance][0].enterTable)) {\n      return diagramElement[instance][0].enterTable[element.nodeId];\n    } else {\n      return enterObject;\n    }\n  }\n\n  return null;\n}\n/**\n * getAnnotation method \\\n *\n * @returns {Object} getAnnotation method .\\\n * @param { Object } obj - provide the obj  value.\n * @param {  DiagramHtmlElement | DiagramNativeElement } element - provide the obj  value.\n * @private\n */\n\nfunction getAnnotation(obj, element) {\n  var annotations = obj.annotations;\n  var length = 'length';\n  var j;\n\n  for (j = 0; annotations && j < annotations[length]; j++) {\n    if (element.annotationId && annotations[j].id === element.annotationId) {\n      return annotations[j];\n    }\n  }\n\n  return obj;\n}\n/**\n * getPaletteSymbols method \\\n *\n * @returns {NodeModel[]} getPaletteSymbols method .\\\n * @param { Object } symbolPalette - provide the symbolPalette  value.\n * @private\n */\n\n\nfunction getPaletteSymbols(symbolPalette) {\n  var nodes = [];\n\n  for (var i = 0; i < symbolPalette.palettes.length; i++) {\n    var symbols = symbolPalette.palettes[i].symbols;\n\n    for (var j = 0; j < symbols.length; j++) {\n      if (symbols[j] instanceof Node) {\n        nodes.push(symbols[j]);\n      }\n    }\n  }\n\n  return nodes;\n}\n/**\n * getCollectionChangeEventArguements method \\\n *\n * @returns {IBlazorCollectionChangeEventArgs} getCollectionChangeEventArguements method .\\\n * @param { IBlazorCollectionChangeEventArgs } args1 - provide the args1  value.\n * @param { NodeModel | ConnectorModel } obj - provide the obj  value.\n * @param { EventState } state - provide the state  value.\n * @param { ChangeType } type - provide the type  value.\n * @private\n */\n\n\nexport function getCollectionChangeEventArguements(args1, obj, state, type) {\n  if (isBlazor()) {\n    args1 = {\n      cause: args1.cause,\n      state: state,\n      type: type,\n      cancel: false,\n      element: getObjectType(obj) === Connector ? {\n        connector: cloneBlazorObject(obj)\n      } : {\n        node: cloneBlazorObject(obj)\n      }\n    };\n  }\n\n  return args1;\n}\n/**\n * getDropEventArguements method \\\n *\n * @returns {IBlazorDropEventArgs} getDropEventArguements method .\\\n * @param { MouseEventArgs } args - provide the args1  value.\n * @param { IBlazorDropEventArgs } arg - provide the obj  value.\n * @private\n */\n\nexport function getDropEventArguements(args, arg) {\n  if (isBlazor()) {\n    var connector = getObjectType(args.source) === Connector;\n    var object = cloneBlazorObject(args.source);\n    var target = cloneBlazorObject(args.target);\n    arg = {\n      element: connector ? {\n        connector: object.connectors[0],\n        connectorId: object.connectors[0].id\n      } : {\n        node: object.nodes[0],\n        nodeId: object.nodes[0].id\n      },\n      target: connector ? {\n        connector: target\n      } : {\n        node: target\n      },\n      position: arg.position,\n      cancel: arg.cancel\n    };\n  }\n\n  return arg;\n}\n/**\n * getPoint method \\\n *\n * @returns {PointModel} getPoint method .\\\n * @param { number } x - provide the x  value.\n * @param { number } y - provide the y  value.\n * @param { number } w - provide the w  value.\n * @param { number } h - provide the y  value.\n * @param { number } angle - provide the y  value.\n * @param { number } offsetX - provide the y  value.\n * @param { number } offsetY - provide the y  value.\n * @param { PointModel } cornerPoint - provide the y  value.\n * @private\n */\n\nexport function getPoint(x, y, w, h, angle, offsetX, offsetY, cornerPoint) {\n  var pivot = {\n    x: 0,\n    y: 0\n  };\n  var trans = identityMatrix();\n  rotateMatrix(trans, angle, offsetX, offsetY);\n\n  switch (cornerPoint.x) {\n    case 0:\n      switch (cornerPoint.y) {\n        case 0:\n          pivot = transformPointByMatrix(trans, {\n            x: x,\n            y: y\n          });\n          break;\n\n        case 0.5:\n          pivot = transformPointByMatrix(trans, {\n            x: x,\n            y: y + h / 2\n          });\n          break;\n\n        case 1:\n          pivot = transformPointByMatrix(trans, {\n            x: x,\n            y: y + h\n          });\n          break;\n      }\n\n      break;\n\n    case 0.5:\n      switch (cornerPoint.y) {\n        case 0:\n          pivot = transformPointByMatrix(trans, {\n            x: x + w / 2,\n            y: y\n          });\n          break;\n\n        case 0.5:\n          pivot = transformPointByMatrix(trans, {\n            x: x + w / 2,\n            y: y + h / 2\n          });\n          break;\n\n        case 1:\n          pivot = transformPointByMatrix(trans, {\n            x: x + w / 2,\n            y: y + h\n          });\n          break;\n      }\n\n      break;\n\n    case 1:\n      switch (cornerPoint.y) {\n        case 0:\n          pivot = transformPointByMatrix(trans, {\n            x: x + w,\n            y: y\n          });\n          break;\n\n        case 0.5:\n          pivot = transformPointByMatrix(trans, {\n            x: x + w,\n            y: y + h / 2\n          });\n          break;\n\n        case 1:\n          pivot = transformPointByMatrix(trans, {\n            x: x + w,\n            y: y + h\n          });\n          break;\n      }\n\n      break;\n  }\n\n  return {\n    x: pivot.x,\n    y: pivot.y\n  };\n}\n/* eslint-disable */\n\n/**\n * Get the object as Node | Connector \\\n *\n * @returns {Object} Get the object as Node | Connector .\\\n * @param { number } obj - provide the x  value.\n * @private\n */\n\nexport var getObjectType = function (obj) {\n  if (obj) {\n    if (obj.sourceID !== undefined || obj.sourcePoint !== undefined || obj.targetID !== undefined || obj.targetPoint !== undefined || obj.type !== undefined) {\n      obj = Connector;\n    } else {\n      obj = Node;\n    }\n  }\n\n  return obj;\n};\n/** @private */\n\nexport var flipConnector = function (connector) {\n  if (!connector.sourceID && !connector.targetID) {\n    var source = {\n      x: connector.sourcePoint.x,\n      y: connector.sourcePoint.y\n    };\n    var target = {\n      x: connector.targetPoint.x,\n      y: connector.targetPoint.y\n    };\n\n    if (connector.flip === 'Horizontal') {\n      connector.sourcePoint.x = target.x;\n      connector.targetPoint.x = source.x;\n    } else if (connector.flip === 'Vertical') {\n      connector.sourcePoint.y = target.y;\n      connector.targetPoint.y = source.y;\n    } else if (connector.flip === 'Both') {\n      connector.sourcePoint = target;\n      connector.targetPoint = source;\n    }\n  }\n};\n/** @private */\n\nexport var updatePortEdges = function (portContent, flip, port) {\n  var offsetX = port.offset.x;\n  var offsetY = port.offset.y;\n\n  if (flip === 'Horizontal') {\n    offsetX = 1 - port.offset.x;\n    offsetY = port.offset.y;\n  } else if (flip === 'Vertical') {\n    offsetX = port.offset.x;\n    offsetY = 1 - port.offset.y;\n  } else if (flip === 'Both') {\n    offsetX = 1 - port.offset.x;\n    offsetY = 1 - port.offset.y;\n  }\n\n  portContent.setOffsetWithRespectToBounds(offsetX, offsetY, 'Fraction');\n  return portContent;\n};\n/** @private */\n\nexport var alignElement = function (element, offsetX, offsetY, diagram, flip) {\n  if (element.hasChildren()) {\n    for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childX = offsetX - child.offsetX + offsetX;\n      var childY = offsetY - child.offsetY + offsetY;\n\n      if (flip === 'Horizontal' || flip === 'Both') {\n        child.offsetX = childX;\n        child.flipOffset.x = childX - child.desiredSize.width / 2;\n      }\n\n      if (flip === 'Vertical' || flip === 'Both') {\n        child.offsetY = childY;\n        child.flipOffset.y = childY - child.desiredSize.height / 2;\n      }\n\n      if (child instanceof Canvas || child instanceof Container) {\n        alignElement(child, offsetX, offsetY, diagram, flip);\n      }\n\n      child.measure(new Size(child.bounds.width, child.bounds.height));\n      child.arrange(child.desiredSize);\n      var node = diagram.nameTable[child.id];\n\n      if (node) {\n        diagram.updateConnectorEdges(node);\n      }\n    }\n  }\n};\n/** @private */\n\nexport var cloneSelectedObjects = function (diagram) {\n  var nodes = diagram.selectedItems.nodes;\n  var connectors = diagram.selectedItems.connectors;\n  var isProtectedOnChange = 'isProtectedOnChange';\n  var isEnableServerDatabind = diagram.allowServerDataBinding;\n  var isProtectedOnChangeValue = diagram[isProtectedOnChange];\n  diagram.protectPropertyChange(true);\n  diagram.allowServerDataBinding = false;\n  diagram.selectedItems.nodes = [];\n  diagram.selectedItems.connectors = [];\n  diagram.allowServerDataBinding = isEnableServerDatabind;\n  diagram.protectPropertyChange(isProtectedOnChangeValue);\n  var clonedSelectedItems = cloneObject(diagram.selectedItems);\n\n  for (var i = 0; i < nodes.length; i++) {\n    diagram.selectedItems.nodes.push(diagram.nameTable[nodes[i].id]);\n  }\n\n  for (var i = 0; i < connectors.length; i++) {\n    diagram.selectedItems.connectors.push(diagram.nameTable[connectors[i].id]);\n  }\n\n  return clonedSelectedItems;\n};\n/** @private */\n\nexport var updatePathElement = function (anglePoints, connector) {\n  var pathElement = new PathElement();\n  var pathseqData;\n\n  for (var j = 0; j < anglePoints.length - 1; j++) {\n    pathseqData = findPath(anglePoints[j], anglePoints[j + 1]);\n    pathElement.data = pathseqData[0];\n    pathElement.id = connector.id + '_' + connector.shape.sequence;\n    pathElement.offsetX = pathseqData[1].x;\n    pathElement.offsetY = pathseqData[1].y;\n    pathElement.rotateAngle = 45;\n    pathElement.transform = Transform.Self;\n  }\n\n  return pathElement;\n};\n/** @private */\n\nexport var checkPort = function (node, element) {\n  if (node instanceof Node) {\n    for (var i = 0; i < node.ports.length; i++) {\n      if (node.ports[i].id === element.id.split('_')[1]) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n/** @private */\n\nexport var findPath = function (sourcePoint, targetPoint) {\n  var beginningpoint = {\n    x: sourcePoint.x,\n    y: sourcePoint.y\n  };\n  var distance = findDistance(sourcePoint, targetPoint);\n  distance = Math.min(30, distance / 2);\n  var angle = findAngle(sourcePoint, targetPoint);\n  var transferpt = Point.transform({\n    x: beginningpoint.x,\n    y: beginningpoint.y\n  }, angle, distance);\n  var startpoint = Point.transform({\n    x: transferpt.x,\n    y: transferpt.y\n  }, angle, -12);\n  var endpoint = Point.transform({\n    x: startpoint.x,\n    y: startpoint.y\n  }, angle, 12 * 2);\n  var path = 'M' + startpoint.x + ' ' + startpoint.y + ' L' + endpoint.x + ' ' + endpoint.y;\n  return [path, transferpt];\n};\n/** @private */\n\nexport var getConnectorDirection = function (src, tar) {\n  if (Math.abs(tar.x - src.x) > Math.abs(tar.y - src.y)) {\n    return src.x < tar.x ? 'Right' : 'Left';\n  } else {\n    return src.y < tar.y ? 'Bottom' : 'Top';\n  }\n};\n/** @private */\n\nexport var findDistance = function (point1, point2) {\n  return Math.sqrt(Math.pow(point2.x - point1.x, 2) + Math.pow(point2.y - point1.y, 2));\n};\n/* eslint-enable */\n\n/**\n * cloneBlazorObject method \\\n *\n * @returns {Object} cloneBlazorObject method .\\\n * @param { object } args - provide the args  value.\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\n\nexport function cloneBlazorObject(args) {\n  if (isBlazor()) {\n    args = cloneObject(args);\n  }\n\n  return args;\n}\n/**\n * checkBrowserInfo method \\\n *\n * @returns {Object} checkBrowserInfo method .\\\n * @private\n */\n\nexport function checkBrowserInfo() {\n  if ((navigator.platform.indexOf('Mac') >= 0 || navigator.platform.indexOf('iPad') >= 0 || navigator.platform.indexOf('iPhone') >= 0 || navigator.platform.indexOf('MacIntel') >= 0) && (Browser.info.name === 'safari' || Browser.info.name === 'webkit')) {\n    return true;\n  }\n\n  return false;\n}\n/**\n * canMeasureDecoratorPath method \\\n *\n * @returns {boolean} canMeasureDecoratorPath method .\\\n * @param { string[] } objects - provide the args  value.\n * @private\n */\n\nexport function canMeasureDecoratorPath(objects) {\n  if (objects.indexOf('shape') !== -1 || objects.indexOf('pathData') !== -1 || objects.indexOf('width') !== -1 || objects.indexOf('height') !== -1) {\n    return true;\n  }\n\n  return false;\n}\n/**\n * getPreviewSize method \\\n *\n * @returns {Size} getPreviewSize method .\\\n * @param { SymbolPaletteModel } sourceElement - provide the args  value.\n * @param { Node } clonedObject - provide the args  value.\n * @param { DiagramElement } wrapper - provide the args  value.\n * @private\n */\n\nexport function getPreviewSize(sourceElement, clonedObject, wrapper) {\n  //let previewWidth: number;\n  //let previewHeight: number;\n  var previewWidth = getSymbolSize(sourceElement, clonedObject, wrapper, 'width');\n  var previewHeight = getSymbolSize(sourceElement, clonedObject, wrapper, 'height');\n  return new Size(previewWidth, previewHeight);\n}\n/**\n * getSymbolSize method \\\n *\n * @returns {number} getSymbolSize method .\\\n * @param { SymbolPaletteModel } sourceElement - provide the sourceElement  value.\n * @param { Node } clonedObject - provide the clonedObject  value.\n * @param { DiagramElement } wrapper - provide the wrapper  value.\n * @param { string } size - provide the size  value.\n * @private\n */\n\nexport function getSymbolSize(sourceElement, clonedObject, wrapper, size) {\n  var previewSize = 0;\n\n  if (clonedObject.previewSize[size] !== undefined) {\n    previewSize = clonedObject.previewSize[size];\n  } else if (sourceElement.symbolPreview[size] !== undefined) {\n    previewSize = sourceElement.symbolPreview[size];\n  } else {\n    previewSize = clonedObject[size] || wrapper.actualSize[size];\n  }\n\n  return previewSize;\n}\n/**\n * findParent method \\\n *\n * @returns {string} findParent method .\\\n * @param { Node } clonedObject - provide the clonedObject  value.\n * @param { Diagram } wrapper - provide the diagram  element.\n * @param { string } size - provide the parent id.\n * @private\n */\n\nexport function findParentInSwimlane(node, diagram, parent) {\n  if (node && node.parentId) {\n    node = diagram.nameTable[node.parentId];\n\n    if (node.parentId) {\n      parent = findParentInSwimlane(node, diagram, parent);\n    } else {\n      parent = node.id;\n    }\n  }\n\n  return parent;\n}\n/**\n * selectionHasConnector method \\\n *\n * @returns {boolean} selectionHasConnector method .\\\n * @param { Diagram } wrapper - provide the diagram  element.\n * @param { selector } size - provide the selector element.\n * @private\n */\n\nexport function selectionHasConnector(diagram, selector) {\n  if (diagram.selectedItems.connectors.length > 1 && diagram.selectedItems.nodes.length === 0 && selector.rotateAngle !== 0) {\n    return true;\n  }\n\n  return false;\n}","map":{"version":3,"sources":["/home/ubuntu*/Desktop/streamify/node_modules/@syncfusion/ej2-diagrams/src/diagram/utility/diagram-util.js"],"names":["Size","Rect","identityMatrix","rotateMatrix","transformPointByMatrix","scaleMatrix","DiagramElement","Container","StrokeStyle","Stop","Point","ConnectorConstraints","NodeConstraints","PortConstraints","DiagramConstraints","DiagramTools","Transform","BlazorAction","SelectorConstraints","ThumbsConstraints","PathElement","DiagramNativeElement","TextElement","ImageElement","PathAnnotation","ShapeAnnotation","Node","FlowShape","BasicShape","Native","Html","UmlActivityShape","BpmnGateway","BpmnDataObject","BpmnEvent","BpmnSubEvent","BpmnActivity","BpmnAnnotation","MethodArguments","UmlClassAttribute","UmlClassMethod","UmlClass","UmlInterface","UmlEnumerationMember","UmlEnumeration","Lane","Phase","ChildContainer","SwimLane","Path","Image","Text","BpmnShape","UmlClassifierShape","Header","Connector","bezierPoints","BezierSegment","StraightSegment","OrthogonalSegment","getBasicShape","getFlowShape","Diagram","findAngle","getContent","removeElement","hasClass","getDiagramElement","getBounds","cloneObject","rotatePoint","getFunction","getPolygonPath","DiagramHtmlElement","getRulerSize","canResize","UserHandle","getUMLActivityShape","Canvas","PointPort","Command","pasteSwimLane","isBlazor","Browser","isNullOrUndefined","ConnectorFixedUserHandle","completeRegion","region","selectedObjects","collection","i","length","obj","containsRect","wrapper","bounds","push","findNodeByName","nodes","name","id","findObjectType","drawingObject","type","shape","setSwimLaneDefaults","child","node","header","hasHeader","getSpaceValue","intervals","isLine","space","undefined","getInterval","newInterval","k","setPortsEdges","ports","inEdges","outEdges","setUMLActivityDefaults","umlActivityShape","width","height","style","fill","flow","umlActivityFlow","strokeDashArray","strokeWidth","targetDecorator","sourceDecorator","setConnectorDefaults","bpmnFlow","sequence","association","hasRelation","relationship","findNearestPoint","reference","start","end","shortestPoint","shortest","findLength","shortest1","angleBWStAndEnd","angleBWStAndRef","r","vaAngle","x","Math","cos","PI","y","sin","pointsForBezier","connector","points","segments","tolerance","segment","point1","isEmptyPoint","bezierPoint1","point2","bezierPoint2","max","Number","distance","j","isDiagramChild","htmlLayer","element","parentElement","groupHasType","nameTable","contains","children","updateDefaultValues","actualNode","plainValue","defaultValue","property","oldKey","keyObj","_i","_a","Object","keys","key","Array","isArray","createObject","getObjectType","annotations","updateLayoutValue","assistantKey","_b","_c","data","dataValue","assitants","assistants","splice","hasSubTree","canEnableSubTree","orientation","layoutInfo","offset","isPointOverConnector","intermediatePoints","rect","toBounds","Inflate","hitPadding","containsPoint","intersectinPt","segment1","x1","x2","y1","y2","segment2","intersectDetails","intersect3","enabled","intersectPt","abs","rect_1","equals","container","textElement","lineUtil1","lineUtil2","point","l1","l2","d","na","nb","ua","ub","intersect2","start1","end1","start2","end2","getLineSegment","line3","getPoints","corners","padding","line","left","topLeft","right","topRight","top","bottomRight","bottom","bottomLeft","getTooltipOffset","diagram","mousePosition","inheritTooltip","constraints","InheritTooltip","objectTooltip","Tooltip","isMouseBased","tooltip","relativeMode","tooltipOffset","rulerSize","document","getElementById","getBoundingClientRect","tooltipObject","position","offsetPoint","bottomCenter","middleLeft","middleRight","topCenter","bound","scale","scroller","transform","horizontalOffset","verticalOffset","initfixedUserHandlesSymbol","options","fixedUserHandleContainer","fixedUserHandleContent","pathData","visible","inversedAlignment","horizontalAlignment","verticalAlignment","iconStrokeColor","strokeColor","iconStrokeWidth","setOffsetWithRespectToBounds","description","sort","objects","option","temp","b","center","getAnnotationPosition","pts","annotation","getloop","getOffsetOfConnector","angle","index","alignednumber","getAlignedPosition","lengths","prevLength","kCount","distancePoints","offsetLength","cnst","content","state","alignment","alignLabelOnSegments","ang","fourty5","one35","two25","three15","vAlign","hAlign","toLowerCase","direction","getBezierDirection","src","tar","removeChildNodes","removeFromAQuad","removeObjectsFromLayer","getChild","subChild","indexOf","getSwimLaneChildren","grid","childTable","gridChild","removeUnnecessaryNodes","serialize","model","removeNodes","clonedObject","getCustomProperty","selectedItems","connectors","serializationSettings","preventDefaults","JSON","stringify","defaultObject","isNodeShape","getConstructor","properties","concat","properties_1","preventArrayDefaults","every","isSameArray","constructor","parent","getClassName","deserialize","enableServerDataBinding","blazorAction","blazorActions","addConstraints","ClearObject","clear","removeConstraints","protectPropertyChange","map","dataSourceSettings","doBinding","nodeTemp","setNodeTemplate","getDescription","commands","commandManager","command","execute","canExecute","arrangeTickHorizontal","rulerSettings","horizontalRuler","arrangeTick","arrangeTickVertical","verticalRuler","getLayoutInfo","layout","getBranch","nodeDefaults","getNodeDefaults","connectorDefaults","getConnectorDefaults","dataObj","parse","upgrade","contextMenuSettings","Default","tool","bridgeDirection","pageSettings","addInfo","scrollSettings","layers","cmd","backgroundColor","basicElements","mode","actualSize","offsetX","offsetY","snapSettings","canLayout","diagramActions","isLoading","component","views","refresh","classList","add","swimlaneChildTable","swimlaneZIndexTable","version","nodes_1","port","None","updateStyle","changedObject","target","canApplyStyle","textOverflow","opacity","bold","color","textWrapping","fontFamily","fontSize","italic","textAlign","whiteSpace","textDecoration","gradient","updateGradient","refreshTextElement","changedGradient","targetGradient","cx","cy","fx","fy","stops","updateHyperlink","actualAnnotation","hyperlink","link","labelStyle","updateShapeContent","actualObject","minHeight","maxHeight","minWidth","maxWidth","margin","elementId","updateShape","oldObject","pathContent","imageContent","source","imageAlign","align","imageScale","textContent","basicShape","cornerRadius","flowShapeElement","flowShape","nativeContent","htmlContent","updateContent","newValues","nativeElement","removeChild","appendChild","htmlElement","shapes","flowshapedata","toString","updateUmlActivityNode","basicshape","basicshapedata","basicShapeData","canMeasurePath","umlActivityShapeData","getUMLFinalNode","finalNodeShape","innerFinalNode","outerFinalNode","getUMLActivityShapes","removeGradient","svgId","removeItem","array","item","updateConnector","anglePoint","updateSegmentElement","srcDecorator","firstSegment","lastSegment","clipDecorators","updateDecoratorElement","tarDecorator","updateShapeElement","getUserHandlePosition","selectorItem","handle","size","pivot","side","connectorOffset","getPointloop","matrix","rotateAngle","parentTransform","canResizeCorner","selectorConstraints","action","thumbsConstraints","canShowCorner","checkPortRestriction","portVisibility","visibility","findAnnotation","annotationId","split","findPort","portId","getInOutConnectPorts","isInConnect","InConnect","OutConnect","findObjectIndex","getObjectFromCollection","scaleElement","sw","sh","refObject","refPoint","newPosition","arrangeChild","drop","initContainer","init","measure","arrange","desiredSize","insertObject","low","high","mid","floor","getElement","diagramElement","diagramId","instance","getPaletteSymbols","nodeId","getAnnotation","enterObject","enterTable","symbolPalette","palettes","symbols","getCollectionChangeEventArguements","args1","cause","cancel","cloneBlazorObject","getDropEventArguements","args","arg","object","connectorId","getPoint","w","h","cornerPoint","trans","sourceID","sourcePoint","targetID","targetPoint","flipConnector","flip","updatePortEdges","portContent","alignElement","hasChildren","childX","childY","flipOffset","updateConnectorEdges","cloneSelectedObjects","isProtectedOnChange","isEnableServerDatabind","allowServerDataBinding","isProtectedOnChangeValue","clonedSelectedItems","updatePathElement","anglePoints","pathElement","pathseqData","findPath","Self","checkPort","beginningpoint","findDistance","min","transferpt","startpoint","endpoint","path","getConnectorDirection","sqrt","pow","checkBrowserInfo","navigator","platform","info","canMeasureDecoratorPath","getPreviewSize","sourceElement","previewWidth","getSymbolSize","previewHeight","previewSize","symbolPreview","findParentInSwimlane","parentId","selectionHasConnector","selector"],"mappings":"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","sourcesContent":["import { Size } from './../primitives/size';\nimport { Rect } from './../primitives/rect';\nimport { identityMatrix, rotateMatrix, transformPointByMatrix, scaleMatrix } from './../primitives/matrix';\nimport { DiagramElement } from './../core/elements/diagram-element';\nimport { Container } from './../core/containers/container';\nimport { StrokeStyle, Stop } from './../core/appearance';\nimport { Point } from './../primitives/point';\nimport { ConnectorConstraints, NodeConstraints, PortConstraints, DiagramConstraints, DiagramTools, Transform, BlazorAction } from './../enum/enum';\nimport { SelectorConstraints, ThumbsConstraints } from './../enum/enum';\nimport { PathElement } from './../core/elements/path-element';\nimport { DiagramNativeElement } from './../core/elements/native-element';\nimport { TextElement } from '../core/elements/text-element';\nimport { ImageElement } from '../core/elements/image-element';\nimport { PathAnnotation, ShapeAnnotation } from './../objects/annotation';\nimport { Node, FlowShape, BasicShape, Native, Html, UmlActivityShape, BpmnGateway, BpmnDataObject, BpmnEvent, BpmnSubEvent, BpmnActivity, BpmnAnnotation, MethodArguments, UmlClassAttribute, UmlClassMethod, UmlClass, UmlInterface, UmlEnumerationMember, UmlEnumeration, Lane, Phase, ChildContainer, SwimLane, Path, Image, Text, BpmnShape, UmlClassifierShape, Header } from './../objects/node';\nimport { Connector, bezierPoints, BezierSegment, StraightSegment, OrthogonalSegment } from './../objects/connector';\nimport { getBasicShape } from './../objects/dictionary/basic-shapes';\nimport { getFlowShape } from './../objects/dictionary/flow-shapes';\nimport { Diagram } from './../diagram';\nimport { findAngle } from './connector';\nimport { getContent, removeElement, hasClass, getDiagramElement } from './dom-util';\nimport { getBounds, cloneObject, rotatePoint, getFunction } from './base-util';\nimport { getPolygonPath } from './../utility/path-util';\nimport { DiagramHtmlElement } from '../core/elements/html-element';\nimport { getRulerSize } from '../ruler/ruler';\nimport { canResize } from './constraints-util';\nimport { UserHandle } from '../interaction/selector';\nimport { getUMLActivityShape } from '../objects/dictionary/umlactivity-shapes';\nimport { Canvas } from '../core/containers/canvas';\nimport { PointPort } from '../objects/port';\nimport { Command } from '../diagram/keyboard-commands';\nimport { pasteSwimLane } from './swim-lane-util';\nimport { isBlazor, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ConnectorFixedUserHandle } from '../objects/fixed-user-handle';\n/**\n * completeRegion method\\\n *\n * @returns {  void }    completeRegion method .\\\n * @param {Rect} region - provide the region value.\n * @param {(NodeModel | ConnectorModel)[]} selectedObjects - provide the selectedObjects value.\n * @private\n */\nexport function completeRegion(region, selectedObjects) {\n    var collection = [];\n    for (var i = 0; i < selectedObjects.length; i++) {\n        var obj = selectedObjects[i];\n        if (region.containsRect(obj.wrapper.bounds)) {\n            collection.push(obj);\n        }\n    }\n    return collection;\n}\n/**\n * findNodeByName method \\\n *\n * @returns {  boolean } findNodeByName method .\\\n * @param {(NodeModel | ConnectorModel)[]} nodes - provide the nodes  value.\n * @param {string} name - provide the orientation  value.\n * @private\n */\nexport function findNodeByName(nodes, name) {\n    for (var i = 0; i < nodes.length; i++) {\n        if (nodes[i].id === name) {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * findNodeByName method \\\n *\n * @returns {  string } findNodeByName method .\\\n * @param {(NodeModel | ConnectorModel)[]} drawingObject - provide the drawingObject  value.\n * @private\n */\nexport function findObjectType(drawingObject) {\n    var type;\n    if (drawingObject) {\n        if (drawingObject.type) {\n            type = 'Connector';\n        }\n        else if (drawingObject.shape && !drawingObject.type) {\n            type = 'Node';\n        }\n    }\n    return type;\n}\n/**\n * setSwimLaneDefaults method \\\n *\n * @returns {  void } setSwimLaneDefaults method .\\\n * @param {NodeModel | ConnectorModel} child - provide the child  value.\n * @param {NodeModel | ConnectorModel} node - provide the node  value.\n * @private\n */\nexport function setSwimLaneDefaults(child, node) {\n    if (node instanceof Node) {\n        if (!child.shape.header) {\n            node.shape.hasHeader = false;\n        }\n    }\n}\n/**\n * getSpaceValue method \\\n *\n * @returns {  number } getSpaceValue method .\\\n * @param {number[]} intervals - provide the intervals  value.\n * @param {boolean} isLine - provide the isLine  value.\n * @param {number} i - provide the i  value.\n * @param {number} space - provide the space  value.\n * @private\n */\nexport function getSpaceValue(intervals, isLine, i, space) {\n    space = !isLine ? ((intervals[i - 1] !== undefined) ? intervals[i - 1] + space : 0) : space;\n    return space;\n}\n/**\n * getInterval method \\\n *\n * @returns {  number[] } getInterval method .\\\n * @param {number[]} intervals - provide the intervals  value.\n * @param {boolean} isLine - provide the isLine  value.\n * @private\n */\nexport function getInterval(intervals, isLine) {\n    var newInterval = [];\n    if (!isLine) {\n        for (var k = 0; k < intervals.length; k++) {\n            newInterval.push(intervals[k]);\n        }\n        newInterval.push(intervals[newInterval.length - 2]);\n        newInterval.push(intervals[newInterval.length - 2]);\n    }\n    else {\n        newInterval = intervals;\n    }\n    return newInterval;\n}\n/**\n * setPortsEdges method \\\n *\n * @returns {  Node } setPortsEdges method .\\\n * @param {Node} node - provide the node  value.\n * @private\n */\nexport function setPortsEdges(node) {\n    for (var k = 0; k < node.ports.length; k++) {\n        node.ports[k].inEdges = [];\n        node.ports[k].outEdges = [];\n    }\n    return node;\n}\n/**\n * setUMLActivityDefaults method \\\n *\n * @returns {  void } setUMLActivityDefaults method .\\\n * @param {NodeModel | ConnectorModel} child - provide the child  value.\n * @param {NodeModel | ConnectorModel} node - provide the node  value.\n * @private\n */\nexport function setUMLActivityDefaults(child, node) {\n    if (node instanceof Node) {\n        var shape = (isBlazor() ? child.shape.umlActivityShape :\n            child.shape.shape);\n        switch (shape) {\n            case 'JoinNode':\n                if (!child.width) {\n                    node.width = 20;\n                }\n                if (!child.height) {\n                    node.height = 90;\n                }\n                if (!child.style || !child.style.fill) {\n                    node.style.fill = 'black';\n                }\n                break;\n            case 'ForkNode':\n                if (!child.width) {\n                    node.width = 90;\n                }\n                if (!child.height) {\n                    node.height = 20;\n                }\n                if (!child.style || !child.style.fill) {\n                    node.style.fill = 'black';\n                }\n                break;\n            case 'InitialNode':\n                if (!child.style || !child.style.fill) {\n                    node.style.fill = 'black';\n                }\n                break;\n            case 'FinalNode':\n                if (!child.style || !child.style.fill) {\n                    node.style.fill = 'black';\n                }\n                break;\n        }\n    }\n    else {\n        var flow = (isBlazor() ?\n            child.shape.umlActivityFlow : child.shape.flow);\n        switch (flow) {\n            case 'Object':\n                if (!child.style || !child.style.strokeDashArray) {\n                    node.style.strokeDashArray = '8 4';\n                }\n                if (!child.style || !child.style.strokeWidth) {\n                    node.style.strokeWidth = 2;\n                }\n                if (!child.targetDecorator || !child.targetDecorator.shape) {\n                    node.targetDecorator.shape = 'OpenArrow';\n                }\n                break;\n            case 'Control':\n                if (!child.style || !child.style.strokeWidth) {\n                    node.style.strokeWidth = 2;\n                }\n                if (!child.targetDecorator || !child.targetDecorator.shape) {\n                    node.targetDecorator.shape = 'OpenArrow';\n                }\n                if (!child.sourceDecorator || !child.sourceDecorator.shape) {\n                    node.sourceDecorator.shape = 'None';\n                }\n                break;\n        }\n    }\n}\n/* eslint-disable */\n/**\n * setConnectorDefaults method \\\n *\n * @returns {  void } setConnectorDefaults method .\\\n * @param {ConnectorModel} child - provide the child  value.\n * @param {ConnectorModel} node - provide the node  value.\n * @private\n */\nexport function setConnectorDefaults(child, node) {\n    switch ((child.shape).type) {\n        case 'Bpmn':\n            var bpmnFlow = (isBlazor() ? child.shape.bpmnFlow : child.shape.flow);\n            switch (bpmnFlow) {\n                case 'Sequence':\n                    if ((((child.shape.sequence) === 'Normal' && child.type !== 'Bezier')) ||\n                        ((child.shape.sequence) === 'Default') || ((child.shape.sequence) === 'Conditional')) {\n                        if (node.targetDecorator && node.targetDecorator.style) {\n                            node.targetDecorator.style.fill = (child.targetDecorator && child.targetDecorator.style\n                                && child.targetDecorator.style.fill) || 'black';\n                        }\n                        if ((child.shape.sequence) === 'Conditional' && node.sourceDecorator) {\n                            if (node.sourceDecorator.style) {\n                                node.sourceDecorator.style.fill = (child.sourceDecorator && child.sourceDecorator.style &&\n                                    child.sourceDecorator.style.fill) || 'white';\n                            }\n                            node.sourceDecorator.width = (child.sourceDecorator && child.sourceDecorator.width) || 20;\n                            node.sourceDecorator.height = (child.sourceDecorator && child.sourceDecorator.width) || 10;\n                        }\n                    }\n                    break;\n                case 'Association':\n                    if (((child.shape.association) === 'Default') ||\n                        ((child.shape.association) === 'Directional') ||\n                        ((child.shape.association) === 'BiDirectional')) {\n                        if (node.targetDecorator && node.targetDecorator.style) {\n                            node.targetDecorator.style.fill = (child.targetDecorator && child.targetDecorator.style &&\n                                child.targetDecorator.style.fill) || 'black';\n                        }\n                        if ((child.shape.association) === 'BiDirectional') {\n                            if (node.sourceDecorator && node.sourceDecorator.style) {\n                                node.sourceDecorator.style.fill = (child.sourceDecorator && child.sourceDecorator.style &&\n                                    child.sourceDecorator.style.fill) || 'white';\n                                node.sourceDecorator.width = (child.sourceDecorator && child.sourceDecorator.width) || 5;\n                                node.sourceDecorator.height = (child.sourceDecorator && child.sourceDecorator.height) || 10;\n                            }\n                        }\n                    }\n                    break;\n                case 'Message':\n                    if (node.style && !node.style.strokeDashArray) {\n                        node.style.strokeDashArray = (child.style && child.style.strokeDashArray) || '4 4';\n                    }\n                    break;\n            }\n            break;\n        case 'UmlActivity':\n            var flow = (isBlazor() ?\n                child.shape.umlActivityFlow : child.shape.flow);\n            switch (flow) {\n                case 'Exception':\n                    if (((child.shape.association) === 'Directional') ||\n                        ((child.shape.association) === 'BiDirectional')) {\n                        node.style.strokeDashArray = (child.style && child.style.strokeDashArray) || '2 2';\n                    }\n                    break;\n            }\n            break;\n        case 'UmlClassifier':\n            var hasRelation = false;\n            if (child.shape.relationship === 'Association') {\n                hasRelation = true;\n            }\n            else if (child.shape.relationship === 'Inheritance') {\n                if (node.targetDecorator && node.targetDecorator.style) {\n                    node.targetDecorator.style.fill = (child.targetDecorator && child.targetDecorator.style &&\n                        child.targetDecorator.style.fill) || 'white';\n                }\n                if (node.style) {\n                    hasRelation = true;\n                    node.style.strokeDashArray = (child.style && child.style.strokeDashArray) || '4 4';\n                }\n            }\n            else if (child.shape.relationship === 'Composition') {\n                if (node.sourceDecorator && node.sourceDecorator.style) {\n                    node.sourceDecorator.style.fill = (child.sourceDecorator && child.sourceDecorator.style &&\n                        child.sourceDecorator.style.fill) || 'black';\n                }\n                hasRelation = true;\n            }\n            else if (child.shape.relationship === 'Aggregation' ||\n                child.shape.relationship === undefined) {\n                if (node.sourceDecorator && node.sourceDecorator.style) {\n                    node.sourceDecorator.style.fill = (child.sourceDecorator && child.sourceDecorator.style &&\n                        child.sourceDecorator.style.fill) || 'white';\n                }\n                hasRelation = true;\n            }\n            else if (child.shape.relationship === 'Dependency') {\n                if (node.sourceDecorator && node.sourceDecorator.style) {\n                    node.sourceDecorator.style.fill = (child.sourceDecorator && child.sourceDecorator.style &&\n                        child.sourceDecorator.style.fill) || 'white';\n                }\n                hasRelation = true;\n                node.style.strokeDashArray = '4 4';\n            }\n            else if (child.shape.relationship === 'Realization') {\n                if (node.sourceDecorator && node.sourceDecorator.style) {\n                    node.sourceDecorator.style.fill = (child.sourceDecorator && child.sourceDecorator.style &&\n                        child.sourceDecorator.style.fill) || 'white';\n                }\n                hasRelation = true;\n            }\n            if (hasRelation) {\n                node.style.strokeWidth = (child.style && child.style.strokeWidth) || 2;\n            }\n            break;\n    }\n}\n/* eslint-enable */\n/**\n * findNearestPoint method \\\n *\n * @returns {  PointModel } findNearestPoint method .\\\n * @param {PointModel} reference - provide the reference  value.\n * @param {PointModel} start - provide the start  value.\n * @param {PointModel} end - provide the end  value.\n * @private\n */\nexport function findNearestPoint(reference, start, end) {\n    var shortestPoint;\n    var shortest = Point.findLength(start, reference);\n    var shortest1 = Point.findLength(end, reference);\n    if (shortest > shortest1) {\n        shortestPoint = end;\n    }\n    else {\n        shortestPoint = start;\n    }\n    var angleBWStAndEnd = Point.findAngle(start, end);\n    var angleBWStAndRef = Point.findAngle(shortestPoint, reference);\n    var r = Point.findLength(shortestPoint, reference);\n    var vaAngle = angleBWStAndRef + ((angleBWStAndEnd - angleBWStAndRef) * 2);\n    return {\n        x: (shortestPoint.x + r * Math.cos(vaAngle * Math.PI / 180)),\n        y: (shortestPoint.y + r * Math.sin(vaAngle * Math.PI / 180))\n    };\n}\n/**\n * pointsForBezier method \\\n *\n * @returns {   PointModel[] } pointsForBezier method .\\\n * @param {ConnectorModel} connector - provide the connector  value.\n * @private\n */\nfunction pointsForBezier(connector) {\n    var points = [];\n    if (connector.type === 'Bezier') {\n        var k = 0;\n        for (var i = 0; i < connector.segments.length; i++) {\n            var tolerance = 1.5;\n            var segment = connector.segments[i];\n            //const pt: PointModel = { x: 0, y: 0 };\n            var point1 = !Point.isEmptyPoint(segment.point1) ? segment.point1 : segment.bezierPoint1;\n            var point2 = !Point.isEmptyPoint(segment.point2) ? segment.point2 : segment.bezierPoint2;\n            var max = Number((connector.distance(point1, segment.points[0]) +\n                connector.distance(point2, point1) +\n                connector.distance(segment.points[1], point2)) / tolerance);\n            for (var j = 0; j < max - 1; j = j + 10) {\n                points[k] =\n                    bezierPoints(connector, segment.points[0], !Point.isEmptyPoint(segment.point1) ? segment.point1 : segment.bezierPoint1, !Point.isEmptyPoint(segment.point2) ? segment.point2 : segment.bezierPoint2, segment.points[1], j, max);\n                k++;\n            }\n        }\n    }\n    return points;\n}\n/**\n * isDiagramChild method \\\n *\n * @returns {  boolean } isDiagramChild method .\\\n * @param {HTMLElement} htmlLayer - provide the htmlLayer  value.\n * @private\n */\nexport function isDiagramChild(htmlLayer) {\n    var element = htmlLayer.parentElement;\n    do {\n        if (hasClass(element, 'e-diagram')) {\n            return true;\n        }\n        element = element.parentElement;\n    } while (element);\n    return false;\n}\n/**\n * groupHasType method \\\n *\n * @returns {  boolean } groupHasType method .\\\n * @param {NodeModel} node - provide the node  value.\n * @param {Shapes} type - provide the type  value.\n * @param {{}} nameTable - provide the nameTable  value.\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function groupHasType(node, type, nameTable) {\n    var contains = false;\n    if (node && node.children && node.children.length > 0) {\n        var child = void 0;\n        var i = 0;\n        for (; i < node.children.length; i++) {\n            child = nameTable[node.children[i]];\n            if (child.shape.type === type) {\n                return true;\n            }\n            return groupHasType(child, type, nameTable);\n        }\n    }\n    return contains;\n}\n/**\n * groupHasType method \\\n *\n * @returns {  void } groupHasType method .\\\n * @param {NodeModel | ConnectorModel} actualNode - provide the actualNode  value.\n * @param { NodeModel | ConnectorModel} plainValue - provide the plainValue  value.\n * @param {object} defaultValue - provide the defaultValue  value.\n * @param {NodeModel | ConnectorModel} property - provide the property  value.\n * @param {string} oldKey - provide the oldKey  value.\n * @private\n */\nexport function updateDefaultValues(actualNode, plainValue, \n// eslint-disable-next-line @typescript-eslint/ban-types\ndefaultValue, property, oldKey) {\n    if (defaultValue && ((actualNode instanceof Connector) || actualNode\n        && ((actualNode.shape && actualNode.shape.type !== 'SwimLane') || actualNode.shape === undefined))) {\n        // eslint-disable-next-line @typescript-eslint/ban-types\n        var keyObj = void 0;\n        for (var _i = 0, _a = Object.keys(defaultValue); _i < _a.length; _i++) {\n            var key = _a[_i];\n            keyObj = defaultValue[key];\n            if (key === 'shape' && keyObj.type) {\n                actualNode.shape = { type: keyObj.type };\n            }\n            if (keyObj) {\n                if (Array.isArray(keyObj) && keyObj.length && keyObj.length > 0 && (oldKey !== 'annotations' && oldKey !== 'ports')) {\n                    if (actualNode[key].length > 0) {\n                        for (var i = 0; i <= actualNode[key].length; i++) {\n                            updateDefaultValues(actualNode[key], plainValue ? plainValue[key] : undefined, defaultValue[key], (key === 'annotations' || key === 'ports') ? actualNode : undefined, key);\n                        }\n                    }\n                    else {\n                        updateDefaultValues(actualNode[key], plainValue ? plainValue[key] : undefined, defaultValue[key], (key === 'annotations' || key === 'ports') ? actualNode : undefined, key);\n                    }\n                }\n                else if (keyObj instanceof Object && plainValue && (oldKey !== 'annotations' && oldKey !== 'ports')) {\n                    updateDefaultValues(actualNode[key], plainValue[key], defaultValue[key]);\n                }\n                else if ((oldKey !== 'annotations' && oldKey !== 'ports')\n                    && (plainValue && !plainValue[key]) || (!plainValue && actualNode\n                    && (actualNode[key] || actualNode[key] !== undefined))) {\n                    actualNode[key] = defaultValue[key];\n                }\n                else {\n                    var createObject = void 0;\n                    if (oldKey === 'annotations' || oldKey === 'ports') {\n                        if (oldKey === 'annotations') {\n                            if (actualNode[key]) {\n                                updateDefaultValues(actualNode[key], plainValue[key], defaultValue[key]);\n                            }\n                            if (!actualNode[key]) {\n                                if (getObjectType(property) === Connector) {\n                                    createObject = new PathAnnotation(property, 'annotations', defaultValue[key]);\n                                    property.annotations.push(createObject);\n                                }\n                                else {\n                                    createObject = new ShapeAnnotation(property, 'annotations', defaultValue[key]);\n                                    property.annotations.push(createObject);\n                                }\n                            }\n                        }\n                        else {\n                            if (actualNode[key]) {\n                                updateDefaultValues(actualNode[key], plainValue[key], defaultValue[key]);\n                            }\n                            else {\n                                createObject = new PointPort(property, 'ports', defaultValue[key]);\n                                property.ports.push(createObject);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n/* tslint:disable:no-string-literal */\n/**\n * updateLayoutValue method \\\n *\n * @returns {  void } updateLayoutValue method .\\\n * @param {TreeInfo} actualNode - provide the actualNode  value.\n * @param { object} defaultValue - provide the defaultValue  value.\n * @param {INode[]} nodes - provide the nodes  value.\n * @param {INode} node - provide the node  value.\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function updateLayoutValue(actualNode, defaultValue, nodes, node) {\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    var keyObj;\n    var assistantKey = \"Role\";\n    if (defaultValue) {\n        for (var _i = 0, _a = Object.keys(defaultValue); _i < _a.length; _i++) {\n            var key = _a[_i];\n            keyObj = defaultValue[key];\n            if (key === 'getAssistantDetails') {\n                if (isBlazor()) {\n                    // Iterate the node data and get the assistant.\n                    for (var _b = 0, _c = Object.keys(node.data); _b < _c.length; _b++) {\n                        var dataValue = _c[_b];\n                        assistantKey = dataValue;\n                        if (node.data[assistantKey] === defaultValue[key]['root']) {\n                            break;\n                        }\n                    }\n                }\n                if (node.data[assistantKey] === defaultValue[key]['root']) {\n                    var assitants = defaultValue[key]['assistants'];\n                    for (var i = 0; i < assitants.length; i++) {\n                        for (var j = 0; j < nodes.length; j++) {\n                            if (nodes[j].data[assistantKey] === assitants[i]) {\n                                actualNode.assistants.push(nodes[j].id);\n                                actualNode.children.splice(0, 1);\n                            }\n                        }\n                    }\n                }\n            }\n            else if (keyObj) {\n                actualNode[key] = defaultValue[key];\n            }\n        }\n    }\n    if (!actualNode.hasSubTree && defaultValue.canEnableSubTree) {\n        actualNode.orientation = node.layoutInfo.orientation;\n        actualNode.type = node.layoutInfo.type;\n        if (node.layoutInfo.offset !== actualNode.offset && (node.layoutInfo.offset) !== undefined) {\n            actualNode.offset = node.layoutInfo.offset;\n        }\n    }\n    node.layoutInfo.hasSubTree = actualNode.hasSubTree;\n}\n/* tslint:enable:no-string-literal */\n/**\n * isPointOverConnector method \\\n *\n * @returns {  boolean } isPointOverConnector method .\\\n * @param {ConnectorModel} connector - provide the connector  value.\n * @param { PointModel} reference - provide the reference  value.\n * @private\n */\nexport function isPointOverConnector(connector, reference) {\n    //let intermediatePoints: PointModel[];\n    var intermediatePoints = connector.type === 'Bezier' ? pointsForBezier(connector) :\n        connector.intermediatePoints;\n    for (var i = 0; i < intermediatePoints.length - 1; i++) {\n        var start = intermediatePoints[i];\n        var end = intermediatePoints[i + 1];\n        var rect = Rect.toBounds([start, end]);\n        rect.Inflate(connector.hitPadding);\n        if (rect.containsPoint(reference)) {\n            var intersectinPt = findNearestPoint(reference, start, end);\n            var segment1 = { x1: start.x, x2: end.x, y1: start.y, y2: end.y };\n            var segment2 = { x1: reference.x, x2: intersectinPt.x, y1: reference.y, y2: intersectinPt.y };\n            var intersectDetails = intersect3(segment1, segment2);\n            if (intersectDetails.enabled) {\n                var distance = Point.findLength(reference, intersectDetails.intersectPt);\n                if (Math.abs(distance) < connector.hitPadding) {\n                    return true;\n                }\n            }\n            else {\n                var rect_1 = Rect.toBounds([reference, reference]);\n                rect_1.Inflate(3);\n                if (rect_1.containsPoint(start) || rect_1.containsPoint(end)) {\n                    return true;\n                }\n            }\n            if (Point.equals(reference, intersectinPt)) {\n                return true;\n            }\n        }\n    }\n    if (connector.annotations.length > 0) {\n        var container = connector.wrapper.children;\n        for (var i = 3; i < container.length; i++) {\n            var textElement = container[i];\n            if (textElement.bounds.containsPoint(reference)) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n/**\n * intersect3 method \\\n *\n * @returns {  Intersection } intersect3 method .\\\n * @param {ConnectorModel} lineUtil1 - provide the lineUtil1  value.\n * @param { PointModel} lineUtil2 - provide the lineUtil2  value.\n * @private\n */\nexport function intersect3(lineUtil1, lineUtil2) {\n    var point = { x: 0, y: 0 };\n    var l1 = lineUtil1;\n    var l2 = lineUtil2;\n    var d = (l2.y2 - l2.y1) * (l1.x2 - l1.x1) - (l2.x2 - l2.x1) * (l1.y2 - l1.y1);\n    var na = (l2.x2 - l2.x1) * (l1.y1 - l2.y1) - (l2.y2 - l2.y1) * (l1.x1 - l2.x1);\n    var nb = (l1.x2 - l1.x1) * (l1.y1 - l2.y1) - (l1.y2 - l1.y1) * (l1.x1 - l2.x1);\n    /*( EJ2-42102 - Connector segments not update properly ) by sivakumar sekar - condition added to avoid bridging for\n     overlapping segments in the connectors and to validate whether the connector is intersecting over the other */\n    if (d === 0 || ((lineUtil1.x1 === lineUtil2.x1 || lineUtil1.y1 === lineUtil2.y1) &&\n        (lineUtil1.x2 === lineUtil2.x2 || lineUtil1.y2 === lineUtil2.y2) && ((na === 0 || nb === 0) && d > 0))) {\n        return { enabled: false, intersectPt: point };\n    }\n    var ua = na / d;\n    var ub = nb / d;\n    if (ua >= 0 && ua <= 1 && ub >= 0 && ub <= 1) {\n        point.x = l1.x1 + (ua * (l1.x2 - l1.x1));\n        point.y = l1.y1 + (ua * (l1.y2 - l1.y1));\n        return { enabled: true, intersectPt: point };\n    }\n    return { enabled: false, intersectPt: point };\n}\n/**\n * intersect2 method \\\n *\n * @returns {  PointModel } intersect2 method .\\\n * @param {PointModel} start1 - provide the start1  value.\n * @param { PointModel} end1 - provide the end1  value.\n * @param { PointModel} start2 - provide the start2  value.\n * @param { PointModel} end2 - provide the end2  value.\n * @private\n */\nexport function intersect2(start1, end1, start2, end2) {\n    var point = { x: 0, y: 0 };\n    var lineUtil1 = getLineSegment(start1.x, start1.y, end1.x, end1.y);\n    var lineUtil2 = getLineSegment(start2.x, start2.y, end2.x, end2.y);\n    var line3 = intersect3(lineUtil1, lineUtil2);\n    if (line3.enabled) {\n        return line3.intersectPt;\n    }\n    else {\n        return point;\n    }\n}\n/**\n * getLineSegment method \\\n *\n * @returns {  Segment } getLineSegment method .\\\n * @param {number} x1 - provide the x1  value.\n * @param { number} y1 - provide the y1  value.\n * @param { number} x2 - provide the x2  value.\n * @param { number} y2 - provide the y2  value.\n * @private\n */\nexport function getLineSegment(x1, y1, x2, y2) {\n    return { 'x1': Number(x1) || 0, 'y1': Number(y1) || 0, 'x2': Number(x2) || 0, 'y2': Number(y2) || 0 };\n}\n/**\n * getPoints method \\\n *\n * @returns {  PointModel[] } getPoints method .\\\n * @param {number} element - provide the element  value.\n * @param { number} corners - provide the corners  value.\n * @param { number} padding - provide the padding  value.\n * @private\n */\nexport function getPoints(element, corners, padding) {\n    var line = [];\n    padding = padding || 0;\n    var left = { x: corners.topLeft.x - padding, y: corners.topLeft.y };\n    var right = { x: corners.topRight.x + padding, y: corners.topRight.y };\n    var top = { x: corners.bottomRight.x, y: corners.bottomRight.y - padding };\n    var bottom = { x: corners.bottomLeft.x, y: corners.bottomLeft.y + padding };\n    line.push(left);\n    line.push(right);\n    line.push(top);\n    line.push(bottom);\n    return line;\n}\n/**\n * getTooltipOffset method \\\n *\n * @returns {  PointModel[] } getTooltipOffset method .\\\n * @param {number} diagram - provide the diagram  value.\n * @param { number} mousePosition - provide the mousePosition  value.\n * @param { NodeModel | ConnectorModel} node - provide the node  value.\n * @param { string} type - provide the type  value.\n * @private\n */\nexport function getTooltipOffset(diagram, mousePosition, node, type) {\n    //let offset: PointModel;\n    var inheritTooltip = (node instanceof Node) ? (node.constraints & NodeConstraints.InheritTooltip)\n        : (node.constraints & ConnectorConstraints.InheritTooltip);\n    var objectTooltip = (node instanceof Node) ? (node.constraints & NodeConstraints.Tooltip)\n        : (node.constraints & ConnectorConstraints.Tooltip);\n    var isMouseBased = ((!inheritTooltip && objectTooltip ? node.tooltip.relativeMode\n        : diagram.tooltip.relativeMode) === 'Mouse') ? true : false;\n    if (type === 'Mouse') {\n        isMouseBased = true;\n    }\n    else if (type === 'Object') {\n        isMouseBased = false;\n    }\n    var offset = tooltipOffset(node, mousePosition, diagram, isMouseBased);\n    var rulerSize = getRulerSize(diagram);\n    return { x: offset.x + rulerSize.width, y: offset.y + rulerSize.height };\n}\n/**\n * tooltipOffset method \\\n *\n * @returns { PointModel } tooltipOffset method .\\\n * @param {NodeModel | ConnectorModel} node - provide the node  value.\n * @param { PointModel} mousePosition - provide the mousePosition  value.\n * @param { Diagram } diagram - provide the diagram  value.\n * @param { boolean} isMouseBased - provide the isMouseBased  value.\n * @private\n */\nfunction tooltipOffset(node, mousePosition, diagram, isMouseBased) {\n    var point = {};\n    //let scale: number = diagram.scroller.transform.scale;\n    var element = document.getElementById(diagram.element.id);\n    var bounds = node.wrapper.bounds;\n    var rect = element.getBoundingClientRect();\n    /* eslint-enable */\n    //let horizontalOffset: number = diagram.scroller.horizontalOffset;\n    //let verticalOffset: number = diagram.scroller.verticalOffset;\n    switch (diagram.tooltipObject.position) {\n        case 'BottomCenter':\n            point = offsetPoint(mousePosition, bounds.bottomCenter, diagram, isMouseBased, (rect.width / 2), rect.height);\n            break;\n        case 'BottomLeft':\n        case 'LeftBottom':\n            point = offsetPoint(mousePosition, bounds.bottomLeft, diagram, isMouseBased, 0, rect.height);\n            break;\n        case 'BottomRight':\n        case 'RightBottom':\n            point = offsetPoint(mousePosition, bounds.bottomRight, diagram, isMouseBased, rect.width, rect.height);\n            break;\n        case 'LeftCenter':\n            point = offsetPoint(mousePosition, bounds.middleLeft, diagram, isMouseBased, 0, (rect.height / 2));\n            break;\n        case 'LeftTop':\n        case 'TopLeft':\n            point = offsetPoint(mousePosition, bounds.topLeft, diagram, isMouseBased, 0, 0);\n            break;\n        case 'RightCenter':\n            point = offsetPoint(mousePosition, bounds.middleRight, diagram, isMouseBased, rect.width, (rect.height / 2));\n            break;\n        case 'RightTop':\n        case 'TopRight':\n            point = offsetPoint(mousePosition, bounds.topRight, diagram, isMouseBased, rect.width, 0);\n            break;\n        case 'TopCenter':\n            point = offsetPoint(mousePosition, bounds.topCenter, diagram, isMouseBased, (rect.width / 2), 0);\n            break;\n    }\n    return point;\n}\n/**\n * offsetPoint method \\\n *\n * @returns { PointModel } offsetPoint method .\\\n * @param { PointModel} mousePosition - provide the mousePosition  value.\n * @param { PointModel } bound - provide the diagram  value.\n * @param { Diagram} diagram - provide the isMouseBased  value.\n * @param { boolean} isMouseBased - provide the isMouseBased  value.\n * @param { number} x - provide the isMouseBased  value.\n * @param { number} y - provide the isMouseBased  value.\n * @private\n */\nfunction offsetPoint(mousePosition, bound, diagram, isMouseBased, x, y) {\n    var point = {};\n    var scale = diagram.scroller.transform.scale;\n    var horizontalOffset = diagram.scroller.horizontalOffset;\n    var verticalOffset = diagram.scroller.verticalOffset;\n    point.x = (isMouseBased ? mousePosition.x : bound.x) * scale + horizontalOffset - x;\n    point.y = (isMouseBased ? mousePosition.y : bound.y) * scale + verticalOffset - y;\n    return point;\n}\n/**\n * Gets the fixed user handles symbol \\\n *\n * @returns { DiagramElement } Gets the fixed user handles symbol .\\\n * @param {ConnectorFixedUserHandleModel | NodeFixedUserHandleModel} options - provide the options  value.\n * @param { Canvas} fixedUserHandleContainer - provide the fixedUserHandleContainer  value.\n * @private\n */\nexport function initfixedUserHandlesSymbol(options, fixedUserHandleContainer) {\n    //let fixedUserHandleContent: PathElement | DiagramNativeElement;\n    var fixedUserHandleContent = new PathElement();\n    fixedUserHandleContent.data = options.pathData;\n    fixedUserHandleContent.height =\n        options.height > 10 ? options.height - (options.padding.bottom + options.padding.top) : options.height;\n    fixedUserHandleContent.width =\n        options.width > 10 ? options.width - (options.padding.left + options.padding.right) : options.width;\n    fixedUserHandleContent.visible = fixedUserHandleContainer.visible;\n    fixedUserHandleContent.id = fixedUserHandleContainer.id + '_shape';\n    fixedUserHandleContent.inversedAlignment = false;\n    fixedUserHandleContent.horizontalAlignment = 'Center';\n    fixedUserHandleContent.verticalAlignment = 'Center';\n    fixedUserHandleContent.style = {\n        fill: options.iconStrokeColor, strokeColor: options.iconStrokeColor,\n        strokeWidth: options.iconStrokeWidth\n    };\n    fixedUserHandleContent.setOffsetWithRespectToBounds(0.5, 0.5, 'Fraction');\n    fixedUserHandleContent.relativeMode = 'Object';\n    fixedUserHandleContent.description = fixedUserHandleContainer.description || '';\n    return fixedUserHandleContent;\n}\n/**\n * sort method \\\n *\n * @returns { (NodeModel | ConnectorModel)[] } sort method .\\\n * @param {(NodeModel | ConnectorModel)[]} objects - provide the options  value.\n * @param { DistributeOptions} option - provide the fixedUserHandleContainer  value.\n * @private\n */\nexport function sort(objects, option) {\n    var i = 0;\n    var j = 0;\n    var temp;\n    for (i = 0; i < objects.length; i++) {\n        var b = getBounds(objects[i].wrapper);\n        for (j = 0; j < objects.length; j++) {\n            var bounds = getBounds(objects[j].wrapper);\n            if (option === 'Top' || option === 'Bottom' || option === 'BottomToTop' || option === 'Middle') {\n                if (b.center.y > bounds.center.y) {\n                    temp = objects[i];\n                    objects[i] = objects[j];\n                    objects[j] = temp;\n                }\n            }\n            else {\n                if (b.center.x > bounds.center.x) {\n                    temp = objects[i];\n                    objects[i] = objects[j];\n                    objects[j] = temp;\n                }\n            }\n        }\n    }\n    return objects;\n}\n/**\n * getAnnotationPosition method \\\n *\n * @returns {SegmentInfo } getAnnotationPosition method .\\\n * @param {PointModel[]} pts - provide the pts  value.\n * @param { PathAnnotation | ConnectorFixedUserHandle} annotation - provide the annotation  value.\n * @param { Rect } bound - provide the bound  value.\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function getAnnotationPosition(pts, annotation, bound) {\n    //let angle: number;\n    //let getloop: SegmentInfo;\n    //let point: PointModel;\n    var getloop = getOffsetOfConnector(pts, annotation);\n    var angle = Point.findAngle(pts[getloop.index], pts[getloop.index + 1]);\n    var alignednumber = getAlignedPosition(annotation);\n    var point = Point.transform(getloop.point, angle + 45, alignednumber);\n    getloop.point = point;\n    getloop.angle = angle;\n    return getloop;\n}\n/**\n * getOffsetOfConnector method \\\n *\n * @returns {SegmentInfo } getOffsetOfConnector method .\\\n * @param {PointModel[]} points - provide the pts  value.\n * @param { PathAnnotation | ConnectorFixedUserHandle} annotation - provide the annotation  value.\n * @private\n */\nexport function getOffsetOfConnector(points, annotation) {\n    // eslint-disable-next-line\n    var length = 0;\n    var offset = annotation.offset;\n    var point;\n    var angle;\n    var lengths = [];\n    var prevLength;\n    var kCount;\n    for (var j = 0; j < points.length - 1; j++) {\n        length += Point.distancePoints(points[j], points[j + 1]);\n        lengths.push(length);\n    }\n    var offsetLength = offset * length;\n    for (var k = 0; k < lengths.length; k++) {\n        if (lengths[k] >= offsetLength) {\n            angle = Point.findAngle(points[k], points[k + 1]);\n            point = Point.transform(points[k], angle, offsetLength - (prevLength || 0));\n            kCount = k;\n            return { point: point, index: kCount };\n        }\n        prevLength = lengths[k];\n    }\n    return { point: point, index: kCount };\n}\n/**\n * getAlignedPosition method \\\n *\n * @returns {number } getAlignedPosition method .\\\n * @param {PointModel[]} annotation - provide the annotation  value.\n * @private\n */\nexport function getAlignedPosition(annotation) {\n    var cnst;\n    if ((annotation instanceof ConnectorFixedUserHandle)) {\n        cnst = 0;\n    }\n    else {\n        cnst = annotation.content === undefined ? 10 : 0;\n    }\n    var state = 0;\n    switch (annotation.alignment) {\n        case 'Center':\n            state = 0;\n            break;\n        case 'Before':\n            state = -((0) / 2 + cnst);\n            break;\n        case 'After':\n            state = ((0) / 2 + cnst);\n            break;\n    }\n    return state;\n}\n/**\n * alignLabelOnSegments method \\\n *\n * @returns {Alignment } alignLabelOnSegments method .\\\n * @param {PathAnnotation | ConnectorFixedUserHandle} obj - provide the obj  value.\n * @param { number } ang - provide the ang  value.\n * @param { PointModel[] } pts - provide the pts  value.\n * @private\n */\nexport function alignLabelOnSegments(obj, ang, pts) {\n    //let angle: number = ang % 360;\n    ang %= 360;\n    var fourty5 = 45;\n    var one35 = 135;\n    var two25 = 225;\n    var three15 = 315;\n    var vAlign;\n    var hAlign;\n    switch (obj.alignment) {\n        case 'Before':\n            if (ang >= fourty5 && ang <= one35) {\n                hAlign = 'right';\n                vAlign = obj.offset === 0.5 ? 'center' : 'top';\n            }\n            else if (ang >= two25 && ang <= three15) {\n                hAlign = 'left';\n                vAlign = obj.offset === 0.5 ? 'center' : 'bottom';\n            }\n            else if (ang > fourty5 && ang < two25) {\n                vAlign = 'top';\n                hAlign = obj.offset === 0.5 ? 'center' : 'right';\n            }\n            else {\n                vAlign = 'bottom';\n                hAlign = (obj.offset === 0.5) ? 'center' : 'left';\n            }\n            break;\n        case 'After':\n            if (ang >= fourty5 && ang <= one35) {\n                hAlign = 'left';\n                vAlign = obj.offset === 0.5 ? 'center' : 'top';\n            }\n            else if (ang >= two25 && ang <= three15) {\n                hAlign = 'right';\n                vAlign = obj.offset === 0.5 ? 'center' : 'bottom';\n            }\n            else if (ang > fourty5 && ang < two25) {\n                vAlign = 'bottom';\n                hAlign = obj.offset === 0.5 ? 'center' : 'right';\n            }\n            else {\n                vAlign = 'top';\n                hAlign = obj.offset === 0.5 ? 'center' : 'left';\n            }\n            break;\n        case 'Center':\n            hAlign = !isNullOrUndefined(obj.horizontalAlignment) ? obj.horizontalAlignment.toLowerCase() : \"center\";\n            ;\n            vAlign = !isNullOrUndefined(obj.verticalAlignment) ? obj.verticalAlignment.toLowerCase() : \"center\";\n            break;\n    }\n    if (obj.offset === 0 || obj.offset === 1) {\n        //let direction: string;\n        var direction = getBezierDirection(pts[0], pts[1]);\n        switch (direction) {\n            case 'left':\n                hAlign = obj.offset === 0 ? 'right' : 'left';\n                break;\n            case 'right':\n                hAlign = obj.offset === 0 ? 'left' : 'right';\n                break;\n            case 'bottom':\n                vAlign = obj.offset === 0 ? 'top' : 'bottom';\n                break;\n            case 'top':\n                vAlign = obj.offset === 0 ? 'bottom' : 'top';\n                break;\n        }\n    }\n    return { hAlign: hAlign, vAlign: vAlign };\n}\n/**\n * getBezierDirection method \\\n *\n * @returns {string } getBezierDirection method .\\\n * @param {PointModel} src - provide the src  value.\n * @param { PointModel } tar - provide the tar  value.\n * @private\n */\nexport function getBezierDirection(src, tar) {\n    if (Math.abs(tar.x - src.x) > Math.abs(tar.y - src.y)) {\n        return src.x < tar.x ? 'right' : 'left';\n    }\n    else {\n        return src.y < tar.y ? 'bottom' : 'top';\n    }\n}\n/**\n * removeChildNodes method \\\n *\n * @returns {void } removeChildNodes method .\\\n * @param {NodeModel} node - provide the node  value.\n * @param { Diagram } diagram - provide the diagram  value.\n * @private\n */\nexport function removeChildNodes(node, diagram) {\n    if (node instanceof Node && node.children) {\n        for (var i = 0; i < node.children.length; i++) {\n            if (diagram.nameTable[node.children[i]].children) {\n                removeChildNodes(node, diagram);\n            }\n            diagram.removeFromAQuad(diagram.nameTable[node.children[i]]);\n            diagram.removeObjectsFromLayer(diagram.nameTable[node.children[i]]);\n            delete diagram.nameTable[node.children[i]];\n        }\n    }\n}\n/**\n * getChild method \\\n *\n * @returns {string[] } getChild method .\\\n * @param {Canvas} child - provide the child  value.\n * @param { string[] } children - provide the children  value.\n * @private\n */\nexport function getChild(child, children) {\n    if (child && child.children && child.children.length > 0) {\n        for (var j = 0; j < child.children.length; j++) {\n            var subChild = child.children[j];\n            if (subChild instanceof Canvas) {\n                getChild(subChild, children);\n            }\n        }\n    }\n    if (children.indexOf(child.id) === -1) {\n        children.push(child.id);\n    }\n    return children;\n}\n/**\n * getSwimLaneChildren method \\\n *\n * @returns {string[] } getSwimLaneChildren method .\\\n * @param {NodeModel[]} nodes - provide the nodes  value.\n * @private\n */\nfunction getSwimLaneChildren(nodes) {\n    var children = [];\n    var node;\n    var grid;\n    var childTable;\n    var child;\n    var gridChild = 'childTable';\n    for (var i = 0; i < nodes.length; i++) {\n        node = nodes[i];\n        if (node.shape.type === 'SwimLane') {\n            grid = node.wrapper.children[0];\n            childTable = grid[gridChild];\n            for (var _i = 0, _a = Object.keys(childTable); _i < _a.length; _i++) {\n                var key = _a[_i];\n                child = childTable[key];\n                children = getChild(child, children);\n            }\n        }\n    }\n    return children;\n}\n/**\n * removeUnnecessaryNodes method \\\n *\n * @returns {void } removeUnnecessaryNodes method .\\\n * @param {string[]} children - provide the children  value.\n * @param {Diagram} diagram - provide the diagram  value.\n * @private\n */\nfunction removeUnnecessaryNodes(children, diagram) {\n    var nodes = diagram.nodes;\n    if (nodes) {\n        for (var i = 0; i < nodes.length; i++) {\n            if (children.indexOf(nodes[i].id) !== -1) {\n                nodes.splice(i, 1);\n                i--;\n            }\n        }\n    }\n}\n/**\n * serialize method \\\n *\n * @returns {string } serialize method .\\\n * @param {Diagram} model - provide the model  value.\n * @private\n */\nexport function serialize(model) {\n    var removeNodes = getSwimLaneChildren(model.nodes);\n    var clonedObject = cloneObject(model, model.getCustomProperty);\n    clonedObject.selectedItems.nodes = [];\n    clonedObject.selectedItems.connectors = [];\n    clonedObject.selectedItems.wrapper = null;\n    if (model.serializationSettings.preventDefaults) {\n        clonedObject = preventDefaults(clonedObject, model);\n    }\n    removeUnnecessaryNodes(removeNodes, clonedObject);\n    return JSON.stringify(clonedObject);\n}\n/**\n * preventDefaults method \\\n *\n * @returns {string } preventDefaults method .\\\n * @param {Object} clonedObject - provide the clonedObject  value.\n * @param {object} model - provide the model  value.\n * @param {object} defaultObject - provide the defaultObject  value.\n * @param {boolean} isNodeShape - provide the isNodeShape  value.\n * @private\n */\n// eslint-disable-next-line\nfunction preventDefaults(clonedObject, model, defaultObject, isNodeShape) {\n    defaultObject = getConstructor(model, defaultObject);\n    var properties = [];\n    properties = properties.concat(Object.keys(clonedObject));\n    for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n        var property = properties_1[_i];\n        if (model instanceof Node) {\n            isNodeShape = (property === 'shape') ? true : false;\n        }\n        if (clonedObject[property] instanceof Array) {\n            preventArrayDefaults(clonedObject, defaultObject, model, property);\n        }\n        else if ((clonedObject[property] instanceof Object) && defaultObject && defaultObject[property]) {\n            if (property !== 'wrapper') {\n                clonedObject[property] = preventDefaults(clonedObject[property], model[property], defaultObject[property], isNodeShape);\n            }\n        }\n        else if ((defaultObject && clonedObject[property] === defaultObject[property]) || clonedObject[property] === undefined) {\n            if (!(isNodeShape && property === 'type') && !(model instanceof SwimLane && property === 'orientation')) {\n                delete clonedObject[property];\n            }\n        }\n        if (JSON.stringify(clonedObject[property]) === '[]' ||\n            JSON.stringify(clonedObject[property]) === '{}' ||\n            clonedObject[property] === undefined) {\n            delete clonedObject[property];\n        }\n    }\n    return clonedObject;\n}\n/**\n * preventArrayDefaults method \\\n *\n * @returns {void } preventArrayDefaults method .\\\n * @param {object} clonedObject - provide the clonedObject  value.\n * @param {object} defaultObject - provide the defaultObject  value.\n * @param {object} model - provide the model  value.\n * @param {string} property - provide the property  value.\n * @private\n */\n// eslint-disable-next-line\nfunction preventArrayDefaults(clonedObject, defaultObject, model, property) {\n    if (clonedObject[property].length === 0) {\n        delete clonedObject[property];\n        // eslint-disable-next-line\n    }\n    else if (clonedObject[property].every(function (element) { return typeof element === 'number'; })) {\n        var i = void 0;\n        var isSameArray = true;\n        for (i = 0; i < clonedObject[property].length; i++) {\n            if (isSameArray && clonedObject[property][i] === defaultObject[property][i]) {\n                isSameArray = true;\n            }\n            else {\n                isSameArray = false;\n            }\n        }\n        if (isSameArray) {\n            delete clonedObject[property];\n        }\n    }\n    else {\n        var i = void 0;\n        if (property === 'layers') {\n            clonedObject[property].splice(0, 1);\n            if (clonedObject[property].length === 0) {\n                delete clonedObject[property];\n            }\n        }\n        if (clonedObject[property]) {\n            for (i = clonedObject[property].length - 1; i >= 0; i--) {\n                if (property === 'nodes' || property === 'connectors') {\n                    clonedObject[property][i].wrapper = null;\n                }\n                if (property !== 'dataManager') {\n                    clonedObject[property][i] = preventDefaults(clonedObject[property][i], model[property][i], (defaultObject[property] !== undefined ? defaultObject[property][i] : []));\n                    if (JSON.stringify(clonedObject[property][i]) === '[]' ||\n                        JSON.stringify(clonedObject[property][i]) === '{}' ||\n                        clonedObject[property][i] === undefined) {\n                        clonedObject[property].splice(i, 1);\n                    }\n                }\n            }\n        }\n    }\n}\n/* eslint-disable */\n/**\n * getConstructor method \\\n *\n * @returns {object } getConstructor method .\\\n * @param {object} model - provide the model  value.\n * @param {object} defaultObject - provide the defaultObject  value.\n * @private\n */\n/* tslint:disable */\nfunction getConstructor(model, defaultObject) {\n    var obj = [];\n    var constructor;\n    var parent = new Diagram();\n    var getClassName = 'getClassName';\n    if (model[getClassName]) {\n        switch (model[getClassName]()) {\n            case 'Diagram':\n                constructor = new Diagram();\n                break;\n            case 'Node':\n                constructor = new Node(parent, '', obj);\n                break;\n            case 'Path':\n                constructor = new Path(parent, '', obj);\n                break;\n            case 'Native':\n                constructor = new Native(parent, '', obj);\n                break;\n            case 'Html':\n                constructor = new Html(parent, '', obj);\n                break;\n            case 'Image':\n                constructor = new Image(parent, '', obj);\n                break;\n            case 'Text':\n                constructor = new Text(parent, '', obj);\n                break;\n            case 'BasicShape':\n                constructor = new BasicShape(parent, '', obj);\n                break;\n            case 'FlowShape':\n                constructor = new FlowShape(parent, '', obj);\n                break;\n            case 'BpmnShape':\n                constructor = new BpmnShape(parent, '', obj);\n                break;\n            case 'UmlActivityShape':\n                constructor = new UmlActivityShape(parent, '', obj);\n                break;\n            case 'UmlClassifierShape':\n                constructor = new UmlClassifierShape(parent, '', obj);\n                break;\n            case 'SwimLane':\n                constructor = new SwimLane(parent, '', obj);\n                if (model.header) {\n                    constructor.header = new Header(parent, '', obj);\n                    constructor.header.style.fill = '';\n                }\n                break;\n            case 'ShapeAnnotation':\n                constructor = new ShapeAnnotation(parent, '', obj);\n                break;\n            case 'PointPort':\n                constructor = new PointPort(parent, '', obj);\n                break;\n            case 'BpmnGateway':\n                constructor = new BpmnGateway(parent, '', obj);\n                break;\n            case 'BpmnDataObject':\n                constructor = new BpmnDataObject(parent, '', obj);\n                break;\n            case 'BpmnEvent':\n                constructor = new BpmnEvent(parent, '', obj);\n                break;\n            case 'BpmnSubEvent':\n                constructor = new BpmnSubEvent(parent, '', obj);\n                break;\n            case 'BpmnActivity':\n                constructor = new BpmnActivity(parent, '', obj);\n                break;\n            case 'BpmnAnnotation':\n                constructor = new BpmnAnnotation(parent, '', obj);\n                break;\n            case 'MethodArguments':\n                constructor = new MethodArguments(parent, '', obj);\n                break;\n            case 'UmlClassAttribute':\n                constructor = new UmlClassAttribute(parent, '', obj);\n                break;\n            case 'UmlClassMethod':\n                constructor = new UmlClassMethod(parent, '', obj);\n                break;\n            case 'UmlClass':\n                constructor = new UmlClass(parent, '', obj);\n                break;\n            case 'UmlInterface':\n                constructor = new UmlInterface(parent, '', obj);\n                break;\n            case 'UmlEnumerationMember':\n                constructor = new UmlEnumerationMember(parent, '', obj);\n                break;\n            case 'UmlEnumeration':\n                constructor = new UmlEnumeration(parent, '', obj);\n                break;\n            case 'Lane':\n                constructor = new Lane(parent, '', obj);\n                break;\n            case 'Phase':\n                constructor = new Phase(parent, '', obj);\n                break;\n            case 'ChildContainer':\n                constructor = new ChildContainer();\n                break;\n            case 'Connector':\n                constructor = new Connector(parent, '', obj);\n                break;\n            case 'StraightSegment':\n                constructor = new StraightSegment(parent, '', obj);\n                break;\n            case 'BezierSegment':\n                constructor = new BezierSegment(parent, '', obj);\n                break;\n            case 'OrthogonalSegment':\n                constructor = new OrthogonalSegment(parent, '', obj);\n                break;\n            case 'PathAnnotation':\n                constructor = new PathAnnotation(parent, '', obj);\n                break;\n            case 'Stop':\n                constructor = new Stop(parent, '', obj);\n                break;\n            case 'Point':\n                if (!defaultObject) {\n                    constructor = new Point(parent, '', obj);\n                }\n                else {\n                    constructor = defaultObject;\n                }\n                break;\n            case 'UserHandle':\n                constructor = new UserHandle(parent, '', obj);\n                break;\n            case 'Command':\n                constructor = new Command(parent, '', obj);\n                break;\n        }\n    }\n    else {\n        constructor = defaultObject;\n    }\n    return constructor;\n}\n/* eslint-enable */\n/* eslint-disable */\n/** @private */\nexport function deserialize(model, diagram) {\n    diagram.enableServerDataBinding(false);\n    var blazorAction = diagram.blazorActions;\n    diagram.blazorActions = diagram.addConstraints(blazorAction, BlazorAction.ClearObject);\n    diagram.clear();\n    diagram.blazorActions = diagram.removeConstraints(blazorAction, BlazorAction.ClearObject);\n    diagram.protectPropertyChange(true);\n    var map = diagram.dataSourceSettings.doBinding;\n    var nodeTemp = diagram.setNodeTemplate;\n    var getDescription = diagram.getDescription;\n    var getCustomProperty = diagram.getCustomProperty;\n    var commands = {};\n    for (var _i = 0, _a = diagram.commandManager.commands; _i < _a.length; _i++) {\n        var command = _a[_i];\n        commands[command.name] = { execute: command.execute, canExecute: command.canExecute };\n    }\n    var arrangeTickHorizontal = diagram.rulerSettings.horizontalRuler.arrangeTick;\n    var arrangeTickVertical = diagram.rulerSettings.verticalRuler.arrangeTick;\n    var getLayoutInfo = diagram.layout.getLayoutInfo;\n    var getBranch = diagram.layout.getBranch;\n    var nodeDefaults = diagram.getNodeDefaults;\n    var connectorDefaults = diagram.getConnectorDefaults;\n    var dataObj = JSON.parse(model);\n    dataObj = upgrade(dataObj);\n    diagram.contextMenuSettings = dataObj.contextMenuSettings || {};\n    diagram.constraints = dataObj.constraints || DiagramConstraints.Default;\n    diagram.tool = dataObj.tool || DiagramTools.Default;\n    diagram.bridgeDirection = dataObj.bridgeDirection || 'Top';\n    diagram.pageSettings = dataObj.pageSettings || {};\n    diagram.drawingObject = dataObj.drawingObject || undefined;\n    diagram.tooltip = dataObj.tooltip || {};\n    diagram.addInfo = dataObj.addInfo || undefined;\n    diagram.getDescription = getDescription;\n    diagram.scrollSettings = dataObj.scrollSettings || {};\n    diagram.commandManager = dataObj.commandManager || {};\n    diagram.layers = dataObj.layers || [];\n    diagram.rulerSettings.horizontalRuler.arrangeTick = arrangeTickHorizontal;\n    diagram.rulerSettings.verticalRuler.arrangeTick = arrangeTickVertical;\n    for (var _b = 0, _c = diagram.commandManager.commands; _b < _c.length; _b++) {\n        var cmd = _c[_b];\n        if (commands[cmd.name]) {\n            cmd.execute = commands[cmd.name].execute;\n            cmd.canExecute = commands[cmd.name].canExecute;\n        }\n    }\n    diagram.backgroundColor = dataObj.backgroundColor || 'transparent';\n    diagram.basicElements = dataObj.basicElements || [];\n    diagram.connectors = dataObj.connectors || [];\n    diagram.dataSourceSettings = dataObj.dataSourceSettings || {};\n    diagram.dataSourceSettings.doBinding = map;\n    diagram.height = dataObj.height || '100%';\n    diagram.setNodeTemplate = nodeTemp;\n    diagram.getConnectorDefaults = connectorDefaults;\n    diagram.getNodeDefaults = nodeDefaults;\n    diagram.getCustomProperty = getCustomProperty;\n    diagram.mode = dataObj.mode || 'SVG';\n    if (dataObj.nodes) {\n        for (var i = 0; i < dataObj.nodes.length; i++) {\n            if (dataObj.nodes[i].shape && dataObj.nodes[i].shape.type === 'SwimLane') {\n                if (dataObj.nodes[i].wrapper == null) {\n                    {\n                        dataObj.nodes[i].wrapper = {\n                            actualSize: { width: dataObj.nodes[i].width, height: dataObj.nodes[i].height },\n                            offsetX: dataObj.nodes[i].offsetX, offsetY: dataObj.nodes[i].offsetY\n                        };\n                    }\n                }\n                pasteSwimLane(dataObj.nodes[i], undefined, undefined, undefined, undefined, true);\n            }\n        }\n    }\n    diagram.nodes = dataObj.nodes || [];\n    diagram.rulerSettings = dataObj.rulerSettings || {};\n    diagram.snapSettings = dataObj.snapSettings || {};\n    diagram.width = dataObj.width || '100%';\n    diagram.layout = dataObj.layout || {};\n    if (dataObj.layout && dataObj.layout.type !== \"None\") {\n        diagram.canLayout = false;\n    }\n    diagram.layout.getLayoutInfo = getFunction(getLayoutInfo);\n    diagram.layout.getBranch = getFunction(getBranch);\n    diagram.diagramActions = 0;\n    diagram.isLoading = true;\n    diagram.protectPropertyChange(false);\n    var key = 'refresh';\n    var component;\n    for (var i = 0; i < diagram.views.length; i++) {\n        component = diagram.views[diagram.views[i]];\n        diagram.blazorActions = diagram.addConstraints(blazorAction, BlazorAction.ClearObject);\n        component.refresh();\n        diagram.blazorActions = diagram.removeConstraints(blazorAction, BlazorAction.ClearObject);\n        if (component instanceof Diagram) {\n            diagram.element.classList.add('e-diagram');\n        }\n    }\n    if (dataObj.selectedItems) {\n        dataObj.selectedItems.nodes = [];\n        dataObj.selectedItems.connectors = [];\n    }\n    diagram.selectedItems = dataObj.selectedItems;\n    diagram.enableServerDataBinding(true);\n    diagram.canLayout = true;\n    diagram.swimlaneChildTable = {};\n    diagram.swimlaneZIndexTable = {};\n    return dataObj;\n}\n/* eslint-enable */\n/**\n * upgrade method \\\n *\n * @returns {Diagram } upgrade method .\\\n * @param {Diagram} dataObj - provide the model  value.\n * @private\n */\nexport function upgrade(dataObj) {\n    if (dataObj && (dataObj.version === undefined || (dataObj.version < 17.1)) && dataObj.nodes) {\n        var nodes = dataObj.nodes;\n        for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n            var node = nodes_1[_i];\n            if (node && node.ports && node.ports.length > 0) {\n                for (var _a = 0, _b = node.ports; _a < _b.length; _a++) {\n                    var port = _b[_a];\n                    if (port && port.constraints && port.constraints === PortConstraints.None) {\n                        port.constraints = PortConstraints.Default;\n                    }\n                }\n            }\n        }\n    }\n    return dataObj;\n}\n/**\n * updateStyle method \\\n *\n * @returns {void } updateStyle method .\\\n * @param {TextStyleModel} changedObject - provide the changedObject  value.\n * @param {DiagramElement} target - provide the target  value.\n * @private\n */\nexport function updateStyle(changedObject, target) {\n    //since text style model is the super set of shape style model, we used text style model\n    var style = target.style;\n    var textElement = target;\n    target.canApplyStyle = true;\n    for (var _i = 0, _a = Object.keys(changedObject); _i < _a.length; _i++) {\n        var key = _a[_i];\n        switch (key) {\n            case 'fill':\n                style.fill = changedObject.fill;\n                if (style instanceof StrokeStyle) {\n                    /* tslint:disable:no-string-literal */\n                    style['fill'] = 'transparent';\n                }\n                break;\n            case 'textOverflow':\n                style.textOverflow = changedObject.textOverflow;\n                break;\n            case 'opacity':\n                style.opacity = changedObject.opacity;\n                break;\n            case 'strokeColor':\n                style.strokeColor = changedObject.strokeColor;\n                break;\n            case 'strokeDashArray':\n                style.strokeDashArray = changedObject.strokeDashArray;\n                break;\n            case 'strokeWidth':\n                style.strokeWidth = changedObject.strokeWidth;\n                break;\n            case 'bold':\n                style.bold = changedObject.bold;\n                break;\n            case 'color':\n                style.color = changedObject.color;\n                break;\n            case 'textWrapping':\n                style.textWrapping = changedObject.textWrapping;\n                break;\n            case 'fontFamily':\n                style.fontFamily = changedObject.fontFamily;\n                break;\n            case 'fontSize':\n                style.fontSize = changedObject.fontSize;\n                break;\n            case 'italic':\n                style.italic = changedObject.italic;\n                break;\n            case 'textAlign':\n                style.textAlign = changedObject.textAlign;\n                break;\n            case 'whiteSpace':\n                style.whiteSpace = changedObject.whiteSpace;\n                break;\n            case 'textDecoration':\n                style.textDecoration = changedObject.textDecoration;\n                break;\n            case 'gradient':\n                if (style.gradient) {\n                    updateGradient(changedObject.gradient, style.gradient);\n                    break;\n                }\n        }\n    }\n    if (target instanceof TextElement) {\n        textElement.refreshTextElement();\n    }\n}\n/**\n * updateGradient method \\\n *\n * @returns {void } updateGradient method .\\\n * @param {GradientModel | LinearGradientModel | RadialGradientModel} changedGradient - provide the changedGradient  value.\n * @param {GradientModel | LinearGradientModel | RadialGradientModel} targetGradient - provide the targetGradient  value.\n * @private\n */\nfunction updateGradient(changedGradient, targetGradient) {\n    for (var _i = 0, _a = Object.keys(changedGradient); _i < _a.length; _i++) {\n        var key = _a[_i];\n        switch (key) {\n            case 'type':\n                targetGradient.type = changedGradient.type;\n                break;\n            case 'x1':\n                targetGradient.x1 = changedGradient.x1;\n                break;\n            case 'x2':\n                targetGradient.x2 = changedGradient.x2;\n                break;\n            case 'y1':\n                targetGradient.y1 = changedGradient.y1;\n                break;\n            case 'y2':\n                targetGradient.y2 = changedGradient.y2;\n                break;\n            case 'cx':\n                targetGradient.cx = changedGradient.cx;\n                break;\n            case 'cy':\n                targetGradient.cy = changedGradient.cy;\n                break;\n            case 'fx':\n                targetGradient.fx = changedGradient.fx;\n                break;\n            case 'fy':\n                targetGradient.fy = changedGradient.fy;\n                break;\n            case 'r':\n                targetGradient.r = changedGradient.r;\n                break;\n            case 'stops':\n                targetGradient.stops = changedGradient.stops;\n                break;\n        }\n    }\n}\n/* eslint-disable */\n/**\n * updateHyperlink method \\\n *\n * @returns {void } updateHyperlink method .\\\n * @param {HyperlinkModel} changedObject - provide the changedObject  value.\n * @param {DiagramElement} target - provide the target  value.\n * @param {AnnotationModel} actualAnnotation - provide the actualAnnotation  value.\n * @private\n */\nexport function updateHyperlink(changedObject, target, actualAnnotation) {\n    var textElement = target;\n    var hyperlink = textElement.hyperlink;\n    for (var _i = 0, _a = Object.keys(changedObject); _i < _a.length; _i++) {\n        var key = _a[_i];\n        switch (key) {\n            case 'color':\n                textElement.style.color = hyperlink.color = changedObject.color;\n                break;\n            case 'content':\n                textElement.content = hyperlink.content = changedObject.content || hyperlink.link;\n                break;\n            case 'link':\n                var labelStyle = actualAnnotation.style;\n                textElement.style.color = changedObject.link ? hyperlink.color : labelStyle.color;\n                textElement.style.textDecoration = changedObject.link ? hyperlink.textDecoration : actualAnnotation.style.textDecoration;\n                textElement.content = changedObject.link ? hyperlink.content || changedObject.link : actualAnnotation.content;\n                hyperlink.link = changedObject.link;\n                break;\n            case 'textDecoration':\n                textElement.style.textDecoration = hyperlink.textDecoration = changedObject.textDecoration;\n                break;\n        }\n    }\n}\n/* eslint-enable */\n/**\n * updateShapeContent method \\\n *\n * @returns {void } updateShapeContent method .\\\n * @param {DiagramElement} content - provide the content  value.\n * @param {Node} actualObject - provide the actualObject  value.\n * @param {Diagram} diagram - provide the diagram  value.\n * @private\n */\nexport function updateShapeContent(content, actualObject, diagram) {\n    content.width = actualObject.width;\n    content.height = actualObject.height;\n    content.minHeight = actualObject.minHeight;\n    content.maxHeight = actualObject.maxHeight;\n    content.minWidth = actualObject.minWidth;\n    content.maxWidth = actualObject.maxWidth;\n    content.horizontalAlignment = actualObject.wrapper.children[0].horizontalAlignment;\n    content.verticalAlignment = actualObject.wrapper.children[0].verticalAlignment;\n    content.relativeMode = actualObject.wrapper.children[0].relativeMode;\n    content.visible = actualObject.wrapper.children[0].visible;\n    if (actualObject.shape instanceof Text) {\n        content.margin = actualObject.shape.margin;\n    }\n    content.id = actualObject.wrapper.children[0].id;\n    content.style = actualObject.style;\n    //let view: View;\n    for (var _i = 0, _a = diagram.views; _i < _a.length; _i++) {\n        var elementId = _a[_i];\n        removeElement(actualObject.id + '_groupElement', elementId);\n        removeElement(actualObject.id + '_content_groupElement', elementId);\n        removeElement(actualObject.id + '_html_element', elementId);\n    }\n    actualObject.wrapper.children.splice(0, 1);\n    actualObject.wrapper.children.splice(0, 0, content);\n}\n/* eslint-disable */\n/**\n * updateShape method \\\n *\n * @returns {void } updateShape method .\\\n * @param {Node} node - provide the node  value.\n * @param {Node} actualObject - provide the actualObject  value.\n * @param {Node} oldObject - provide the oldObject  value.\n * @param {Diagram} diagram - provide the diagram  value.\n * @private\n */\nexport function updateShape(node, actualObject, oldObject, diagram) {\n    var content = new DiagramElement();\n    var i;\n    //let textStyle: TextStyleModel; let nodeStyle: TextStyleModel;\n    switch (node.shape.type) {\n        case 'Path':\n            var pathContent = new PathElement();\n            pathContent.data = actualObject.shape.data;\n            content = pathContent;\n            updateShapeContent(content, actualObject, diagram);\n            break;\n        case 'Image':\n            var imageContent = new ImageElement();\n            imageContent.source = actualObject.shape.source;\n            imageContent.imageAlign = actualObject.shape.align;\n            imageContent.imageScale = actualObject.shape.scale;\n            content = imageContent;\n            updateShapeContent(content, actualObject, diagram);\n            break;\n        case 'Text':\n            //issue\n            var textContent = new TextElement();\n            //  (textContent as TextElement).content = (node.shape as TextModel).content;\n            content = textContent;\n            updateShapeContent(content, actualObject, diagram);\n            break;\n        case 'Basic':\n            var element = ((isBlazor() ? actualObject.shape.basicShape === 'Rectangle' :\n                actualObject.shape.shape === 'Rectangle')) ? new DiagramElement() : new PathElement();\n            if ((!isBlazor() && actualObject.shape.shape === 'Polygon') ||\n                (isBlazor() && actualObject.shape.basicShape === 'Polygon')) {\n                element.data = getPolygonPath(actualObject.shape.points);\n            }\n            else {\n                element.data = getBasicShape((isBlazor() ? actualObject.shape.basicShape :\n                    actualObject.shape.shape));\n            }\n            updateShapeContent(content, actualObject, diagram);\n            if ((!isBlazor() && actualObject.shape.shape === 'Rectangle') ||\n                (isBlazor() && actualObject.shape.basicShape === 'Rectangle')) {\n                element.cornerRadius = actualObject.shape.cornerRadius;\n            }\n            content = element;\n            break;\n        case 'Flow':\n            /* eslint-disable */\n            var flowShapeElement = new PathElement();\n            var shape = (isBlazor()) ? actualObject.shape.flowShape : actualObject.shape.shape;\n            flowShapeElement.data = getFlowShape(shape);\n            content = flowShapeElement;\n            updateShapeContent(content, actualObject, diagram);\n            break;\n        case 'Native':\n            var nativeContent = new DiagramNativeElement(node.id, diagram.element.id);\n            nativeContent.content = actualObject.shape.content;\n            nativeContent.scale = actualObject.shape.scale;\n            content = nativeContent;\n            updateShapeContent(content, actualObject, diagram);\n            break;\n        case 'HTML':\n            var htmlContent = new DiagramHtmlElement(actualObject.id, diagram.element.id);\n            htmlContent.content = actualObject.shape.content;\n            content = htmlContent;\n            updateShapeContent(content, actualObject, diagram);\n    }\n    if (node.shape.type === undefined || node.shape.type === oldObject.shape.type || (isBlazor() && node.shape.type === 'UmlActivity')) {\n        updateContent(node, actualObject, diagram, oldObject);\n    }\n    else {\n        content.width = actualObject.wrapper.children[0].width;\n        content.height = actualObject.wrapper.children[0].height;\n        if (actualObject.shape instanceof Text) {\n            content.margin = actualObject.shape.margin;\n        }\n        content.style = actualObject.style;\n        actualObject.wrapper.children[0] = content;\n    }\n}\n/* eslint-enable */\n/**\n * updateContent method \\\n *\n * @returns {void } updateContent method .\\\n * @param {Node} newValues - provide the newValues  value.\n * @param {Node} actualObject - provide the actualObject  value.\n * @param {Diagram} diagram - provide the diagram  value.\n * @param {Node} oldObject - provide the oldObject  value.\n * @private\n */\nexport function updateContent(newValues, actualObject, diagram, oldObject) {\n    if (Object.keys(newValues.shape).length > 0) {\n        if (actualObject.shape.type === 'Path' && newValues.shape.data !== undefined) {\n            actualObject.wrapper.children[0].data = newValues.shape.data;\n        }\n        else if (actualObject.shape.type === 'Text' && newValues.shape.content !== undefined) {\n            actualObject.wrapper.children[0].content = newValues.shape.content;\n        }\n        else if (actualObject.shape.type === 'Image' && newValues.shape.source !== undefined) {\n            actualObject.wrapper.children[0].source = newValues.shape.source;\n        }\n        else if (actualObject.shape.type === 'Native') {\n            var nativeElement = void 0;\n            for (var i = 0; i < diagram.views.length; i++) {\n                nativeElement = getDiagramElement(actualObject.wrapper.children[0].id + '_native_element', diagram.views[i]);\n                if (newValues.shape.content !== undefined && nativeElement) {\n                    nativeElement.removeChild(nativeElement.children[0]);\n                    actualObject.wrapper.children[0].content = newValues.shape.content;\n                    nativeElement.appendChild(getContent(actualObject.wrapper.children[0], false));\n                }\n            }\n            actualObject.wrapper.children[0].scale = newValues.shape.scale ?\n                newValues.shape.scale : actualObject.wrapper.children[0].scale;\n        }\n        else if (actualObject.shape.type === 'HTML') {\n            var htmlElement = void 0;\n            for (var i = 0; i < diagram.views.length; i++) {\n                htmlElement = getDiagramElement(actualObject.wrapper.children[0].id + '_html_element', diagram.views[i]);\n                if (htmlElement) {\n                    htmlElement.removeChild(htmlElement.children[0]);\n                    actualObject.wrapper.children[0].content = newValues.shape.content;\n                    htmlElement.appendChild(getContent(actualObject.wrapper.children[0], true));\n                }\n            }\n        }\n        else if (actualObject.shape.type === 'Flow' && ((isBlazor() && newValues.shape.flowShape !== undefined) ||\n            newValues.shape.shape !== undefined)) {\n            actualObject.shape.shape = isBlazor() ? newValues.shape.flowShape :\n                newValues.shape.shape;\n            var shapes = actualObject.shape.shape;\n            var flowshapedata = getFlowShape(shapes.toString());\n            actualObject.wrapper.children[0].data = flowshapedata;\n        }\n        else if (actualObject.shape.type === 'UmlActivity' &&\n            ((isBlazor() && newValues.shape.umlActivityShape !== undefined) ||\n                (!isBlazor() && newValues.shape.shape !== undefined))) {\n            updateUmlActivityNode(actualObject, newValues);\n        }\n        else if (newValues.shape.cornerRadius !== undefined) {\n            actualObject.wrapper.children[0].cornerRadius = newValues.shape.cornerRadius;\n        }\n        else if (actualObject.shape.type === 'Basic' && (oldObject && oldObject.shape.shape === 'Rectangle')) {\n            var basicshape = new PathElement();\n            var basicshapedata = getBasicShape((isBlazor()) ? actualObject.shape.basicShape :\n                actualObject.shape.shape);\n            basicshape.data = basicshapedata;\n            var content = basicshape;\n            updateShapeContent(content, actualObject, diagram);\n        }\n        else if (((isBlazor() && newValues.shape.basicShape !== undefined) ||\n            newValues.shape.shape !== undefined)) {\n            actualObject.shape.shape = isBlazor() ? newValues.shape.basicShape :\n                newValues.shape.shape;\n            var shapes = actualObject.shape.shape;\n            var basicShapeData = getBasicShape(shapes.toString());\n            actualObject.wrapper.children[0].data = basicShapeData;\n        }\n    }\n    actualObject.wrapper.children[0].canMeasurePath = true;\n}\n/**\n * updateUmlActivityNode method \\\n *\n * @returns {void } updateUmlActivityNode method .\\\n * @param {Node} actualObject - provide the newValues  value.\n * @param {Node} newValues - provide the actualObject  value.\n * @private\n */\nexport function updateUmlActivityNode(actualObject, newValues) {\n    if (!isBlazor()) {\n        actualObject.shape.shape = newValues.shape.shape;\n    }\n    else {\n        actualObject.shape.umlActivityShape = newValues.shape.umlActivityShape;\n    }\n    var shapes = !isBlazor() ? actualObject.shape.shape :\n        actualObject.shape.umlActivityShape;\n    var umlActivityShapeData = getUMLActivityShape(shapes.toString());\n    if ((isBlazor() && actualObject.shape.umlActivityShape === 'InitialNode') ||\n        (!isBlazor() && actualObject.shape.shape === 'InitialNode')) {\n        actualObject.wrapper.children[0].style.fill = 'black';\n    }\n    else if ((!isBlazor() && (actualObject.shape.shape === 'ForkNode' ||\n        actualObject.shape.shape === 'JoinNode')) ||\n        ((isBlazor() && (actualObject.shape.umlActivityShape === 'ForkNode' ||\n            actualObject.shape.umlActivityShape === 'JoinNode')))) {\n        actualObject.wrapper.children[0].style.fill = 'black';\n    }\n    else if ((!isBlazor() && actualObject.shape.shape === 'FinalNode') ||\n        (isBlazor() && actualObject.shape.umlActivityShape === 'FinalNode')) {\n        if (actualObject instanceof Node) {\n            actualObject.wrapper = getUMLFinalNode(actualObject);\n        }\n    }\n    if (umlActivityShapeData) {\n        actualObject.wrapper.children[0].data = umlActivityShapeData;\n    }\n}\n/**\n * getUMLFinalNode method \\\n *\n * @returns {Canvas } getUMLFinalNode method .\\\n * @param {Node} node - provide the newValues  value.\n * @private\n */\nexport function getUMLFinalNode(node) {\n    var finalNodeShape = new Canvas();\n    finalNodeShape.style.fill = 'transparent';\n    //childNode0\n    var pathData = 'M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25' +\n        ' C 50 38.79 38.78 50 25 50';\n    var innerFinalNode = new PathElement();\n    innerFinalNode.data = pathData;\n    innerFinalNode.id = node.id + '_0_finalNode';\n    innerFinalNode.horizontalAlignment = 'Center';\n    innerFinalNode.verticalAlignment = 'Center';\n    innerFinalNode.relativeMode = 'Object';\n    innerFinalNode.style.strokeColor = node.style.strokeColor;\n    innerFinalNode.style.strokeWidth = node.style.strokeWidth;\n    //childNode1\n    var outerFinalNode = new PathElement();\n    outerFinalNode.data = pathData;\n    outerFinalNode.id = node.id + '_1_finalNode';\n    outerFinalNode.horizontalAlignment = 'Center';\n    outerFinalNode.verticalAlignment = 'Center';\n    outerFinalNode.relativeMode = 'Object';\n    outerFinalNode.style.fill = node.style.fill;\n    outerFinalNode.style.strokeColor = node.style.strokeColor;\n    outerFinalNode.style.strokeWidth = node.style.strokeWidth;\n    //append child and set style\n    finalNodeShape.children = [innerFinalNode, outerFinalNode];\n    finalNodeShape.children[0].width = node.width;\n    finalNodeShape.children[0].height = node.height;\n    finalNodeShape.children[1].height = node.height / 1.5;\n    finalNodeShape.children[1].width = node.width / 1.5;\n    finalNodeShape.style.strokeWidth = 0;\n    finalNodeShape.style.strokeColor = 'transparent';\n    return finalNodeShape;\n}\n/**\n * getUMLActivityShapes method \\\n *\n * @returns {DiagramElement } getUMLActivityShapes method .\\\n * @param {PathElement} umlActivityShape - provide the umlActivityShape  value.\n * @param {DiagramElement} content - provide the content  value.\n * @param {Node} node - provide the node  value.\n * @private\n */\nexport function getUMLActivityShapes(umlActivityShape, content, node) {\n    var shape = (isBlazor() ? node.shape.umlActivityShape : node.shape.shape);\n    var umlActivityShapeData = getUMLActivityShape(shape);\n    umlActivityShape.data = umlActivityShapeData;\n    content = umlActivityShape;\n    switch (shape) {\n        case 'StructuredNode':\n            if (node.annotations) {\n                for (var i = 0; i < node.annotations.length; i++) {\n                    node.annotations[i].content = '<<' + node.annotations[i].content + '>>';\n                }\n            }\n            content = umlActivityShape;\n            break;\n        case 'FinalNode':\n            content = getUMLFinalNode(node);\n            break;\n    }\n    return content;\n}\n/**\n * removeGradient method \\\n *\n * @returns {void } removeGradient method .\\\n * @param {string} svgId - provide the umlActivityShape  value.\n * @private\n */\nexport function removeGradient(svgId) {\n    removeElement(svgId + '_linear');\n    removeElement(svgId + '_radial');\n}\n/**\n * removeItem method \\\n *\n * @returns {void } removeItem method .\\\n * @param {string[]} array - provide the umlActivityShape  value.\n * @param {string} item - provide the umlActivityShape  value.\n * @private\n */\nexport function removeItem(array, item) {\n    var index = array.indexOf(item);\n    if (index >= 0) {\n        array.splice(index, 1);\n    }\n}\n/**\n * updateConnector method \\\n *\n * @returns {void } updateConnector method .\\\n * @param {Connector} connector - provide the connector  value.\n * @param {PointModel[]} points - provide the points  value.\n * @param {DiagramAction} diagramActions - provide the diagramActions  value.\n * @private\n */\nexport function updateConnector(connector, points, diagramActions) {\n    var anglePoint; //let srcDecorator: DecoratorModel;\n    //let targetPoint: PointModel;\n    connector.intermediatePoints = points;\n    connector.updateSegmentElement(connector, points, connector.wrapper.children[0], diagramActions);\n    var srcDecorator = connector.sourceDecorator;\n    if (connector.type === 'Bezier') {\n        var firstSegment = connector.segments[0];\n        var lastSegment = connector.segments[connector.segments.length - 1];\n        anglePoint = [!Point.isEmptyPoint(lastSegment.point2) ? lastSegment.point2 : lastSegment.bezierPoint2,\n            !Point.isEmptyPoint(firstSegment.point1) ? firstSegment.point1 : firstSegment.bezierPoint1];\n    }\n    else {\n        anglePoint = connector.intermediatePoints;\n    }\n    points = connector.clipDecorators(connector, points, diagramActions);\n    var element = connector.wrapper.children[0];\n    element.canMeasurePath = true;\n    element = connector.wrapper.children[1];\n    connector.updateDecoratorElement(element, points[0], anglePoint[1], srcDecorator);\n    //const targetPoint: PointModel = connector.targetPoint;\n    var tarDecorator = connector.targetDecorator;\n    element = connector.wrapper.children[2];\n    connector.updateDecoratorElement(element, points[points.length - 1], anglePoint[anglePoint.length - 2], tarDecorator);\n    connector.updateShapeElement(connector);\n}\n/**\n * getUserHandlePosition method \\\n *\n * @returns {PointModel } getUserHandlePosition method .\\\n * @param {SelectorModel} selectorItem - provide the connector  value.\n * @param {UserHandleModel} handle - provide the handle  value.\n * @param {Transforms} transform - provide the transform  value.\n * @private\n */\nexport function getUserHandlePosition(selectorItem, handle, transform) {\n    var wrapper = selectorItem.wrapper;\n    //let positionPoints: PointModel;\n    var bounds = wrapper.bounds;\n    var offset = handle.offset;\n    var size = handle.size / transform.scale;\n    var margin = handle.margin;\n    var point;\n    var left = wrapper.offsetX - wrapper.actualSize.width * wrapper.pivot.x;\n    var top = wrapper.offsetY - wrapper.actualSize.height * wrapper.pivot.y;\n    point = { x: 0, y: 0 };\n    if (selectorItem.nodes.length > 0) {\n        switch (handle.side) {\n            case 'Top':\n                point.x += left + bounds.width * offset;\n                point.y += top - (size / 2 + 12.5);\n                break;\n            case 'Bottom':\n                point.x += left + offset * bounds.width;\n                point.y += top + wrapper.actualSize.height + (size / 2 + 12.5);\n                break;\n            case 'Left':\n                point.x += left - (size / 2 + 12.5);\n                point.y += top + offset * bounds.height;\n                break;\n            case 'Right':\n                point.x += left + wrapper.actualSize.width + (size / 2 + 12.5);\n                point.y += top + offset * bounds.height;\n                break;\n        }\n        point.x += ((margin.left - margin.right) / transform.scale) +\n            (size / 2) * (handle.horizontalAlignment === 'Center' ? 0 : (handle.horizontalAlignment === 'Right' ? -1 : 1));\n        point.y += ((margin.top - margin.bottom) / transform.scale) +\n            (size / 2) * (handle.verticalAlignment === 'Center' ? 0 : (handle.verticalAlignment === 'Top' ? -1 : 1));\n    }\n    else if (selectorItem.connectors.length > 0) {\n        var connector = selectorItem.connectors[0];\n        var annotation = { offset: offset };\n        var connectorOffset = getOffsetOfConnector(connector.intermediatePoints, annotation);\n        var index = connectorOffset.index;\n        point = connectorOffset.point;\n        var getPointloop = getAnnotationPosition(connector.intermediatePoints, annotation, bounds);\n        //const points: PointModel[] = connector.intermediatePoints;\n        //const offsetLength: number;\n        var angle = getPointloop.angle;\n        var matrix = identityMatrix();\n        rotateMatrix(matrix, -angle, connector.intermediatePoints[index].x, connector.intermediatePoints[index].y);\n        point = transformPointByMatrix(matrix, point);\n        point.x += (margin.left - margin.right) +\n            (size / 2) * (handle.horizontalAlignment === 'Center' ? 0 : (handle.horizontalAlignment === 'Right' ? -1 : 1));\n        point.y += (margin.top - margin.bottom) +\n            (size / 2) * (handle.verticalAlignment === 'Center' ? 0 : (handle.verticalAlignment === 'Top' ? -1 : 1));\n        matrix = identityMatrix();\n        rotateMatrix(matrix, angle, connector.intermediatePoints[index].x, connector.intermediatePoints[index].y);\n        point = transformPointByMatrix(matrix, point);\n    }\n    if (wrapper.rotateAngle !== 0 || wrapper.parentTransform !== 0) {\n        var matrix = identityMatrix();\n        rotateMatrix(matrix, wrapper.rotateAngle + wrapper.parentTransform, wrapper.offsetX, wrapper.offsetY);\n        point = transformPointByMatrix(matrix, point);\n    }\n    return point;\n}\n/**\n * canResizeCorner method \\\n *\n * @returns {SelectorConstraints } canResizeCorner method .\\\n * @param {string} selectorConstraints - provide the selectorConstraints  value.\n * @param {string} action - provide the selectorConstraints  value.\n * @param {ThumbsConstraints} thumbsConstraints - provide the thumbsConstraints  value.\n * @param {Selector} selectedItems - provide the selectedItems  value.\n * @private\n */\nexport function canResizeCorner(selectorConstraints, action, thumbsConstraints, selectedItems) {\n    if (selectedItems.annotation) {\n        if (canResize(selectedItems.annotation)) {\n            return true;\n        }\n    }\n    else if ((SelectorConstraints[action] & selectorConstraints) && (ThumbsConstraints[action] & thumbsConstraints)) {\n        return true;\n    }\n    return false;\n}\n/**\n * canShowCorner method \\\n *\n * @returns {boolean } canShowCorner method .\\\n * @param {SelectorConstraints} selectorConstraints - provide the selectorConstraints  value.\n * @param {string} action - provide the thumbsConstraints  value.\n * @private\n */\nexport function canShowCorner(selectorConstraints, action) {\n    if (SelectorConstraints[action] & selectorConstraints) {\n        return true;\n    }\n    return false;\n}\n/**\n * checkPortRestriction method \\\n *\n * @returns {number } checkPortRestriction method .\\\n * @param {PointPortModel} port - provide the port  value.\n * @param {PortVisibility} portVisibility - provide the portVisibility  value.\n * @private\n */\nexport function checkPortRestriction(port, portVisibility) {\n    return port.visibility & portVisibility;\n}\n/**\n * findAnnotation method \\\n *\n * @returns {ShapeAnnotationModel | PathAnnotationModel | TextModel } findAnnotation method .\\\n * @param { NodeModel | ConnectorModel} node - provide the port  value.\n * @param {string} id - provide the portVisibility  value.\n * @private\n */\nexport function findAnnotation(node, id) {\n    var annotation;\n    if (node.shape.type === 'Text') {\n        annotation = (node.shape);\n    }\n    else {\n        var annotationId = id.split('_');\n        id = annotationId[annotationId.length - 1];\n        for (var i = 0; i < node.annotations.length; i++) {\n            if (id === node.annotations[i].id) {\n                annotation = node.annotations[i];\n            }\n        }\n    }\n    return annotation;\n}\n/**\n * findPort method \\\n *\n * @returns {PointPortModel} findPort method .\\\n * @param { NodeModel | ConnectorModel} node - provide the port  value.\n * @param {string} id - provide the portVisibility  value.\n * @private\n */\nexport function findPort(node, id) {\n    var port;\n    var portId = id.split('_');\n    id = portId[portId.length - 1];\n    if (node) {\n        node = node;\n        for (var i = 0; i < node.ports.length; i++) {\n            if (id === node.ports[i].id) {\n                return node.ports[i];\n            }\n        }\n    }\n    return port;\n}\n/**\n * getInOutConnectPorts method \\\n *\n * @returns {PointPortModel} getInOutConnectPorts method .\\\n * @param { NodeModel} node - provide the port  value.\n * @param {boolean} isInConnect - provide the portVisibility  value.\n * @private\n */\nexport function getInOutConnectPorts(node, isInConnect) {\n    var port = {};\n    var i = 0;\n    if (node.ports) {\n        var ports = node.ports;\n        for (i = 0; i < ports.length; i++) {\n            if (isInConnect) {\n                if ((ports[i].constraints & PortConstraints.InConnect)) {\n                    port = ports[i];\n                }\n            }\n            else {\n                if ((ports[i].constraints & PortConstraints.OutConnect)) {\n                    port = ports[i];\n                }\n            }\n        }\n    }\n    return port;\n}\n/**\n * findObjectIndex method \\\n *\n * @returns {PointPortModel} findObjectIndex method .\\\n * @param { NodeModel | ConnectorModel} node - provide the node  value.\n * @param {string} id - provide the string  value.\n * @param {boolean} annotation - provide the boolean  value.\n * @private\n */\nexport function findObjectIndex(node, id, annotation) {\n    //let index: number;\n    var collection = (annotation) ? node.annotations : node.ports;\n    for (var i = 0; i < collection.length; i++) {\n        if (collection[i].id === id) {\n            return (i).toString();\n        }\n    }\n    return '-1';\n}\n/**\n * getObjectFromCollection method \\\n *\n * @returns {boolean} getObjectFromCollection method .\\\n * @param { (NodeModel | ConnectorModel)[] } obj - provide the node  value.\n * @param {string} id - provide the string  value.\n * @private\n */\nexport function getObjectFromCollection(obj, id) {\n    var i;\n    for (i = 0; i < obj.length; i++) {\n        if (id === obj[i].id) {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * scaleElement method \\\n *\n * @returns {void} scaleElement method .\\\n * @param { DiagramElement } element - provide the element  value.\n * @param {number} sw - provide the string  value.\n * @param {number} sh - provide the string  value.\n * @param {DiagramElement} refObject - provide the refObject  value.\n * @private\n */\nexport function scaleElement(element, sw, sh, refObject) {\n    if (element.width !== undefined && element.height !== undefined) {\n        element.width *= sw;\n        element.height *= sh;\n    }\n    if (element instanceof Container) {\n        var matrix = identityMatrix();\n        var width = refObject.width || refObject.actualSize.width;\n        var height = refObject.height || refObject.actualSize.height;\n        if (width !== undefined && height !== undefined) {\n            var x = refObject.offsetX - width * refObject.pivot.x;\n            var y = refObject.offsetY - height * refObject.pivot.y;\n            var refPoint = {\n                x: x + width * refObject.pivot.x,\n                y: y + height * refObject.pivot.y\n            };\n            refPoint = rotatePoint(refObject.rotateAngle, refObject.offsetX, refObject.offsetY, refPoint);\n            rotateMatrix(matrix, -refObject.rotateAngle, refPoint.x, refPoint.y);\n            scaleMatrix(matrix, sw, sh, refPoint.x, refPoint.y);\n            rotateMatrix(matrix, refObject.rotateAngle, refPoint.x, refPoint.y);\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                if (child.width !== undefined && child.height !== undefined) {\n                    var newPosition = transformPointByMatrix(matrix, { x: child.offsetX, y: child.offsetY });\n                    child.offsetX = newPosition.x;\n                    child.offsetY = newPosition.y;\n                    scaleElement(child, sw, sh, refObject);\n                }\n            }\n        }\n    }\n}\n/**\n * scaleElement method \\\n *\n * @returns {void} scaleElement method .\\\n * @param { Node } obj - provide the obj  value.\n * @param {number} x - provide the x  value.\n * @param {number} y - provide the y  value.\n * @param {DiagramElement} nameTable - provide the refObject  value.\n * @param {DiagramElement} drop - provide the drop  value.\n * @param {DiagramElement} diagram - provide the diagram  value.\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function arrangeChild(obj, x, y, nameTable, drop, diagram) {\n    var child = obj.children;\n    var node;\n    for (var i = 0; i < child.length; i++) {\n        node = nameTable[child[i]];\n        if (node) {\n            if (node.children) {\n                arrangeChild(node, x, y, nameTable, drop, diagram);\n            }\n            else {\n                node.offsetX -= x;\n                node.offsetY -= y;\n                if (!drop) {\n                    //let content: DiagramElement;\n                    //let container: Container;\n                    nameTable[node.id] = node;\n                    var container = node.initContainer();\n                    if (!container.children) {\n                        container.children = [];\n                    }\n                    var content = node.init(diagram);\n                    container.children.push(content);\n                    container.measure(new Size(node.width, node.height));\n                    container.arrange(container.desiredSize);\n                }\n            }\n        }\n    }\n}\n/**\n * insertObject method \\\n *\n * @returns {void} insertObject method .\\\n * @param { NodeModel | ConnectorModel } obj - provide the obj  value.\n * @param { string } key - provide the obj  value.\n * @param { Object[]} collection - provide the x  value.\n * @private\n */\nexport function insertObject(obj, key, collection) {\n    if (collection.length === 0) {\n        collection.push(obj);\n    }\n    else if (collection.length === 1) {\n        if (collection[0][key] > obj[key]) {\n            collection.splice(0, 0, obj);\n        }\n        else {\n            collection.push(obj);\n        }\n    }\n    else if (collection.length > 1) {\n        var low = 0;\n        var high = collection.length - 1;\n        var mid = Math.floor((low + high) / 2);\n        while (mid !== low) {\n            if (collection[mid][key] < obj[key]) {\n                low = mid;\n                mid = Math.floor((low + high) / 2);\n            }\n            else if (collection[mid][key] > obj[key]) {\n                high = mid;\n                mid = Math.floor((low + high) / 2);\n            }\n            else {\n                break;\n            }\n        }\n        if (collection[high][key] < obj[key]) {\n            collection.push(obj);\n        }\n        else if (collection[low][key] > obj[key]) {\n            collection.splice(low, 0, obj);\n        }\n        else if ((collection[low][key] < obj[key]) && collection[high][key] > obj[key]) {\n            collection.splice(high, 0, obj);\n        }\n    }\n}\n/**\n * getElement method \\\n *\n * @returns {Object} getElement method .\\\n * @param { DiagramHtmlElement | DiagramNativeElement } element - provide the obj  value.\n * @private\n */\nexport function getElement(element) {\n    var diagramElement = document.getElementById(element.diagramId);\n    var instance = 'ej2_instances';\n    // eslint-disable-next-line\n    var node = {};\n    var nodes = diagramElement[instance][0].nodes;\n    if (nodes === undefined) {\n        nodes = getPaletteSymbols(diagramElement[instance][0]);\n    }\n    var length = 'length';\n    for (var i = 0; nodes && i < nodes[length]; i++) {\n        if (nodes[i].id === element.nodeId) {\n            return getAnnotation(nodes[i], element);\n        }\n    }\n    var connectors = diagramElement[instance][0].connectors;\n    for (var i = 0; connectors && i < connectors[length]; i++) {\n        if (connectors[i].id === element.nodeId) {\n            return getAnnotation(connectors[i], element);\n        }\n    }\n    // eslint-disable-next-line\n    var enterObject = diagramElement[instance][0].enterObject;\n    if (enterObject && (enterObject['id'] === element.nodeId || enterObject['children'])) {\n        if (enterObject['children'] && groupHasType(enterObject, 'HTML', diagramElement[instance][0].enterTable)) {\n            return diagramElement[instance][0].enterTable[element.nodeId];\n        }\n        else {\n            return enterObject;\n        }\n    }\n    return null;\n}\n/**\n * getAnnotation method \\\n *\n * @returns {Object} getAnnotation method .\\\n * @param { Object } obj - provide the obj  value.\n * @param {  DiagramHtmlElement | DiagramNativeElement } element - provide the obj  value.\n * @private\n */\nfunction getAnnotation(obj, element) {\n    var annotations = obj.annotations;\n    var length = 'length';\n    var j;\n    for (j = 0; annotations && j < annotations[length]; j++) {\n        if (element.annotationId && annotations[j].id === element.annotationId) {\n            return annotations[j];\n        }\n    }\n    return obj;\n}\n/**\n * getPaletteSymbols method \\\n *\n * @returns {NodeModel[]} getPaletteSymbols method .\\\n * @param { Object } symbolPalette - provide the symbolPalette  value.\n * @private\n */\nfunction getPaletteSymbols(symbolPalette) {\n    var nodes = [];\n    for (var i = 0; i < symbolPalette.palettes.length; i++) {\n        var symbols = symbolPalette.palettes[i].symbols;\n        for (var j = 0; j < symbols.length; j++) {\n            if (symbols[j] instanceof Node) {\n                nodes.push(symbols[j]);\n            }\n        }\n    }\n    return nodes;\n}\n/**\n * getCollectionChangeEventArguements method \\\n *\n * @returns {IBlazorCollectionChangeEventArgs} getCollectionChangeEventArguements method .\\\n * @param { IBlazorCollectionChangeEventArgs } args1 - provide the args1  value.\n * @param { NodeModel | ConnectorModel } obj - provide the obj  value.\n * @param { EventState } state - provide the state  value.\n * @param { ChangeType } type - provide the type  value.\n * @private\n */\nexport function getCollectionChangeEventArguements(args1, obj, state, type) {\n    if (isBlazor()) {\n        args1 = {\n            cause: args1.cause, state: state, type: type, cancel: false,\n            element: getObjectType(obj) === Connector ?\n                { connector: cloneBlazorObject(obj) } : { node: cloneBlazorObject(obj) }\n        };\n    }\n    return args1;\n}\n/**\n * getDropEventArguements method \\\n *\n * @returns {IBlazorDropEventArgs} getDropEventArguements method .\\\n * @param { MouseEventArgs } args - provide the args1  value.\n * @param { IBlazorDropEventArgs } arg - provide the obj  value.\n * @private\n */\nexport function getDropEventArguements(args, arg) {\n    if (isBlazor()) {\n        var connector = (getObjectType(args.source) === Connector);\n        var object = cloneBlazorObject(args.source);\n        var target = cloneBlazorObject(args.target);\n        arg = {\n            element: connector ? { connector: object.connectors[0],\n                connectorId: object.connectors[0].id }\n                : { node: object.nodes[0], nodeId: object.nodes[0].id },\n            target: connector ? { connector: target } : { node: target },\n            position: arg.position, cancel: arg.cancel\n        };\n    }\n    return arg;\n}\n/**\n * getPoint method \\\n *\n * @returns {PointModel} getPoint method .\\\n * @param { number } x - provide the x  value.\n * @param { number } y - provide the y  value.\n * @param { number } w - provide the w  value.\n * @param { number } h - provide the y  value.\n * @param { number } angle - provide the y  value.\n * @param { number } offsetX - provide the y  value.\n * @param { number } offsetY - provide the y  value.\n * @param { PointModel } cornerPoint - provide the y  value.\n * @private\n */\nexport function getPoint(x, y, w, h, angle, offsetX, offsetY, cornerPoint) {\n    var pivot = { x: 0, y: 0 };\n    var trans = identityMatrix();\n    rotateMatrix(trans, angle, offsetX, offsetY);\n    switch (cornerPoint.x) {\n        case 0:\n            switch (cornerPoint.y) {\n                case 0:\n                    pivot = transformPointByMatrix(trans, ({ x: x, y: y }));\n                    break;\n                case 0.5:\n                    pivot = transformPointByMatrix(trans, ({ x: x, y: y + h / 2 }));\n                    break;\n                case 1:\n                    pivot = transformPointByMatrix(trans, ({ x: x, y: y + h }));\n                    break;\n            }\n            break;\n        case 0.5:\n            switch (cornerPoint.y) {\n                case 0:\n                    pivot = transformPointByMatrix(trans, ({ x: x + w / 2, y: y }));\n                    break;\n                case 0.5:\n                    pivot = transformPointByMatrix(trans, ({ x: x + w / 2, y: y + h / 2 }));\n                    break;\n                case 1:\n                    pivot = transformPointByMatrix(trans, ({ x: x + w / 2, y: y + h }));\n                    break;\n            }\n            break;\n        case 1:\n            switch (cornerPoint.y) {\n                case 0:\n                    pivot = transformPointByMatrix(trans, ({ x: x + w, y: y }));\n                    break;\n                case 0.5:\n                    pivot = transformPointByMatrix(trans, ({ x: x + w, y: y + h / 2 }));\n                    break;\n                case 1:\n                    pivot = transformPointByMatrix(trans, ({ x: x + w, y: y + h }));\n                    break;\n            }\n            break;\n    }\n    return { x: pivot.x, y: pivot.y };\n}\n/* eslint-disable */\n/**\n * Get the object as Node | Connector \\\n *\n * @returns {Object} Get the object as Node | Connector .\\\n * @param { number } obj - provide the x  value.\n * @private\n */\nexport var getObjectType = function (obj) {\n    if (obj) {\n        if (obj.sourceID !== undefined || obj.sourcePoint !== undefined ||\n            obj.targetID !== undefined || obj.targetPoint !== undefined ||\n            obj.type !== undefined) {\n            obj = Connector;\n        }\n        else {\n            obj = Node;\n        }\n    }\n    return obj;\n};\n/** @private */\nexport var flipConnector = function (connector) {\n    if (!connector.sourceID && !connector.targetID) {\n        var source = { x: connector.sourcePoint.x, y: connector.sourcePoint.y };\n        var target = { x: connector.targetPoint.x, y: connector.targetPoint.y };\n        if (connector.flip === 'Horizontal') {\n            connector.sourcePoint.x = target.x;\n            connector.targetPoint.x = source.x;\n        }\n        else if (connector.flip === 'Vertical') {\n            connector.sourcePoint.y = target.y;\n            connector.targetPoint.y = source.y;\n        }\n        else if (connector.flip === 'Both') {\n            connector.sourcePoint = target;\n            connector.targetPoint = source;\n        }\n    }\n};\n/** @private */\nexport var updatePortEdges = function (portContent, flip, port) {\n    var offsetX = port.offset.x;\n    var offsetY = port.offset.y;\n    if (flip === 'Horizontal') {\n        offsetX = 1 - port.offset.x;\n        offsetY = port.offset.y;\n    }\n    else if (flip === 'Vertical') {\n        offsetX = port.offset.x;\n        offsetY = 1 - port.offset.y;\n    }\n    else if (flip === 'Both') {\n        offsetX = 1 - port.offset.x;\n        offsetY = 1 - port.offset.y;\n    }\n    portContent.setOffsetWithRespectToBounds(offsetX, offsetY, 'Fraction');\n    return portContent;\n};\n/** @private */\nexport var alignElement = function (element, offsetX, offsetY, diagram, flip) {\n    if (element.hasChildren()) {\n        for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            var childX = ((offsetX - child.offsetX) + offsetX);\n            var childY = ((offsetY - child.offsetY) + offsetY);\n            if (flip === 'Horizontal' || flip === 'Both') {\n                child.offsetX = childX;\n                child.flipOffset.x = childX - child.desiredSize.width / 2;\n            }\n            if (flip === 'Vertical' || flip === 'Both') {\n                child.offsetY = childY;\n                child.flipOffset.y = childY - child.desiredSize.height / 2;\n            }\n            if (child instanceof Canvas || child instanceof Container) {\n                alignElement(child, offsetX, offsetY, diagram, flip);\n            }\n            child.measure(new Size(child.bounds.width, child.bounds.height));\n            child.arrange(child.desiredSize);\n            var node = diagram.nameTable[child.id];\n            if (node) {\n                diagram.updateConnectorEdges(node);\n            }\n        }\n    }\n};\n/** @private */\nexport var cloneSelectedObjects = function (diagram) {\n    var nodes = diagram.selectedItems.nodes;\n    var connectors = diagram.selectedItems.connectors;\n    var isProtectedOnChange = 'isProtectedOnChange';\n    var isEnableServerDatabind = diagram.allowServerDataBinding;\n    var isProtectedOnChangeValue = diagram[isProtectedOnChange];\n    diagram.protectPropertyChange(true);\n    diagram.allowServerDataBinding = false;\n    diagram.selectedItems.nodes = [];\n    diagram.selectedItems.connectors = [];\n    diagram.allowServerDataBinding = isEnableServerDatabind;\n    diagram.protectPropertyChange(isProtectedOnChangeValue);\n    var clonedSelectedItems = cloneObject(diagram.selectedItems);\n    for (var i = 0; i < nodes.length; i++) {\n        diagram.selectedItems.nodes.push(diagram.nameTable[nodes[i].id]);\n    }\n    for (var i = 0; i < connectors.length; i++) {\n        diagram.selectedItems.connectors.push(diagram.nameTable[connectors[i].id]);\n    }\n    return clonedSelectedItems;\n};\n/** @private */\nexport var updatePathElement = function (anglePoints, connector) {\n    var pathElement = new PathElement();\n    var pathseqData;\n    for (var j = 0; j < anglePoints.length - 1; j++) {\n        pathseqData = findPath(anglePoints[j], anglePoints[j + 1]);\n        pathElement.data = pathseqData[0];\n        pathElement.id = connector.id + '_' + (connector.shape.sequence);\n        pathElement.offsetX = pathseqData[1].x;\n        pathElement.offsetY = pathseqData[1].y;\n        pathElement.rotateAngle = 45;\n        pathElement.transform = Transform.Self;\n    }\n    return pathElement;\n};\n/** @private */\nexport var checkPort = function (node, element) {\n    if (node instanceof Node) {\n        for (var i = 0; i < node.ports.length; i++) {\n            if (node.ports[i].id === element.id.split('_')[1]) {\n                return true;\n            }\n        }\n    }\n    return false;\n};\n/** @private */\nexport var findPath = function (sourcePoint, targetPoint) {\n    var beginningpoint = { x: sourcePoint.x, y: sourcePoint.y };\n    var distance = findDistance(sourcePoint, targetPoint);\n    distance = Math.min(30, distance / 2);\n    var angle = findAngle(sourcePoint, targetPoint);\n    var transferpt = Point.transform({ x: beginningpoint.x, y: beginningpoint.y }, angle, distance);\n    var startpoint = Point.transform({ x: transferpt.x, y: transferpt.y }, angle, -12);\n    var endpoint = Point.transform({ x: startpoint.x, y: startpoint.y }, angle, 12 * 2);\n    var path = 'M' + startpoint.x + ' ' + startpoint.y + ' L' + endpoint.x + ' ' + endpoint.y;\n    return [path, transferpt];\n};\n/** @private */\nexport var getConnectorDirection = function (src, tar) {\n    if (Math.abs(tar.x - src.x) > Math.abs(tar.y - src.y)) {\n        return src.x < tar.x ? 'Right' : 'Left';\n    }\n    else {\n        return src.y < tar.y ? 'Bottom' : 'Top';\n    }\n};\n/** @private */\nexport var findDistance = function (point1, point2) {\n    return Math.sqrt(Math.pow(point2.x - point1.x, 2) + Math.pow(point2.y - point1.y, 2));\n};\n/* eslint-enable */\n/**\n * cloneBlazorObject method \\\n *\n * @returns {Object} cloneBlazorObject method .\\\n * @param { object } args - provide the args  value.\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function cloneBlazorObject(args) {\n    if (isBlazor()) {\n        args = cloneObject(args);\n    }\n    return args;\n}\n/**\n * checkBrowserInfo method \\\n *\n * @returns {Object} checkBrowserInfo method .\\\n * @private\n */\nexport function checkBrowserInfo() {\n    if ((navigator.platform.indexOf('Mac') >= 0 || navigator.platform.indexOf('iPad') >= 0\n        || navigator.platform.indexOf('iPhone') >= 0 || navigator.platform.indexOf('MacIntel') >= 0)\n        && (Browser.info.name === 'safari' || Browser.info.name === 'webkit')) {\n        return true;\n    }\n    return false;\n}\n/**\n * canMeasureDecoratorPath method \\\n *\n * @returns {boolean} canMeasureDecoratorPath method .\\\n * @param { string[] } objects - provide the args  value.\n * @private\n */\nexport function canMeasureDecoratorPath(objects) {\n    if (objects.indexOf('shape') !== -1 || objects.indexOf('pathData') !== -1 ||\n        objects.indexOf('width') !== -1 || objects.indexOf('height') !== -1) {\n        return true;\n    }\n    return false;\n}\n/**\n * getPreviewSize method \\\n *\n * @returns {Size} getPreviewSize method .\\\n * @param { SymbolPaletteModel } sourceElement - provide the args  value.\n * @param { Node } clonedObject - provide the args  value.\n * @param { DiagramElement } wrapper - provide the args  value.\n * @private\n */\nexport function getPreviewSize(sourceElement, clonedObject, wrapper) {\n    //let previewWidth: number;\n    //let previewHeight: number;\n    var previewWidth = getSymbolSize(sourceElement, clonedObject, wrapper, 'width');\n    var previewHeight = getSymbolSize(sourceElement, clonedObject, wrapper, 'height');\n    return new Size(previewWidth, previewHeight);\n}\n/**\n * getSymbolSize method \\\n *\n * @returns {number} getSymbolSize method .\\\n * @param { SymbolPaletteModel } sourceElement - provide the sourceElement  value.\n * @param { Node } clonedObject - provide the clonedObject  value.\n * @param { DiagramElement } wrapper - provide the wrapper  value.\n * @param { string } size - provide the size  value.\n * @private\n */\nexport function getSymbolSize(sourceElement, clonedObject, wrapper, size) {\n    var previewSize = 0;\n    if (clonedObject.previewSize[size] !== undefined) {\n        previewSize = clonedObject.previewSize[size];\n    }\n    else if (sourceElement.symbolPreview[size] !== undefined) {\n        previewSize = sourceElement.symbolPreview[size];\n    }\n    else {\n        previewSize = clonedObject[size] || wrapper.actualSize[size];\n    }\n    return previewSize;\n}\n/**\n * findParent method \\\n *\n * @returns {string} findParent method .\\\n * @param { Node } clonedObject - provide the clonedObject  value.\n * @param { Diagram } wrapper - provide the diagram  element.\n * @param { string } size - provide the parent id.\n * @private\n */\nexport function findParentInSwimlane(node, diagram, parent) {\n    if (node && node.parentId) {\n        node = diagram.nameTable[node.parentId];\n        if (node.parentId) {\n            parent = findParentInSwimlane(node, diagram, parent);\n        }\n        else {\n            parent = node.id;\n        }\n    }\n    return parent;\n}\n/**\n * selectionHasConnector method \\\n *\n * @returns {boolean} selectionHasConnector method .\\\n * @param { Diagram } wrapper - provide the diagram  element.\n * @param { selector } size - provide the selector element.\n * @private\n */\nexport function selectionHasConnector(diagram, selector) {\n    if (diagram.selectedItems.connectors.length > 1 && diagram.selectedItems.nodes.length === 0 && selector.rotateAngle !== 0) {\n        return true;\n    }\n    return false;\n}\n"]},"metadata":{},"sourceType":"module"}