{"ast":null,"code":"import { Rect } from '../primitives/rect';\nimport { Size } from '../primitives/size';\nimport { processPathData, splitArrayCollection, transformPath } from './path-util';\nimport { whiteSpaceToString, wordBreakToString, textAlignToString, bBoxText, cloneObject } from './base-util';\nimport { identityMatrix, transformPointByMatrix, rotateMatrix } from '../primitives/matrix';\nimport { compile, createElement, Browser, isBlazor } from '@syncfusion/ej2-base';\nimport { Node } from '../objects/node';\nimport { getElement, cloneBlazorObject } from './diagram-util';\nimport { templateCompiler } from '../utility/base-util';\n/**\n * Defines the functionalities that need to access DOM\n */\n\n/**\n * removeElementsByClass method \\\n *\n * @returns {void} removeElementsByClass method .\\\n * @param { string } className - provide the element  value.\n * @param {string} id - provide the string  value.\n * @private\n */\n\nexport function removeElementsByClass(className, id) {\n  var elements;\n\n  if (id && document.getElementById(id).classList.contains(className)) {\n    elements = document.getElementById(id).getElementsByClassName(className);\n  } else {\n    elements = document.getElementsByClassName(className);\n  }\n\n  while (elements.length > 0) {\n    elements[0].parentNode.removeChild(elements[0]);\n  }\n}\n/**\n * findSegmentPoints method \\\n *\n * @returns {PointModel[]} findSegmentPoints method .\\\n * @param { PathElement } element - provide the element  value.\n * @private\n */\n\nexport function findSegmentPoints(element) {\n  var pts = [];\n  var sample;\n  var sampleLength;\n  var measureWindowElement = 'measureElement';\n  window[measureWindowElement].style.visibility = 'visible';\n  var svg = window[measureWindowElement].children[2];\n  var pathNode = getChildNode(svg)[0];\n  pathNode.setAttributeNS(null, 'd', element.data);\n  var pathBounds = element.absoluteBounds; // || pathNode.getBBox();\n\n  var pathData = updatePath(element, pathBounds, element);\n  pathNode.setAttributeNS(null, 'd', pathData);\n  var pathLength = pathNode.getTotalLength();\n\n  for (sampleLength = 0; sampleLength <= pathLength; sampleLength += 10) {\n    sample = pathNode.getPointAtLength(sampleLength);\n    pts.push({\n      x: sample.x,\n      y: sample.y\n    });\n  }\n\n  window[measureWindowElement].style.visibility = 'hidden';\n  return pts;\n}\n/**\n * getChildNode method \\\n *\n * @returns {SVGElement[] | HTMLCollection} findSegmentPoints method .\\\n * @param { SVGElement } node - provide the element  value.\n * @private\n */\n\nexport function getChildNode(node) {\n  var child;\n  var collection = [];\n\n  if (Browser.info.name === 'msie' || Browser.info.name === 'edge') {\n    for (var i = 0; i < node.childNodes.length; i++) {\n      child = node.childNodes[i];\n\n      if (child.nodeType === 1) {\n        collection.push(child);\n      }\n    }\n  } else {\n    collection = node.children;\n  }\n\n  return collection;\n}\n/**\n * translatePoints method \\\n *\n * @returns {PointModel[]} translatePoints method .\\\n * @param { SVGElement } element - provide the element  value.\n * @param { PointModel[] } points - provide the element  value.\n * @private\n */\n\nexport function translatePoints(element, points) {\n  var translatedPts = [];\n\n  for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {\n    var point = points_1[_i];\n    var pt1 = {\n      x: element.offsetX - element.actualSize.width * element.pivot.x + point.x,\n      y: element.offsetY - element.actualSize.height * element.pivot.y + point.y\n    };\n    var matrix = void 0;\n    var angle = element.rotateAngle + element.parentTransform;\n\n    if (angle) {\n      matrix = identityMatrix();\n      rotateMatrix(matrix, angle, element.offsetX, element.offsetY);\n    }\n\n    if (matrix) {\n      pt1 = transformPointByMatrix(matrix, pt1);\n    }\n\n    translatedPts.push(pt1);\n  }\n\n  return translatedPts;\n}\n/**\n * measurePath method \\\n *\n * @returns {Rect} measurePath method .\\\n * @param { string } data - provide the element  value.\n * @private\n */\n\nexport function measurePath(data) {\n  if (data) {\n    var measureWindowElement = 'measureElement';\n    window[measureWindowElement].style.visibility = 'visible';\n    var svg = window[measureWindowElement].children[2];\n    var element = getChildNode(svg)[0];\n    element.setAttribute('d', data);\n    var bounds = element.getBBox();\n    var svgBounds = new Rect(bounds.x, bounds.y, bounds.width, bounds.height);\n    window[measureWindowElement].style.visibility = 'hidden';\n    return svgBounds;\n  }\n\n  return new Rect(0, 0, 0, 0);\n}\n/**\n * getTextOptions method \\\n *\n * @returns {BaseAttributes} getTextOptions method .\\\n * @param { TextElement } element - provide the element  value.\n * @param { number } maxWidth - provide the maxWidth  value.\n * @private\n */\n\nfunction getTextOptions(element, maxWidth) {\n  var options = {\n    fill: element.style.fill,\n    stroke: element.style.strokeColor,\n    angle: element.rotateAngle + element.parentTransform,\n    pivotX: element.pivot.x,\n    pivotY: element.pivot.y,\n    strokeWidth: element.style.strokeWidth,\n    dashArray: element.style.strokeDashArray,\n    opacity: element.style.opacity,\n    shadow: element.shadow,\n    gradient: element.style.gradient,\n    visible: element.visible,\n    id: element.id,\n    description: element.description,\n    width: maxWidth || element.actualSize.width,\n    height: element.actualSize.height,\n    x: element.offsetX - element.actualSize.width * element.pivot.x + 0.5,\n    y: element.offsetY - element.actualSize.height * element.pivot.y + 0.5\n  };\n  options.fontSize = element.style.fontSize;\n  options.fontFamily = element.style.fontFamily;\n  options.textOverflow = element.style.textOverflow;\n  options.textDecoration = element.style.textDecoration;\n  options.doWrap = element.doWrap;\n  options.whiteSpace = whiteSpaceToString(element.style.whiteSpace, element.style.textWrapping);\n  options.content = element.content;\n  options.textWrapping = element.style.textWrapping;\n  options.breakWord = wordBreakToString(element.style.textWrapping);\n  options.textAlign = textAlignToString(element.style.textAlign);\n  options.color = element.style.color;\n  options.italic = element.style.italic;\n  options.bold = element.style.bold;\n  options.dashArray = '';\n  options.strokeWidth = 0;\n  options.fill = '';\n  return options;\n}\n/**\n * wrapSvgText method \\\n *\n * @returns {SubTextElement[]} wrapSvgText method .\\\n * @param { TextAttributes } text - provide the element  value.\n * @param { string } textValue - provide the maxWidth  value.\n * @param { number } laneWidth - provide the maxWidth  value.\n * @private\n */\n\n\nfunction wrapSvgText(text, textValue, laneWidth) {\n  var childNodes = [];\n  var k = 0;\n  var txtValue;\n  var bounds1;\n  var content = textValue || text.content;\n\n  if (text.whiteSpace !== 'nowrap' && text.whiteSpace !== 'pre') {\n    if (text.breakWord === 'breakall') {\n      txtValue = '';\n      txtValue += content[0];\n\n      for (k = 0; k < content.length; k++) {\n        bounds1 = bBoxText(txtValue, text);\n\n        if (bounds1 >= text.width && txtValue.length > 0) {\n          childNodes[childNodes.length] = {\n            text: txtValue,\n            x: 0,\n            dy: 0,\n            width: bounds1\n          };\n          txtValue = '';\n        } else {\n          txtValue = txtValue + (content[k + 1] || '');\n\n          if (txtValue.indexOf('\\n') > -1) {\n            childNodes[childNodes.length] = {\n              text: txtValue,\n              x: 0,\n              dy: 0,\n              width: bBoxText(txtValue, text)\n            };\n            txtValue = '';\n          }\n\n          var width = bBoxText(txtValue, text);\n\n          if (Math.ceil(width) + 2 >= text.width && txtValue.length > 0) {\n            childNodes[childNodes.length] = {\n              text: txtValue,\n              x: 0,\n              dy: 0,\n              width: width\n            };\n            txtValue = '';\n          }\n\n          if (k === content.length - 1 && txtValue.length > 0) {\n            childNodes[childNodes.length] = {\n              text: txtValue,\n              x: 0,\n              dy: 0,\n              width: width\n            };\n            txtValue = '';\n          }\n        }\n      }\n    } else {\n      childNodes = wordWrapping(text, textValue, laneWidth);\n    }\n  } else {\n    childNodes[childNodes.length] = {\n      text: content,\n      x: 0,\n      dy: 0,\n      width: bBoxText(content, text)\n    };\n  }\n\n  return childNodes;\n}\n/**\n * wordWrapping method \\\n *\n * @returns {SubTextElement[]} wordWrapping method .\\\n * @param { TextAttributes } text - provide the element  value.\n * @param { string } textValue - provide the maxWidth  value.\n * @param { number } laneWidth - provide the maxWidth  value.\n * @private\n */\n\n\nfunction wordWrapping(text, textValue, laneWidth) {\n  var childNodes = [];\n  var txtValue = '';\n  var j = 0;\n  var i = 0;\n  var wrap = text.whiteSpace !== 'nowrap' ? true : false;\n  var content = textValue || text.content;\n  var eachLine = content.split('\\n');\n  var txt;\n  var words;\n  var newText;\n  var existingWidth;\n  var existingText;\n\n  for (j = 0; j < eachLine.length; j++) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    txt = '';\n    words = text.textWrapping !== 'NoWrap' ? eachLine[j].split(' ') : text.textWrapping === 'NoWrap' ? [eachLine[j]] : eachLine;\n\n    for (i = 0; i < words.length; i++) {\n      txtValue += ((i !== 0 || words.length === 1) && wrap && txtValue.length > 0 ? ' ' : '') + words[i];\n      newText = txtValue + ' ' + (words[i + 1] || '');\n      var width = bBoxText(newText, text);\n\n      if (Math.floor(width) > (laneWidth || text.width) - 2 && txtValue.length > 0) {\n        childNodes[childNodes.length] = {\n          text: txtValue,\n          x: 0,\n          dy: 0,\n          width: newText === txtValue ? width : txtValue === existingText ? existingWidth : bBoxText(txtValue, text)\n        };\n        txtValue = '';\n      } else {\n        if (i === words.length - 1) {\n          childNodes[childNodes.length] = {\n            text: txtValue,\n            x: 0,\n            dy: 0,\n            width: width\n          };\n          txtValue = '';\n        }\n      }\n\n      existingText = newText;\n      existingWidth = width;\n    }\n  }\n\n  return childNodes;\n}\n/**\n * wrapSvgTextAlign method \\\n *\n * @returns {TextBounds} wrapSvgTextAlign method .\\\n * @param { TextAttributes } text - provide the element  value.\n * @param { string } childNodes - provide the maxWidth  value.\n * @private\n */\n\n\nfunction wrapSvgTextAlign(text, childNodes) {\n  var wrapBounds = {\n    x: 0,\n    width: 0\n  };\n  var k = 0;\n  var txtWidth;\n  var width;\n\n  for (k = 0; k < childNodes.length; k++) {\n    txtWidth = childNodes[k].width;\n    width = txtWidth;\n\n    if (text.textAlign === 'left') {\n      txtWidth = 0;\n    } else if (text.textAlign === 'center') {\n      if (txtWidth > text.width && (text.textOverflow === 'Ellipsis' || text.textOverflow === 'Clip')) {\n        txtWidth = 0;\n      } else {\n        txtWidth = -txtWidth / 2;\n      }\n    } else if (text.textAlign === 'right') {\n      txtWidth = -txtWidth;\n    } else {\n      txtWidth = childNodes.length > 1 ? 0 : -txtWidth / 2;\n    }\n\n    childNodes[k].dy = text.fontSize * 1.2;\n    childNodes[k].x = txtWidth;\n\n    if (!wrapBounds) {\n      wrapBounds = {\n        x: txtWidth,\n        width: width\n      };\n    } else {\n      wrapBounds.x = Math.min(wrapBounds.x, txtWidth);\n      wrapBounds.width = Math.max(wrapBounds.width, width);\n    }\n  }\n\n  return wrapBounds;\n}\n/**\n * measureHtmlText method \\\n *\n * @returns {TextBounds} measureHtmlText method .\\\n * @param { TextStyleModel } style - provide the style  value.\n * @param { string } content - provide the content  value.\n * @param { string } width - provide the width  value.\n * @param { string } height - provide the height  value.\n * @param { string } maxWidth - provide the maxWidth  value.\n * @private\n */\n\n\nexport function measureHtmlText(style, content, width, height, maxWidth) {\n  var bounds = new Size();\n  var text = createHtmlElement('span', {\n    'style': 'display:inline-block; line-height: normal'\n  });\n\n  if (style.bold) {\n    text.style.fontWeight = 'bold';\n  }\n\n  if (style.italic) {\n    text.style.fontStyle = 'italic';\n  }\n\n  if (width !== undefined) {\n    text.style.width = width.toString() + 'px';\n  }\n\n  if (height !== undefined) {\n    text.style.height = height.toString() + 'px';\n  }\n\n  if (maxWidth !== undefined) {\n    text.style.maxWidth = maxWidth.toString() + 'px';\n  }\n\n  text.style.fontFamily = style.fontFamily;\n  text.style.fontSize = style.fontSize + 'px';\n  text.style.color = style.color;\n  text.textContent = content;\n  text.style.whiteSpace = whiteSpaceToString(style.whiteSpace, style.textWrapping);\n\n  if (maxWidth !== undefined) {\n    text.style.wordBreak = 'break-word';\n  } else {\n    text.style.wordBreak = wordBreakToString(style.textWrapping);\n  }\n\n  document.body.appendChild(text);\n  bounds.width = text.offsetWidth;\n  bounds.height = text.offsetHeight;\n  document.body.removeChild(text);\n  return bounds;\n}\n/**\n * measureText method \\\n *\n * @returns {Size} measureText method .\\\n * @param { TextStyleModel } text - provide the text  value.\n * @param { string } style - provide the style  value.\n * @param { string } content - provide the content  value.\n * @param { number } maxWidth - provide the maxWidth  value.\n * @param { string } textValue - provide the textValue  value.\n * @private\n */\n\nexport function measureText(text, style, content, maxWidth, textValue) {\n  var bounds = new Size(0, 0);\n  var childNodes;\n  var wrapBounds;\n  var options = getTextOptions(text, maxWidth);\n  text.childNodes = childNodes = wrapSvgText(options, textValue, text.isLaneOrientation ? maxWidth : undefined);\n  text.wrapBounds = wrapBounds = wrapSvgTextAlign(options, childNodes);\n  bounds.width = wrapBounds.width;\n\n  if (text.wrapBounds.width >= maxWidth && options.textOverflow !== 'Wrap') {\n    bounds.width = maxWidth;\n  }\n\n  bounds.height = childNodes.length * text.style.fontSize * 1.2;\n  return bounds;\n}\n/**\n * measureImage method \\\n *\n * @returns {Size} measureImage method .\\\n * @param { string } source - provide the text  value.\n * @param { Size } contentSize - provide the style  value.\n * @param { string } id - provide the content  value.\n * @param { Function } callback - provide the maxWidth  value.\n * @private\n */\n// eslint-disable-next-line\n\nexport function measureImage(source, contentSize, id, callback) {\n  var measureWindowElement = 'measureElement';\n  window[measureWindowElement].style.visibility = 'visible';\n  var imageElement = window[measureWindowElement].children[1];\n  imageElement.setAttribute('src', source);\n  var bounds = imageElement.getBoundingClientRect();\n  var width = bounds.width;\n  var height = bounds.height;\n  contentSize = new Size(width, height);\n  window[measureWindowElement].style.visibility = 'hidden';\n  var element = document.createElement('img');\n  element.setAttribute('src', source);\n  setAttributeHtml(element, {\n    id: id + 'sf-imageNode',\n    style: 'display: none;'\n  });\n  document.body.appendChild(element); // eslint-disable-next-line\n\n  element.onload = function (event) {\n    var loadedImage = event.currentTarget;\n\n    if (callback) {\n      callback(id, {\n        width: loadedImage.width,\n        height: loadedImage.height\n      });\n    }\n  };\n\n  return contentSize;\n}\n/* eslint-disable */\n\n/**\n * measureNativeContent method \\\n *\n * @returns {Rect} measureNativeContent method .\\\n * @param { SVGElement } nativeContent - provide the text  value.\n * @private\n */\n\nexport function measureNativeContent(nativeContent) {\n  var measureWindowElement = 'measureElement';\n  window[measureWindowElement].style.visibility = 'visible';\n  var nativeSVG = window[measureWindowElement].children[2];\n  nativeSVG.appendChild(nativeContent);\n  var bounds = nativeContent.getBoundingClientRect();\n  var svgBounds = nativeSVG.getBoundingClientRect();\n  var rect = bounds;\n  rect.x = bounds.left - svgBounds.left;\n  rect.y = bounds.top - svgBounds.top;\n  nativeSVG.removeChild(nativeContent);\n  window[measureWindowElement].style.visibility = 'hidden';\n  return rect;\n}\n/**\n * measureNativeSvg method \\\n *\n * @returns {Rect} measureNativeSvg method .\\\n * @param { SVGElement } nativeContent - provide the text  value.\n * @private\n */\n\nexport function measureNativeSvg(nativeContent) {\n  var measureWindowElement = 'measureElement';\n  window[measureWindowElement].style.visibility = 'visible';\n  var nativeSVG = window[measureWindowElement].children[2];\n  nativeSVG.appendChild(nativeContent); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  var svgBounds = nativeSVG.getBoundingClientRect();\n  nativeSVG.removeChild(nativeContent);\n  window[measureWindowElement].style.visibility = 'hidden';\n  return svgBounds;\n}\n/**\n * updatePath method \\\n *\n * @returns {string} updatePath method .\\\n * @param { SVGElement } element - provide the element  value.\n * @param { Rect } bounds - provide the bounds  value.\n * @param { PathElement } child - provide the child  value.\n * @param { BaseAttributes } options - provide the options  value.\n * @private\n */\n\nexport function updatePath(element, bounds, child, options) {\n  var initX = 0;\n  var initY = 0;\n  var scaleX = 0;\n  var scaleY = 0;\n  var isScale = false;\n  var newPathString = '';\n  var arrayCollection = [];\n  var bBox = bounds;\n\n  if (initX !== bBox.x || initY !== bBox.y) {\n    scaleX = initX - Number(bBox.x);\n    scaleY = initY - Number(bBox.y);\n  }\n\n  if (element.actualSize.width !== bBox.width || element.actualSize.height !== bBox.height || options) {\n    scaleX = (options && options.width || element.actualSize.width) / Number(bBox.width ? bBox.width : 1);\n    scaleY = (options && options.height || element.actualSize.height) / Number(bBox.height ? bBox.height : 1);\n    isScale = true;\n  }\n\n  arrayCollection = processPathData(element.data);\n  arrayCollection = splitArrayCollection(arrayCollection);\n  newPathString = transformPath(arrayCollection, scaleX, scaleY, isScale, bBox.x, bBox.y, initX, initY);\n  isScale = false;\n  return newPathString;\n}\n/**\n * getDiagramLayerSvg method \\\n *\n * @returns {string} getDiagramLayerSvg method .\\\n * @param { string } diagramId - provide the element  value.\n * @private\n */\n\nexport function getDiagramLayerSvg(diagramId) {\n  //let diagramLayerSvg: SVGSVGElement;\n  var diagramElement = getDiagramElement(diagramId); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  var elementcoll = diagramElement.getElementsByClassName('e-diagram-layer');\n  var diagramLayerSvg = elementcoll[0];\n  return diagramLayerSvg;\n}\n/**\n * getDiagramElement method \\\n *\n * @returns {HTMLElement} getDiagramElement method .\\\n * @param { string } elementId - provide the elementId  value.\n * @param { string } contentId - provide the elementId  value.\n * @private\n */\n\nexport function getDiagramElement(elementId, contentId) {\n  var diagramElement;\n  var element;\n\n  if (contentId) {\n    element = document.getElementById(contentId);\n  }\n\n  if (Browser.info.name === 'msie' || Browser.info.name === 'edge') {\n    diagramElement = element ? element.querySelector('#' + elementId) : document.getElementById(elementId);\n  } else {\n    diagramElement = element ? element.querySelector('#' + CSS.escape(elementId)) : document.getElementById(elementId);\n  }\n\n  return diagramElement;\n}\n/**\n * getDomIndex method \\\n *\n * @returns {HTMLElement} getDomIndex method .\\\n * @param { string } viewId - provide the elementId  value.\n * @param { string } elementId - provide the elementId  value.\n * @param { string } layer - provide the elementId  value.\n * @private\n */\n\nexport function getDomIndex(viewId, elementId, layer) {\n  var index = undefined;\n  var parentElement;\n  var postId = '';\n\n  if (layer === 'native') {\n    parentElement = getNativeLayer(viewId);\n    postId = '_content_groupElement';\n  } else if (layer === 'html') {\n    parentElement = getHTMLLayer(viewId).childNodes[0];\n    postId = '_html_element';\n  } else {\n    parentElement = getDiagramLayer(viewId);\n    postId = '_groupElement';\n  }\n\n  var childElement;\n\n  for (var i = 0; parentElement.childNodes && i < parentElement.childNodes.length; i++) {\n    childElement = parentElement.childNodes[i];\n\n    if (childElement && childElement.id === elementId + postId) {\n      index = i;\n      break;\n    }\n  }\n\n  return index;\n}\n/**\n * getAdornerLayerSvg method \\\n *\n * @returns {SVGSVGElement} getAdornerLayerSvg method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\n\nexport function getAdornerLayerSvg(diagramId) {\n  var adornerLayerSvg = null;\n  var diagramElement = getDiagramElement(diagramId); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  var elementcoll = diagramElement.getElementsByClassName('e-adorner-layer');\n  adornerLayerSvg = elementcoll[0];\n  return adornerLayerSvg;\n}\n/**\n * getSelectorElement method \\\n *\n * @returns {SVGSVGElement} getSelectorElement method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\n\nexport function getSelectorElement(diagramId) {\n  var adornerLayer = null;\n  var adornerSvg = getAdornerLayerSvg(diagramId);\n  adornerLayer = adornerSvg.getElementById(diagramId + '_SelectorElement');\n  return adornerLayer;\n}\n/**\n * getAdornerLayer method \\\n *\n * @returns {SVGSVGElement} getAdornerLayer method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\n\nexport function getAdornerLayer(diagramId) {\n  var adornerLayer = null;\n  var diagramAdornerSvg = getAdornerLayerSvg(diagramId);\n  adornerLayer = diagramAdornerSvg.getElementById(diagramId + '_diagramAdorner');\n  return adornerLayer;\n}\n/**\n * getUserHandleLayer method \\\n *\n * @returns {HTMLElement} getUserHandleLayer method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\n\nexport function getUserHandleLayer(diagramId) {\n  var adornerLayer = null;\n  var diagramUserHandleLayer = getDiagramElement(diagramId); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  var elementcoll = diagramUserHandleLayer.getElementsByClassName('e-userHandle-layer');\n  adornerLayer = elementcoll[0];\n  return adornerLayer;\n}\n/**\n * getDiagramLayer method \\\n *\n * @returns {HTMLElement} getDiagramLayer method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\n\nexport function getDiagramLayer(diagramId) {\n  //let diagramLayer: SVGElement;\n  var diagramLayerSvg = getDiagramLayerSvg(diagramId);\n  var diagramLayer = diagramLayerSvg.getElementById(diagramId + '_diagramLayer');\n  return diagramLayer;\n}\n/**\n * getPortLayerSvg method \\\n *\n * @returns {SVGSVGElement} getPortLayerSvg method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\n\nexport function getPortLayerSvg(diagramId) {\n  var adornerLayerSvg = null;\n  var diagramElement = getDiagramElement(diagramId); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  var elementcoll = diagramElement.getElementsByClassName('e-ports-expand-layer');\n  adornerLayerSvg = elementcoll[0];\n  return adornerLayerSvg;\n}\n/**\n * getNativeLayerSvg method \\\n *\n * @returns {SVGSVGElement} getNativeLayerSvg method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\n\nexport function getNativeLayerSvg(diagramId) {\n  var nativeLayerSvg;\n  var diagramElement = getDiagramElement(diagramId); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  var elementcoll = diagramElement.getElementsByClassName('e-native-layer');\n  nativeLayerSvg = elementcoll[0];\n  return nativeLayerSvg;\n}\n/**\n * getGridLayerSvg method \\\n *\n * @returns {SVGSVGElement} getNativeLayerSvg method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\n\nexport function getGridLayerSvg(diagramId) {\n  var gridLayerSvg = null;\n  var diagramElement = getDiagramElement(diagramId); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  var elementcoll = diagramElement.getElementsByClassName('e-grid-layer');\n  gridLayerSvg = elementcoll[0];\n  return gridLayerSvg;\n}\n/**\n * getBackgroundLayerSvg method \\\n *\n * @returns {SVGSVGElement} getBackgroundLayerSvg method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\n\nexport function getBackgroundLayerSvg(diagramId) {\n  var gridLayerSvg = null;\n  var diagramElement = getDiagramElement(diagramId); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  var elementcoll = diagramElement.getElementsByClassName('e-background-layer');\n  return elementcoll[0].parentNode;\n}\n/**\n * getBackgroundImageLayer method \\\n *\n * @returns {SVGSVGElement} getBackgroundImageLayer method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\n\nexport function getBackgroundImageLayer(diagramId) {\n  var imageLayer = null;\n  var diagramElement = getDiagramElement(diagramId); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  var elementcoll = diagramElement.getElementsByClassName('e-background-image-layer');\n  imageLayer = elementcoll[0];\n  return imageLayer;\n}\n/**\n * getBackgroundLayer method \\\n *\n * @returns {SVGSVGElement} getBackgroundLayer method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\n\nexport function getBackgroundLayer(diagramId) {\n  var imageLayer = null;\n  var diagramElement = getDiagramElement(diagramId); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  var elementcoll = diagramElement.getElementsByClassName('e-background-layer');\n  imageLayer = elementcoll[0];\n  return imageLayer;\n}\n/**\n * getGridLayer method \\\n *\n * @returns {SVGSVGElement} getGridLayer method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\n\nexport function getGridLayer(diagramId) {\n  var domTable = 'domTable';\n  var expandCollapse = null;\n\n  if (!window[domTable][diagramId + '_gridline']) {\n    var diagramGridSvg = getGridLayerSvg(diagramId);\n    expandCollapse = diagramGridSvg.getElementById(diagramId + '_gridline');\n    window[domTable][diagramId + '_gridline'] = expandCollapse;\n  } else {\n    expandCollapse = window[domTable][diagramId + '_gridline'];\n  }\n\n  return expandCollapse;\n} // /** @private */\n// export function getExpandCollapseLayer(diagramId: string): SVGElement {\n//     let expandCollapse: SVGElement = null;\n//     let diagramPortSvg: SVGSVGElement = getPortLayerSvg(diagramId);\n//     expandCollapse = diagramPortSvg.getElementById(diagramId + '_diagramExpander') as SVGElement;\n//     return expandCollapse;\n// }\n// /** @private */\n// export function getPortsLayer(diagramId: string): SVGElement {\n//     let expandCollapse: SVGElement = null;\n//     let diagramPortSvg: SVGSVGElement = getPortLayerSvg(diagramId);\n//     expandCollapse = diagramPortSvg.getElementById(diagramId + '_diagramPorts') as SVGElement;\n//     return expandCollapse;\n// }\n\n/**\n * getNativeLayer method \\\n *\n * @returns {SVGSVGElement} getNativeLayer method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\n\nexport function getNativeLayer(diagramId) {\n  var nativeLayer = null;\n  var nativeLayerSvg = getNativeLayerSvg(diagramId);\n  nativeLayer = nativeLayerSvg.getElementById(diagramId + '_nativeLayer');\n  return nativeLayer;\n}\n/**\n * getHTMLLayer method \\\n *\n * @returns {SVGSVGElement} getHTMLLayer method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\n\nexport function getHTMLLayer(diagramId) {\n  var htmlLayer = null;\n  var domTable = 'domTable';\n\n  if (!window[domTable][diagramId + 'html_layer']) {\n    var element = getDiagramElement(diagramId); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var elementcoll = element.getElementsByClassName('e-html-layer');\n    htmlLayer = elementcoll[0];\n    window[domTable][diagramId + 'html_layer'] = htmlLayer;\n  } else {\n    htmlLayer = window[domTable][diagramId + 'html_layer'];\n  }\n\n  return htmlLayer;\n}\n/* eslint-enable */\n\n/**\n * createHtmlElement method \\\n *\n * @returns {SVGSVGElement} createHtmlElement method .\\\n * @param { string } elementType - provide the diagramId  value.\n * @param { Object } attribute - provide the diagramId  value.\n * @private\n */\n\nexport function createHtmlElement(elementType, attribute) {\n  var element = createElement(elementType);\n  setAttributeHtml(element, attribute);\n  return element;\n}\n/**\n * createSvgElement method \\\n *\n * @returns {SVGSVGElement} createSvgElement method .\\\n * @param { string } elementType - provide the elementType  value.\n * @param { Object } attribute - provide the attribute  value.\n * @private\n */\n\nexport function createSvgElement(elementType, attribute) {\n  var element = document.createElementNS('http://www.w3.org/2000/svg', elementType);\n  setAttributeSvg(element, attribute);\n  return element;\n}\n/** @hidden */\n\n/**\n * parentsUntil method \\\n *\n * @returns {SVGSVGElement} parentsUntil method .\\\n * @param { Element } elem - provide the elementType  value.\n * @param { string } selector - provide the attribute  value.\n * @param { boolean } isID - provide the attribute  value.\n * @private\n */\n\nexport function parentsUntil(elem, selector, isID) {\n  var parent = elem;\n\n  while (parent) {\n    if (isID ? parent.id === selector : hasClass(parent, selector)) {\n      break;\n    }\n\n    parent = parent.parentNode;\n  }\n\n  return parent;\n}\n/**\n * hasClass method \\\n *\n * @returns {SVGSVGElement} hasClass method .\\\n * @param { HTMLElement } element - provide the element  value.\n * @param { string } className - provide the className  value.\n * @private\n */\n\nexport function hasClass(element, className) {\n  var eClassName = typeof element.className === 'object' ? element.className.animVal : element.className;\n  return (' ' + eClassName + ' ').indexOf(' ' + className + ' ') > -1 ? true : false;\n}\n/**\n * getScrollerWidth method \\\n *\n * @returns {number} getScrollerWidth method .\\\n * @private\n */\n\nexport function getScrollerWidth() {\n  var outer = createHtmlElement('div', {\n    'style': 'visibility:hidden; width: 100px'\n  });\n  document.body.appendChild(outer);\n  var widthNoScroll = outer.getBoundingClientRect().width; // force scrollbars\n\n  outer.style.overflow = 'scroll'; // add innerdiv\n\n  var inner = createHtmlElement('div', {\n    'style': 'width:100%'\n  });\n  outer.appendChild(inner);\n  var widthWithScroll = inner.getBoundingClientRect().width; // remove divs\n\n  outer.parentNode.removeChild(outer);\n  return widthNoScroll - widthWithScroll;\n}\n/**\n * addTouchPointer method \\\n *\n * @returns {ITouches[]} addTouchPointer method .\\\n * @param { ITouches[] } touchList - provide the touchList  value.\n * @param { PointerEvent } e - provide the e  value.\n * @param { TouchList } touches - provide the touches  value.\n * @private\n */\n\nexport function addTouchPointer(touchList, e, touches) {\n  touchList = [];\n\n  for (var i = 0, length_1 = touches.length; i < length_1; i++) {\n    touchList.push({\n      pageX: touches[i].clientX,\n      pageY: touches[i].clientY,\n      pointerId: null\n    });\n  }\n\n  return touchList;\n}\n/**\n * removes the element from dom \\\n *\n * @returns {void} removes the element from dom .\\\n * @param { ITouches[] } elementId - provide the elementId  value.\n * @param { PointerEvent } contentId - provide the contentId  value.\n * @private\n */\n\nexport function removeElement(elementId, contentId) {\n  var div = getDiagramElement(elementId, contentId);\n\n  if (div) {\n    div.parentNode.removeChild(div);\n  }\n}\n/**\n * getContent method   \\\n *\n * @returns {void} getContent method .\\\n * @param { DiagramHtmlElement | DiagramNativeElement } element - provide the elementId  value.\n * @param { boolean } isHtml - provide the boolean  value.\n * @param { Node | Annotation | PathAnnotation } nodeObject - provide the nodeObject  value.\n * @private\n */\n\nexport function getContent(element, isHtml, nodeObject) {\n  var div;\n  /* eslint-disable */\n\n  if (isHtml) {\n    var attr = {\n      'style': 'height: 100%; width: 100%'\n    };\n    div = createHtmlElement('div', attr);\n  } else {\n    div = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n  }\n\n  var node = getElement(element);\n  var content = '';\n  var sentNode = {};\n  var isSvg = false;\n  var propertyName;\n\n  if (node instanceof Node) {\n    sentNode = node;\n\n    if (node.shape.type === 'Native') {\n      isSvg = true;\n      var svgContent = void 0;\n      var div_1 = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n      document.body.appendChild(div_1);\n      div_1.innerHTML = node.shape.content;\n      /* tslint:disable */\n\n      svgContent = div_1.getElementsByTagName('svg').length > 0 ? div_1.getElementsByTagName('svg')[0].outerHTML : div_1.getElementsByTagName('g').length > 0 ? div_1.getElementsByTagName('g')[0].outerHTML : \"\";\n      /* tslint:disable */\n\n      node.shape.content = svgContent;\n      /* tslint:disable */\n\n      element.content = svgContent;\n      div_1.parentElement.removeChild(div_1);\n    } //let blazor: string = 'Blazor';\n\n\n    if (isBlazor()) {\n      content = 'diagramsf_node_template';\n      sentNode = cloneBlazorObject(node);\n    }\n\n    propertyName = \"nodeTemplate\";\n  } else {\n    sentNode = node; //new\n\n    if (isBlazor()) {\n      sentNode = cloneBlazorObject(node);\n      content = 'diagramsf_annotation_template';\n    }\n\n    propertyName = \"annotationTemplate\";\n  }\n\n  var item;\n  var diagramElement = document.getElementById(element.diagramId);\n  var instance = 'ej2_instances';\n  var diagram = diagramElement[instance][0];\n\n  if (typeof element.content === 'string' && (!element.isTemplate || isBlazor())) {\n    var template = document.getElementById(element.content);\n\n    if (template) {\n      div.appendChild(template);\n    } else {\n      /* eslint-disable */\n      var compiledString = void 0;\n      compiledString = compile(element.content);\n\n      for (var _i = 0, _a = compiledString(sentNode, diagram, propertyName, content); _i < _a.length; _i++) {\n        item = _a[_i];\n        div.appendChild(item);\n      } //new\n      // for (item of compiledString(sentNode, null, null, content, undefined, undefined, isSvg)) {\n      //     div.appendChild(item);\n      // }\n\n    }\n  } else if (element.isTemplate) {\n    var compiledString = void 0;\n\n    if (diagram.isReact) {\n      compiledString = element.getNodeTemplate()(\n      /* eslint-enable */\n      // eslint-disable-next-line quotes\n      cloneObject(nodeObject), diagram, propertyName + \"_\" + (propertyName === \"nodeTemplate\" ? nodeObject.id : element.nodeId + nodeObject.id), undefined, undefined, false, div);\n    } else {\n      compiledString = element.getNodeTemplate()(\n      /* eslint-enable */\n      // eslint-disable-next-line quotes\n      cloneObject(nodeObject), diagram, propertyName + \"_\" + (propertyName === \"nodeTemplate\" ? nodeObject.id : element.nodeId + nodeObject.id), undefined, undefined, false);\n    }\n\n    if (compiledString) {\n      for (var i = 0; i < compiledString.length; i++) {\n        div.appendChild(compiledString[i]);\n      }\n    }\n  } else {\n    div.appendChild(element.content);\n  }\n\n  return element.isTemplate ? div : isHtml ? div.cloneNode(true) : div.cloneNode(true);\n}\n/* eslint-enable */\n\n/**\n * setAttributeSvg method   \\\n *\n * @returns {void} setAttributeSvg method .\\\n * @param { SVGElement } svg - provide the svg  value.\n * @param { Object } attributes - provide the boolean  value.\n * @private\n */\n\nexport function setAttributeSvg(svg, attributes) {\n  var keys = Object.keys(attributes);\n\n  for (var i = 0; i < keys.length; i++) {\n    if (keys[i] !== 'style') {\n      svg.setAttribute(keys[i], attributes[keys[i]]);\n    } else {\n      applyStyleAgainstCsp(svg, attributes[keys[i]]);\n    }\n  }\n}\n/**\n * applyStyleAgainstCsp method   \\\n *\n * @returns {void} applyStyleAgainstCsp method .\\\n * @param { SVGElement } svg - provide the svg  value.\n * @param { string } attributes - provide the boolean  value.\n * @private\n */\n\nexport function applyStyleAgainstCsp(svg, attributes) {\n  var keys = attributes.split(';');\n\n  for (var i = 0; i < keys.length; i++) {\n    var attribute = keys[i].split(':');\n\n    if (attribute.length === 2) {\n      svg.style[attribute[0].trim()] = attribute[1].trim();\n    }\n  }\n}\n/**\n * setAttributeHtml method   \\\n *\n * @returns {void} setAttributeHtml method .\\\n * @param { HTMLElement } element - provide the svg  value.\n * @param { Object } attributes - provide the boolean  value.\n * @private\n */\n\nexport function setAttributeHtml(element, attributes) {\n  var keys = Object.keys(attributes);\n\n  for (var i = 0; i < keys.length; i++) {\n    if (keys[i] !== 'style') {\n      element.setAttribute(keys[i], attributes[keys[i]]);\n    } else {\n      applyStyleAgainstCsp(element, attributes[keys[i]]);\n    }\n  }\n}\n/**\n * createMeasureElements method   \\\n *\n * @returns {void} createMeasureElements method .\\\n * @private\n */\n\nexport function createMeasureElements() {\n  var measureWindowElement = 'measureElement';\n\n  if (!window[measureWindowElement]) {\n    var divElement = createHtmlElement('div', {\n      id: 'measureElement',\n      style: 'visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;'\n    });\n    var text = createHtmlElement('span', {\n      'style': 'display:inline-block ; line-height: normal'\n    });\n    divElement.appendChild(text); //let imageElement: HTMLImageElement;\n\n    var imageElement = createHtmlElement('img', {\n      'alt': 'measureElementImage',\n      'src': 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'\n    });\n    divElement.appendChild(imageElement);\n    var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttribute('xmlns:xlink', 'http://www.w3.org/1999/xlink');\n    divElement.appendChild(svg);\n    var element = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    element.setAttribute('d', '');\n    svg.appendChild(element); // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n    var data = document.createTextNode('');\n    var tSpan = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n    tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n    svg.appendChild(tSpan);\n    window[measureWindowElement] = divElement;\n    window[measureWindowElement].usageCount = 1;\n    document.body.appendChild(divElement);\n    var measureElementCount = 'measureElementCount';\n\n    if (!window[measureElementCount]) {\n      window[measureElementCount] = 1;\n    } else {\n      window[measureElementCount]++;\n    }\n  } else {\n    window[measureWindowElement].usageCount += 1;\n  }\n}\n/**\n * setChildPosition method   \\\n *\n * @returns {number} setChildPosition method .\\\n * @param {SubTextElement} temp - provide the temp  value.\n * @param {SubTextElement[]} childNodes - provide the childNodes  value.\n * @param {number} i - provide the i  value.\n * @param {TextAttributes} options - provide the options  value.\n * @private\n */\n\nexport function setChildPosition(temp, childNodes, i, options) {\n  if (childNodes.length >= 1 && temp.x === 0 && (options.textOverflow === 'Clip' || options.textOverflow === 'Ellipsis') && (options.textWrapping === 'Wrap' || options.textWrapping === 'WrapWithOverflow')) {\n    temp.x = childNodes[i - 1] ? childNodes[i - 1].x : -(temp.width / 2);\n    return temp.x;\n  }\n\n  return temp.x;\n}\n/**\n * getTemplateContent method   \\\n *\n * @returns {DiagramHtmlElement} getTemplateContent method .\\\n * @param {DiagramHtmlElement} annotationcontent - provide the annotationcontent  value.\n * @param {Annotation} annotation - provide the annotation  value.\n * @param {number} annotationTemplate - provide the annotationTemplate  value.\n * @private\n */\n\nexport function getTemplateContent( // eslint-disable-next-line @typescript-eslint/ban-types\nannotationcontent, annotation, annotationTemplate) {\n  if (annotationTemplate && !annotation.template) {\n    annotationcontent.isTemplate = true;\n    annotationcontent.template = annotationcontent.content = getContent(annotationcontent, true, annotation);\n  } else {\n    annotationcontent.content = annotation.template;\n  }\n\n  return annotationcontent;\n}\n/* eslint-disable */\n\n/** @private */\n\nexport function createUserHandleTemplates(userHandleTemplate, template, selectedItems, diagramID) {\n  var userHandleFn;\n  var handle;\n  var compiledString;\n  var i;\n  var div;\n  var diagramElement = document.getElementById(diagramID);\n  var instance = 'ej2_instances';\n  var diagram = diagramElement[instance][0];\n\n  if (userHandleTemplate && template) {\n    userHandleFn = templateCompiler(userHandleTemplate);\n\n    for (var _i = 0, _a = selectedItems.userHandles; _i < _a.length; _i++) {\n      handle = _a[_i];\n\n      if (userHandleFn) {\n        compiledString = userHandleFn(cloneObject(handle), diagram, 'userHandleTemplate' + '_' + handle.name, undefined, undefined, false);\n\n        for (i = 0; i < compiledString.length; i++) {\n          var attr = {\n            'style': 'height: 100%; width: 100%; pointer-events: all',\n            'id': handle.name + '_template_hiddenUserHandle'\n          };\n          div = createHtmlElement('div', attr);\n          div.appendChild(compiledString[i]);\n        }\n\n        template[0].appendChild(div);\n      }\n    }\n  } else if (isBlazor()) {\n    var content = 'diagramsf_userHandle_template';\n    var a = void 0;\n\n    for (var _b = 0, _c = selectedItems.userHandles; _b < _c.length; _b++) {\n      handle = _c[_b];\n\n      if (!handle.pathData && !handle.content && !handle.source) {\n        compiledString = compile(handle.content);\n\n        for (i = 0, a = compiledString(cloneBlazorObject(handle), diagram, 'userHandleTemplate', content); i < a.length; i++) {\n          var attr = {\n            'style': 'height: 100%; width: 100%; pointer-events: all',\n            'id': handle.name + '_template_hiddenUserHandle'\n          };\n          div = createHtmlElement('div', attr);\n          div.appendChild(a[i]);\n        }\n\n        template[0].appendChild(div);\n      }\n    }\n  }\n}\n/* eslint-enable */","map":{"version":3,"sources":["/home/ubuntu*/Desktop/streamify/node_modules/@syncfusion/ej2-diagrams/src/diagram/utility/dom-util.js"],"names":["Rect","Size","processPathData","splitArrayCollection","transformPath","whiteSpaceToString","wordBreakToString","textAlignToString","bBoxText","cloneObject","identityMatrix","transformPointByMatrix","rotateMatrix","compile","createElement","Browser","isBlazor","Node","getElement","cloneBlazorObject","templateCompiler","removeElementsByClass","className","id","elements","document","getElementById","classList","contains","getElementsByClassName","length","parentNode","removeChild","findSegmentPoints","element","pts","sample","sampleLength","measureWindowElement","window","style","visibility","svg","children","pathNode","getChildNode","setAttributeNS","data","pathBounds","absoluteBounds","pathData","updatePath","pathLength","getTotalLength","getPointAtLength","push","x","y","node","child","collection","info","name","i","childNodes","nodeType","translatePoints","points","translatedPts","_i","points_1","point","pt1","offsetX","actualSize","width","pivot","offsetY","height","matrix","angle","rotateAngle","parentTransform","measurePath","setAttribute","bounds","getBBox","svgBounds","getTextOptions","maxWidth","options","fill","stroke","strokeColor","pivotX","pivotY","strokeWidth","dashArray","strokeDashArray","opacity","shadow","gradient","visible","description","fontSize","fontFamily","textOverflow","textDecoration","doWrap","whiteSpace","textWrapping","content","breakWord","textAlign","color","italic","bold","wrapSvgText","text","textValue","laneWidth","k","txtValue","bounds1","dy","indexOf","Math","ceil","wordWrapping","j","wrap","eachLine","split","txt","words","newText","existingWidth","existingText","floor","wrapSvgTextAlign","wrapBounds","txtWidth","min","max","measureHtmlText","createHtmlElement","fontWeight","fontStyle","undefined","toString","textContent","wordBreak","body","appendChild","offsetWidth","offsetHeight","measureText","isLaneOrientation","measureImage","source","contentSize","callback","imageElement","getBoundingClientRect","setAttributeHtml","onload","event","loadedImage","currentTarget","measureNativeContent","nativeContent","nativeSVG","rect","left","top","measureNativeSvg","initX","initY","scaleX","scaleY","isScale","newPathString","arrayCollection","bBox","Number","getDiagramLayerSvg","diagramId","diagramElement","getDiagramElement","elementcoll","diagramLayerSvg","elementId","contentId","querySelector","CSS","escape","getDomIndex","viewId","layer","index","parentElement","postId","getNativeLayer","getHTMLLayer","getDiagramLayer","childElement","getAdornerLayerSvg","adornerLayerSvg","getSelectorElement","adornerLayer","adornerSvg","getAdornerLayer","diagramAdornerSvg","getUserHandleLayer","diagramUserHandleLayer","diagramLayer","getPortLayerSvg","getNativeLayerSvg","nativeLayerSvg","getGridLayerSvg","gridLayerSvg","getBackgroundLayerSvg","getBackgroundImageLayer","imageLayer","getBackgroundLayer","getGridLayer","domTable","expandCollapse","diagramGridSvg","nativeLayer","htmlLayer","elementType","attribute","createSvgElement","createElementNS","setAttributeSvg","parentsUntil","elem","selector","isID","parent","hasClass","eClassName","animVal","getScrollerWidth","outer","widthNoScroll","overflow","inner","widthWithScroll","addTouchPointer","touchList","e","touches","length_1","pageX","clientX","pageY","clientY","pointerId","removeElement","div","getContent","isHtml","nodeObject","attr","sentNode","isSvg","propertyName","shape","type","svgContent","div_1","innerHTML","getElementsByTagName","outerHTML","item","instance","diagram","isTemplate","template","compiledString","_a","isReact","getNodeTemplate","nodeId","cloneNode","attributes","keys","Object","applyStyleAgainstCsp","trim","createMeasureElements","divElement","createTextNode","tSpan","usageCount","measureElementCount","setChildPosition","temp","getTemplateContent","annotationcontent","annotation","annotationTemplate","createUserHandleTemplates","userHandleTemplate","selectedItems","diagramID","userHandleFn","handle","userHandles","a","_b","_c"],"mappings":"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","sourcesContent":["import { Rect } from '../primitives/rect';\nimport { Size } from '../primitives/size';\nimport { processPathData, splitArrayCollection, transformPath } from './path-util';\nimport { whiteSpaceToString, wordBreakToString, textAlignToString, bBoxText, cloneObject } from './base-util';\nimport { identityMatrix, transformPointByMatrix, rotateMatrix } from '../primitives/matrix';\nimport { compile, createElement, Browser, isBlazor } from '@syncfusion/ej2-base';\nimport { Node } from '../objects/node';\nimport { getElement, cloneBlazorObject } from './diagram-util';\nimport { templateCompiler } from '../utility/base-util';\n/**\n * Defines the functionalities that need to access DOM\n */\n/**\n * removeElementsByClass method \\\n *\n * @returns {void} removeElementsByClass method .\\\n * @param { string } className - provide the element  value.\n * @param {string} id - provide the string  value.\n * @private\n */\nexport function removeElementsByClass(className, id) {\n    var elements;\n    if (id && document.getElementById(id).classList.contains(className)) {\n        elements = document.getElementById(id).getElementsByClassName(className);\n    }\n    else {\n        elements = document.getElementsByClassName(className);\n    }\n    while (elements.length > 0) {\n        elements[0].parentNode.removeChild(elements[0]);\n    }\n}\n/**\n * findSegmentPoints method \\\n *\n * @returns {PointModel[]} findSegmentPoints method .\\\n * @param { PathElement } element - provide the element  value.\n * @private\n */\nexport function findSegmentPoints(element) {\n    var pts = [];\n    var sample;\n    var sampleLength;\n    var measureWindowElement = 'measureElement';\n    window[measureWindowElement].style.visibility = 'visible';\n    var svg = window[measureWindowElement].children[2];\n    var pathNode = getChildNode(svg)[0];\n    pathNode.setAttributeNS(null, 'd', element.data);\n    var pathBounds = element.absoluteBounds; // || pathNode.getBBox();\n    var pathData = updatePath(element, pathBounds, element);\n    pathNode.setAttributeNS(null, 'd', pathData);\n    var pathLength = pathNode.getTotalLength();\n    for (sampleLength = 0; sampleLength <= pathLength; sampleLength += 10) {\n        sample = pathNode.getPointAtLength(sampleLength);\n        pts.push({ x: sample.x, y: sample.y });\n    }\n    window[measureWindowElement].style.visibility = 'hidden';\n    return pts;\n}\n/**\n * getChildNode method \\\n *\n * @returns {SVGElement[] | HTMLCollection} findSegmentPoints method .\\\n * @param { SVGElement } node - provide the element  value.\n * @private\n */\nexport function getChildNode(node) {\n    var child;\n    var collection = [];\n    if (Browser.info.name === 'msie' || Browser.info.name === 'edge') {\n        for (var i = 0; i < node.childNodes.length; i++) {\n            child = node.childNodes[i];\n            if (child.nodeType === 1) {\n                collection.push(child);\n            }\n        }\n    }\n    else {\n        collection = node.children;\n    }\n    return collection;\n}\n/**\n * translatePoints method \\\n *\n * @returns {PointModel[]} translatePoints method .\\\n * @param { SVGElement } element - provide the element  value.\n * @param { PointModel[] } points - provide the element  value.\n * @private\n */\nexport function translatePoints(element, points) {\n    var translatedPts = [];\n    for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {\n        var point = points_1[_i];\n        var pt1 = {\n            x: element.offsetX - element.actualSize.width * element.pivot.x + point.x,\n            y: element.offsetY - element.actualSize.height * element.pivot.y + point.y\n        };\n        var matrix = void 0;\n        var angle = element.rotateAngle + element.parentTransform;\n        if (angle) {\n            matrix = identityMatrix();\n            rotateMatrix(matrix, angle, element.offsetX, element.offsetY);\n        }\n        if (matrix) {\n            pt1 = transformPointByMatrix(matrix, pt1);\n        }\n        translatedPts.push(pt1);\n    }\n    return translatedPts;\n}\n/**\n * measurePath method \\\n *\n * @returns {Rect} measurePath method .\\\n * @param { string } data - provide the element  value.\n * @private\n */\nexport function measurePath(data) {\n    if (data) {\n        var measureWindowElement = 'measureElement';\n        window[measureWindowElement].style.visibility = 'visible';\n        var svg = window[measureWindowElement].children[2];\n        var element = getChildNode(svg)[0];\n        element.setAttribute('d', data);\n        var bounds = element.getBBox();\n        var svgBounds = new Rect(bounds.x, bounds.y, bounds.width, bounds.height);\n        window[measureWindowElement].style.visibility = 'hidden';\n        return svgBounds;\n    }\n    return new Rect(0, 0, 0, 0);\n}\n/**\n * getTextOptions method \\\n *\n * @returns {BaseAttributes} getTextOptions method .\\\n * @param { TextElement } element - provide the element  value.\n * @param { number } maxWidth - provide the maxWidth  value.\n * @private\n */\nfunction getTextOptions(element, maxWidth) {\n    var options = {\n        fill: element.style.fill, stroke: element.style.strokeColor, angle: element.rotateAngle + element.parentTransform,\n        pivotX: element.pivot.x, pivotY: element.pivot.y, strokeWidth: element.style.strokeWidth,\n        dashArray: element.style.strokeDashArray, opacity: element.style.opacity, shadow: element.shadow,\n        gradient: element.style.gradient, visible: element.visible, id: element.id, description: element.description,\n        width: maxWidth || element.actualSize.width, height: element.actualSize.height,\n        x: element.offsetX - element.actualSize.width * element.pivot.x + 0.5,\n        y: element.offsetY - element.actualSize.height * element.pivot.y + 0.5\n    };\n    options.fontSize = element.style.fontSize;\n    options.fontFamily = element.style.fontFamily;\n    options.textOverflow = element.style.textOverflow;\n    options.textDecoration = element.style.textDecoration;\n    options.doWrap = element.doWrap;\n    options.whiteSpace = whiteSpaceToString(element.style.whiteSpace, element.style.textWrapping);\n    options.content = element.content;\n    options.textWrapping = element.style.textWrapping;\n    options.breakWord = wordBreakToString(element.style.textWrapping);\n    options.textAlign = textAlignToString(element.style.textAlign);\n    options.color = element.style.color;\n    options.italic = element.style.italic;\n    options.bold = element.style.bold;\n    options.dashArray = '';\n    options.strokeWidth = 0;\n    options.fill = '';\n    return options;\n}\n/**\n * wrapSvgText method \\\n *\n * @returns {SubTextElement[]} wrapSvgText method .\\\n * @param { TextAttributes } text - provide the element  value.\n * @param { string } textValue - provide the maxWidth  value.\n * @param { number } laneWidth - provide the maxWidth  value.\n * @private\n */\nfunction wrapSvgText(text, textValue, laneWidth) {\n    var childNodes = [];\n    var k = 0;\n    var txtValue;\n    var bounds1;\n    var content = textValue || text.content;\n    if (text.whiteSpace !== 'nowrap' && text.whiteSpace !== 'pre') {\n        if (text.breakWord === 'breakall') {\n            txtValue = '';\n            txtValue += content[0];\n            for (k = 0; k < content.length; k++) {\n                bounds1 = bBoxText(txtValue, text);\n                if (bounds1 >= text.width && txtValue.length > 0) {\n                    childNodes[childNodes.length] = { text: txtValue, x: 0, dy: 0, width: bounds1 };\n                    txtValue = '';\n                }\n                else {\n                    txtValue = txtValue + (content[k + 1] || '');\n                    if (txtValue.indexOf('\\n') > -1) {\n                        childNodes[childNodes.length] = { text: txtValue, x: 0, dy: 0, width: bBoxText(txtValue, text) };\n                        txtValue = '';\n                    }\n                    var width = bBoxText(txtValue, text);\n                    if (Math.ceil(width) + 2 >= text.width && txtValue.length > 0) {\n                        childNodes[childNodes.length] = { text: txtValue, x: 0, dy: 0, width: width };\n                        txtValue = '';\n                    }\n                    if (k === content.length - 1 && txtValue.length > 0) {\n                        childNodes[childNodes.length] = { text: txtValue, x: 0, dy: 0, width: width };\n                        txtValue = '';\n                    }\n                }\n            }\n        }\n        else {\n            childNodes = wordWrapping(text, textValue, laneWidth);\n        }\n    }\n    else {\n        childNodes[childNodes.length] = { text: content, x: 0, dy: 0, width: bBoxText(content, text) };\n    }\n    return childNodes;\n}\n/**\n * wordWrapping method \\\n *\n * @returns {SubTextElement[]} wordWrapping method .\\\n * @param { TextAttributes } text - provide the element  value.\n * @param { string } textValue - provide the maxWidth  value.\n * @param { number } laneWidth - provide the maxWidth  value.\n * @private\n */\nfunction wordWrapping(text, textValue, laneWidth) {\n    var childNodes = [];\n    var txtValue = '';\n    var j = 0;\n    var i = 0;\n    var wrap = text.whiteSpace !== 'nowrap' ? true : false;\n    var content = textValue || text.content;\n    var eachLine = content.split('\\n');\n    var txt;\n    var words;\n    var newText;\n    var existingWidth;\n    var existingText;\n    for (j = 0; j < eachLine.length; j++) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        txt = '';\n        words = text.textWrapping !== 'NoWrap' ? eachLine[j].split(' ') : (text.textWrapping === 'NoWrap') ? [eachLine[j]] : eachLine;\n        for (i = 0; i < words.length; i++) {\n            txtValue += (((i !== 0 || words.length === 1) && wrap && txtValue.length > 0) ? ' ' : '') + words[i];\n            newText = txtValue + ' ' + (words[i + 1] || '');\n            var width = bBoxText(newText, text);\n            if (Math.floor(width) > (laneWidth || text.width) - 2 && txtValue.length > 0) {\n                childNodes[childNodes.length] = {\n                    text: txtValue, x: 0, dy: 0,\n                    width: newText === txtValue ? width : (txtValue === existingText) ? existingWidth : bBoxText(txtValue, text)\n                };\n                txtValue = '';\n            }\n            else {\n                if (i === words.length - 1) {\n                    childNodes[childNodes.length] = { text: txtValue, x: 0, dy: 0, width: width };\n                    txtValue = '';\n                }\n            }\n            existingText = newText;\n            existingWidth = width;\n        }\n    }\n    return childNodes;\n}\n/**\n * wrapSvgTextAlign method \\\n *\n * @returns {TextBounds} wrapSvgTextAlign method .\\\n * @param { TextAttributes } text - provide the element  value.\n * @param { string } childNodes - provide the maxWidth  value.\n * @private\n */\nfunction wrapSvgTextAlign(text, childNodes) {\n    var wrapBounds = { x: 0, width: 0 };\n    var k = 0;\n    var txtWidth;\n    var width;\n    for (k = 0; k < childNodes.length; k++) {\n        txtWidth = childNodes[k].width;\n        width = txtWidth;\n        if (text.textAlign === 'left') {\n            txtWidth = 0;\n        }\n        else if (text.textAlign === 'center') {\n            if (txtWidth > text.width && (text.textOverflow === 'Ellipsis' || text.textOverflow === 'Clip')) {\n                txtWidth = 0;\n            }\n            else {\n                txtWidth = -txtWidth / 2;\n            }\n        }\n        else if (text.textAlign === 'right') {\n            txtWidth = -txtWidth;\n        }\n        else {\n            txtWidth = childNodes.length > 1 ? 0 : -txtWidth / 2;\n        }\n        childNodes[k].dy = text.fontSize * 1.2;\n        childNodes[k].x = txtWidth;\n        if (!wrapBounds) {\n            wrapBounds = {\n                x: txtWidth,\n                width: width\n            };\n        }\n        else {\n            wrapBounds.x = Math.min(wrapBounds.x, txtWidth);\n            wrapBounds.width = Math.max(wrapBounds.width, width);\n        }\n    }\n    return wrapBounds;\n}\n/**\n * measureHtmlText method \\\n *\n * @returns {TextBounds} measureHtmlText method .\\\n * @param { TextStyleModel } style - provide the style  value.\n * @param { string } content - provide the content  value.\n * @param { string } width - provide the width  value.\n * @param { string } height - provide the height  value.\n * @param { string } maxWidth - provide the maxWidth  value.\n * @private\n */\nexport function measureHtmlText(style, content, width, height, maxWidth) {\n    var bounds = new Size();\n    var text = createHtmlElement('span', { 'style': 'display:inline-block; line-height: normal' });\n    if (style.bold) {\n        text.style.fontWeight = 'bold';\n    }\n    if (style.italic) {\n        text.style.fontStyle = 'italic';\n    }\n    if (width !== undefined) {\n        text.style.width = width.toString() + 'px';\n    }\n    if (height !== undefined) {\n        text.style.height = height.toString() + 'px';\n    }\n    if (maxWidth !== undefined) {\n        text.style.maxWidth = maxWidth.toString() + 'px';\n    }\n    text.style.fontFamily = style.fontFamily;\n    text.style.fontSize = style.fontSize + 'px';\n    text.style.color = style.color;\n    text.textContent = content;\n    text.style.whiteSpace = whiteSpaceToString(style.whiteSpace, style.textWrapping);\n    if (maxWidth !== undefined) {\n        text.style.wordBreak = 'break-word';\n    }\n    else {\n        text.style.wordBreak = wordBreakToString(style.textWrapping);\n    }\n    document.body.appendChild(text);\n    bounds.width = text.offsetWidth;\n    bounds.height = text.offsetHeight;\n    document.body.removeChild(text);\n    return bounds;\n}\n/**\n * measureText method \\\n *\n * @returns {Size} measureText method .\\\n * @param { TextStyleModel } text - provide the text  value.\n * @param { string } style - provide the style  value.\n * @param { string } content - provide the content  value.\n * @param { number } maxWidth - provide the maxWidth  value.\n * @param { string } textValue - provide the textValue  value.\n * @private\n */\nexport function measureText(text, style, content, maxWidth, textValue) {\n    var bounds = new Size(0, 0);\n    var childNodes;\n    var wrapBounds;\n    var options = getTextOptions(text, maxWidth);\n    text.childNodes = childNodes = wrapSvgText(options, textValue, text.isLaneOrientation ? maxWidth : undefined);\n    text.wrapBounds = wrapBounds = wrapSvgTextAlign(options, childNodes);\n    bounds.width = wrapBounds.width;\n    if (text.wrapBounds.width >= maxWidth && options.textOverflow !== 'Wrap') {\n        bounds.width = maxWidth;\n    }\n    bounds.height = childNodes.length * text.style.fontSize * 1.2;\n    return bounds;\n}\n/**\n * measureImage method \\\n *\n * @returns {Size} measureImage method .\\\n * @param { string } source - provide the text  value.\n * @param { Size } contentSize - provide the style  value.\n * @param { string } id - provide the content  value.\n * @param { Function } callback - provide the maxWidth  value.\n * @private\n */\n// eslint-disable-next-line\nexport function measureImage(source, contentSize, id, callback) {\n    var measureWindowElement = 'measureElement';\n    window[measureWindowElement].style.visibility = 'visible';\n    var imageElement = window[measureWindowElement].children[1];\n    imageElement.setAttribute('src', source);\n    var bounds = imageElement.getBoundingClientRect();\n    var width = bounds.width;\n    var height = bounds.height;\n    contentSize = new Size(width, height);\n    window[measureWindowElement].style.visibility = 'hidden';\n    var element = document.createElement('img');\n    element.setAttribute('src', source);\n    setAttributeHtml(element, { id: id + 'sf-imageNode', style: 'display: none;' });\n    document.body.appendChild(element);\n    // eslint-disable-next-line\n    element.onload = function (event) {\n        var loadedImage = event.currentTarget;\n        if (callback) {\n            callback(id, { width: loadedImage.width, height: loadedImage.height });\n        }\n    };\n    return contentSize;\n}\n/* eslint-disable */\n/**\n * measureNativeContent method \\\n *\n * @returns {Rect} measureNativeContent method .\\\n * @param { SVGElement } nativeContent - provide the text  value.\n * @private\n */\nexport function measureNativeContent(nativeContent) {\n    var measureWindowElement = 'measureElement';\n    window[measureWindowElement].style.visibility = 'visible';\n    var nativeSVG = window[measureWindowElement].children[2];\n    nativeSVG.appendChild(nativeContent);\n    var bounds = nativeContent.getBoundingClientRect();\n    var svgBounds = nativeSVG.getBoundingClientRect();\n    var rect = bounds;\n    rect.x = bounds.left - svgBounds.left;\n    rect.y = bounds.top - svgBounds.top;\n    nativeSVG.removeChild(nativeContent);\n    window[measureWindowElement].style.visibility = 'hidden';\n    return rect;\n}\n/**\n * measureNativeSvg method \\\n *\n * @returns {Rect} measureNativeSvg method .\\\n * @param { SVGElement } nativeContent - provide the text  value.\n * @private\n */\nexport function measureNativeSvg(nativeContent) {\n    var measureWindowElement = 'measureElement';\n    window[measureWindowElement].style.visibility = 'visible';\n    var nativeSVG = window[measureWindowElement].children[2];\n    nativeSVG.appendChild(nativeContent);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var svgBounds = nativeSVG.getBoundingClientRect();\n    nativeSVG.removeChild(nativeContent);\n    window[measureWindowElement].style.visibility = 'hidden';\n    return svgBounds;\n}\n/**\n * updatePath method \\\n *\n * @returns {string} updatePath method .\\\n * @param { SVGElement } element - provide the element  value.\n * @param { Rect } bounds - provide the bounds  value.\n * @param { PathElement } child - provide the child  value.\n * @param { BaseAttributes } options - provide the options  value.\n * @private\n */\nexport function updatePath(element, bounds, child, options) {\n    var initX = 0;\n    var initY = 0;\n    var scaleX = 0;\n    var scaleY = 0;\n    var isScale = false;\n    var newPathString = '';\n    var arrayCollection = [];\n    var bBox = bounds;\n    if (initX !== bBox.x || initY !== bBox.y) {\n        scaleX = initX - Number(bBox.x);\n        scaleY = initY - Number(bBox.y);\n    }\n    if (element.actualSize.width !== bBox.width || element.actualSize.height !== bBox.height || options) {\n        scaleX = (options && options.width || element.actualSize.width) / Number(bBox.width ? bBox.width : 1);\n        scaleY = (options && options.height || element.actualSize.height) / Number(bBox.height ? bBox.height : 1);\n        isScale = true;\n    }\n    arrayCollection = processPathData(element.data);\n    arrayCollection = splitArrayCollection(arrayCollection);\n    newPathString = transformPath(arrayCollection, scaleX, scaleY, isScale, bBox.x, bBox.y, initX, initY);\n    isScale = false;\n    return newPathString;\n}\n/**\n * getDiagramLayerSvg method \\\n *\n * @returns {string} getDiagramLayerSvg method .\\\n * @param { string } diagramId - provide the element  value.\n * @private\n */\nexport function getDiagramLayerSvg(diagramId) {\n    //let diagramLayerSvg: SVGSVGElement;\n    var diagramElement = getDiagramElement(diagramId);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var elementcoll = diagramElement.getElementsByClassName('e-diagram-layer');\n    var diagramLayerSvg = elementcoll[0];\n    return diagramLayerSvg;\n}\n/**\n * getDiagramElement method \\\n *\n * @returns {HTMLElement} getDiagramElement method .\\\n * @param { string } elementId - provide the elementId  value.\n * @param { string } contentId - provide the elementId  value.\n * @private\n */\nexport function getDiagramElement(elementId, contentId) {\n    var diagramElement;\n    var element;\n    if (contentId) {\n        element = document.getElementById(contentId);\n    }\n    if (Browser.info.name === 'msie' || Browser.info.name === 'edge') {\n        diagramElement = (element) ? element.querySelector('#' + elementId) : document.getElementById(elementId);\n    }\n    else {\n        diagramElement = (element) ? element.querySelector('#' + CSS.escape(elementId)) : document.getElementById(elementId);\n    }\n    return diagramElement;\n}\n/**\n * getDomIndex method \\\n *\n * @returns {HTMLElement} getDomIndex method .\\\n * @param { string } viewId - provide the elementId  value.\n * @param { string } elementId - provide the elementId  value.\n * @param { string } layer - provide the elementId  value.\n * @private\n */\nexport function getDomIndex(viewId, elementId, layer) {\n    var index = undefined;\n    var parentElement;\n    var postId = '';\n    if (layer === 'native') {\n        parentElement = getNativeLayer(viewId);\n        postId = '_content_groupElement';\n    }\n    else if (layer === 'html') {\n        parentElement = getHTMLLayer(viewId).childNodes[0];\n        postId = '_html_element';\n    }\n    else {\n        parentElement = getDiagramLayer(viewId);\n        postId = '_groupElement';\n    }\n    var childElement;\n    for (var i = 0; parentElement.childNodes && i < parentElement.childNodes.length; i++) {\n        childElement = parentElement.childNodes[i];\n        if (childElement && childElement.id === elementId + postId) {\n            index = i;\n            break;\n        }\n    }\n    return index;\n}\n/**\n * getAdornerLayerSvg method \\\n *\n * @returns {SVGSVGElement} getAdornerLayerSvg method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\nexport function getAdornerLayerSvg(diagramId) {\n    var adornerLayerSvg = null;\n    var diagramElement = getDiagramElement(diagramId);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var elementcoll = diagramElement.getElementsByClassName('e-adorner-layer');\n    adornerLayerSvg = elementcoll[0];\n    return adornerLayerSvg;\n}\n/**\n * getSelectorElement method \\\n *\n * @returns {SVGSVGElement} getSelectorElement method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\nexport function getSelectorElement(diagramId) {\n    var adornerLayer = null;\n    var adornerSvg = getAdornerLayerSvg(diagramId);\n    adornerLayer = adornerSvg.getElementById(diagramId + '_SelectorElement');\n    return adornerLayer;\n}\n/**\n * getAdornerLayer method \\\n *\n * @returns {SVGSVGElement} getAdornerLayer method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\nexport function getAdornerLayer(diagramId) {\n    var adornerLayer = null;\n    var diagramAdornerSvg = getAdornerLayerSvg(diagramId);\n    adornerLayer = diagramAdornerSvg.getElementById(diagramId + '_diagramAdorner');\n    return adornerLayer;\n}\n/**\n * getUserHandleLayer method \\\n *\n * @returns {HTMLElement} getUserHandleLayer method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\nexport function getUserHandleLayer(diagramId) {\n    var adornerLayer = null;\n    var diagramUserHandleLayer = getDiagramElement(diagramId);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var elementcoll = diagramUserHandleLayer.getElementsByClassName('e-userHandle-layer');\n    adornerLayer = elementcoll[0];\n    return adornerLayer;\n}\n/**\n * getDiagramLayer method \\\n *\n * @returns {HTMLElement} getDiagramLayer method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\nexport function getDiagramLayer(diagramId) {\n    //let diagramLayer: SVGElement;\n    var diagramLayerSvg = getDiagramLayerSvg(diagramId);\n    var diagramLayer = diagramLayerSvg.getElementById(diagramId + '_diagramLayer');\n    return diagramLayer;\n}\n/**\n * getPortLayerSvg method \\\n *\n * @returns {SVGSVGElement} getPortLayerSvg method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\nexport function getPortLayerSvg(diagramId) {\n    var adornerLayerSvg = null;\n    var diagramElement = getDiagramElement(diagramId);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var elementcoll = diagramElement.getElementsByClassName('e-ports-expand-layer');\n    adornerLayerSvg = elementcoll[0];\n    return adornerLayerSvg;\n}\n/**\n * getNativeLayerSvg method \\\n *\n * @returns {SVGSVGElement} getNativeLayerSvg method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\nexport function getNativeLayerSvg(diagramId) {\n    var nativeLayerSvg;\n    var diagramElement = getDiagramElement(diagramId);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var elementcoll = diagramElement.getElementsByClassName('e-native-layer');\n    nativeLayerSvg = elementcoll[0];\n    return nativeLayerSvg;\n}\n/**\n * getGridLayerSvg method \\\n *\n * @returns {SVGSVGElement} getNativeLayerSvg method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\nexport function getGridLayerSvg(diagramId) {\n    var gridLayerSvg = null;\n    var diagramElement = getDiagramElement(diagramId);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var elementcoll = diagramElement.getElementsByClassName('e-grid-layer');\n    gridLayerSvg = elementcoll[0];\n    return gridLayerSvg;\n}\n/**\n * getBackgroundLayerSvg method \\\n *\n * @returns {SVGSVGElement} getBackgroundLayerSvg method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\nexport function getBackgroundLayerSvg(diagramId) {\n    var gridLayerSvg = null;\n    var diagramElement = getDiagramElement(diagramId);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var elementcoll = diagramElement.getElementsByClassName('e-background-layer');\n    return elementcoll[0].parentNode;\n}\n/**\n * getBackgroundImageLayer method \\\n *\n * @returns {SVGSVGElement} getBackgroundImageLayer method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\nexport function getBackgroundImageLayer(diagramId) {\n    var imageLayer = null;\n    var diagramElement = getDiagramElement(diagramId);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var elementcoll = diagramElement.getElementsByClassName('e-background-image-layer');\n    imageLayer = elementcoll[0];\n    return imageLayer;\n}\n/**\n * getBackgroundLayer method \\\n *\n * @returns {SVGSVGElement} getBackgroundLayer method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\nexport function getBackgroundLayer(diagramId) {\n    var imageLayer = null;\n    var diagramElement = getDiagramElement(diagramId);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var elementcoll = diagramElement.getElementsByClassName('e-background-layer');\n    imageLayer = elementcoll[0];\n    return imageLayer;\n}\n/**\n * getGridLayer method \\\n *\n * @returns {SVGSVGElement} getGridLayer method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\nexport function getGridLayer(diagramId) {\n    var domTable = 'domTable';\n    var expandCollapse = null;\n    if (!window[domTable][diagramId + '_gridline']) {\n        var diagramGridSvg = getGridLayerSvg(diagramId);\n        expandCollapse = diagramGridSvg.getElementById(diagramId + '_gridline');\n        window[domTable][diagramId + '_gridline'] = expandCollapse;\n    }\n    else {\n        expandCollapse = window[domTable][diagramId + '_gridline'];\n    }\n    return expandCollapse;\n}\n// /** @private */\n// export function getExpandCollapseLayer(diagramId: string): SVGElement {\n//     let expandCollapse: SVGElement = null;\n//     let diagramPortSvg: SVGSVGElement = getPortLayerSvg(diagramId);\n//     expandCollapse = diagramPortSvg.getElementById(diagramId + '_diagramExpander') as SVGElement;\n//     return expandCollapse;\n// }\n// /** @private */\n// export function getPortsLayer(diagramId: string): SVGElement {\n//     let expandCollapse: SVGElement = null;\n//     let diagramPortSvg: SVGSVGElement = getPortLayerSvg(diagramId);\n//     expandCollapse = diagramPortSvg.getElementById(diagramId + '_diagramPorts') as SVGElement;\n//     return expandCollapse;\n// }\n/**\n * getNativeLayer method \\\n *\n * @returns {SVGSVGElement} getNativeLayer method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\nexport function getNativeLayer(diagramId) {\n    var nativeLayer = null;\n    var nativeLayerSvg = getNativeLayerSvg(diagramId);\n    nativeLayer = nativeLayerSvg.getElementById(diagramId + '_nativeLayer');\n    return nativeLayer;\n}\n/**\n * getHTMLLayer method \\\n *\n * @returns {SVGSVGElement} getHTMLLayer method .\\\n * @param { string } diagramId - provide the diagramId  value.\n * @private\n */\nexport function getHTMLLayer(diagramId) {\n    var htmlLayer = null;\n    var domTable = 'domTable';\n    if (!window[domTable][diagramId + 'html_layer']) {\n        var element = getDiagramElement(diagramId);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var elementcoll = element.getElementsByClassName('e-html-layer');\n        htmlLayer = elementcoll[0];\n        window[domTable][diagramId + 'html_layer'] = htmlLayer;\n    }\n    else {\n        htmlLayer = window[domTable][diagramId + 'html_layer'];\n    }\n    return htmlLayer;\n}\n/* eslint-enable */\n/**\n * createHtmlElement method \\\n *\n * @returns {SVGSVGElement} createHtmlElement method .\\\n * @param { string } elementType - provide the diagramId  value.\n * @param { Object } attribute - provide the diagramId  value.\n * @private\n */\nexport function createHtmlElement(elementType, attribute) {\n    var element = createElement(elementType);\n    setAttributeHtml(element, attribute);\n    return element;\n}\n/**\n * createSvgElement method \\\n *\n * @returns {SVGSVGElement} createSvgElement method .\\\n * @param { string } elementType - provide the elementType  value.\n * @param { Object } attribute - provide the attribute  value.\n * @private\n */\nexport function createSvgElement(elementType, attribute) {\n    var element = document.createElementNS('http://www.w3.org/2000/svg', elementType);\n    setAttributeSvg(element, attribute);\n    return element;\n}\n/** @hidden */\n/**\n * parentsUntil method \\\n *\n * @returns {SVGSVGElement} parentsUntil method .\\\n * @param { Element } elem - provide the elementType  value.\n * @param { string } selector - provide the attribute  value.\n * @param { boolean } isID - provide the attribute  value.\n * @private\n */\nexport function parentsUntil(elem, selector, isID) {\n    var parent = elem;\n    while (parent) {\n        if (isID ? parent.id === selector : hasClass(parent, selector)) {\n            break;\n        }\n        parent = parent.parentNode;\n    }\n    return parent;\n}\n/**\n * hasClass method \\\n *\n * @returns {SVGSVGElement} hasClass method .\\\n * @param { HTMLElement } element - provide the element  value.\n * @param { string } className - provide the className  value.\n * @private\n */\nexport function hasClass(element, className) {\n    var eClassName = (typeof element.className === 'object') ? element.className.animVal : element.className;\n    return ((' ' + eClassName + ' ').indexOf(' ' + className + ' ') > -1) ? true : false;\n}\n/**\n * getScrollerWidth method \\\n *\n * @returns {number} getScrollerWidth method .\\\n * @private\n */\nexport function getScrollerWidth() {\n    var outer = createHtmlElement('div', { 'style': 'visibility:hidden; width: 100px' });\n    document.body.appendChild(outer);\n    var widthNoScroll = outer.getBoundingClientRect().width;\n    // force scrollbars\n    outer.style.overflow = 'scroll';\n    // add innerdiv\n    var inner = createHtmlElement('div', { 'style': 'width:100%' });\n    outer.appendChild(inner);\n    var widthWithScroll = inner.getBoundingClientRect().width;\n    // remove divs\n    outer.parentNode.removeChild(outer);\n    return widthNoScroll - widthWithScroll;\n}\n/**\n * addTouchPointer method \\\n *\n * @returns {ITouches[]} addTouchPointer method .\\\n * @param { ITouches[] } touchList - provide the touchList  value.\n * @param { PointerEvent } e - provide the e  value.\n * @param { TouchList } touches - provide the touches  value.\n * @private\n */\nexport function addTouchPointer(touchList, e, touches) {\n    touchList = [];\n    for (var i = 0, length_1 = touches.length; i < length_1; i++) {\n        touchList.push({ pageX: touches[i].clientX, pageY: touches[i].clientY, pointerId: null });\n    }\n    return touchList;\n}\n/**\n * removes the element from dom \\\n *\n * @returns {void} removes the element from dom .\\\n * @param { ITouches[] } elementId - provide the elementId  value.\n * @param { PointerEvent } contentId - provide the contentId  value.\n * @private\n */\nexport function removeElement(elementId, contentId) {\n    var div = getDiagramElement(elementId, contentId);\n    if (div) {\n        div.parentNode.removeChild(div);\n    }\n}\n/**\n * getContent method   \\\n *\n * @returns {void} getContent method .\\\n * @param { DiagramHtmlElement | DiagramNativeElement } element - provide the elementId  value.\n * @param { boolean } isHtml - provide the boolean  value.\n * @param { Node | Annotation | PathAnnotation } nodeObject - provide the nodeObject  value.\n * @private\n */\nexport function getContent(element, isHtml, nodeObject) {\n    var div;\n    /* eslint-disable */\n    if (isHtml) {\n        var attr = { 'style': 'height: 100%; width: 100%' };\n        div = createHtmlElement('div', attr);\n    }\n    else {\n        div = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n    }\n    var node = getElement(element);\n    var content = '';\n    var sentNode = {};\n    var isSvg = false;\n    var propertyName;\n    if (node instanceof Node) {\n        sentNode = node;\n        if (node.shape.type === 'Native') {\n            isSvg = true;\n            var svgContent = void 0;\n            var div_1 = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n            document.body.appendChild(div_1);\n            div_1.innerHTML = (node.shape.content);\n            /* tslint:disable */\n            svgContent = (div_1.getElementsByTagName('svg').length > 0)\n                ? div_1.getElementsByTagName('svg')[0].outerHTML :\n                div_1.getElementsByTagName('g').length > 0 ? div_1.getElementsByTagName('g')[0].outerHTML : \"\";\n            /* tslint:disable */\n            node.shape.content = svgContent;\n            /* tslint:disable */\n            element.content = svgContent;\n            div_1.parentElement.removeChild(div_1);\n        }\n        //let blazor: string = 'Blazor';\n        if (isBlazor()) {\n            content = 'diagramsf_node_template';\n            sentNode = cloneBlazorObject(node);\n        }\n        propertyName = \"nodeTemplate\";\n    }\n    else {\n        sentNode = node;\n        //new\n        if (isBlazor()) {\n            sentNode = cloneBlazorObject(node);\n            content = 'diagramsf_annotation_template';\n        }\n        propertyName = \"annotationTemplate\";\n    }\n    var item;\n    var diagramElement = document.getElementById(element.diagramId);\n    var instance = 'ej2_instances';\n    var diagram = diagramElement[instance][0];\n    if (typeof element.content === 'string' && (!element.isTemplate || isBlazor())) {\n        var template = document.getElementById(element.content);\n        if (template) {\n            div.appendChild(template);\n        }\n        else {\n            /* eslint-disable */\n            var compiledString = void 0;\n            compiledString = compile(element.content);\n            for (var _i = 0, _a = compiledString(sentNode, diagram, propertyName, content); _i < _a.length; _i++) {\n                item = _a[_i];\n                div.appendChild(item);\n            }\n            //new\n            // for (item of compiledString(sentNode, null, null, content, undefined, undefined, isSvg)) {\n            //     div.appendChild(item);\n            // }\n        }\n    }\n    else if (element.isTemplate) {\n        var compiledString = void 0;\n        if (diagram.isReact) {\n            compiledString = element.getNodeTemplate()(\n            /* eslint-enable */\n            // eslint-disable-next-line quotes\n            cloneObject(nodeObject), diagram, propertyName + \"_\" + ((propertyName === \"nodeTemplate\") ? nodeObject.id : element.nodeId + nodeObject.id), undefined, undefined, false, div);\n        }\n        else {\n            compiledString = element.getNodeTemplate()(\n            /* eslint-enable */\n            // eslint-disable-next-line quotes\n            cloneObject(nodeObject), diagram, propertyName + \"_\" + ((propertyName === \"nodeTemplate\") ? nodeObject.id : element.nodeId + nodeObject.id), undefined, undefined, false);\n        }\n        if (compiledString) {\n            for (var i = 0; i < compiledString.length; i++) {\n                div.appendChild(compiledString[i]);\n            }\n        }\n    }\n    else {\n        div.appendChild(element.content);\n    }\n    return element.isTemplate ?\n        div : (isHtml ? div.cloneNode(true) : div.cloneNode(true));\n}\n/* eslint-enable */\n/**\n * setAttributeSvg method   \\\n *\n * @returns {void} setAttributeSvg method .\\\n * @param { SVGElement } svg - provide the svg  value.\n * @param { Object } attributes - provide the boolean  value.\n * @private\n */\nexport function setAttributeSvg(svg, attributes) {\n    var keys = Object.keys(attributes);\n    for (var i = 0; i < keys.length; i++) {\n        if (keys[i] !== 'style') {\n            svg.setAttribute(keys[i], attributes[keys[i]]);\n        }\n        else {\n            applyStyleAgainstCsp(svg, attributes[keys[i]]);\n        }\n    }\n}\n/**\n * applyStyleAgainstCsp method   \\\n *\n * @returns {void} applyStyleAgainstCsp method .\\\n * @param { SVGElement } svg - provide the svg  value.\n * @param { string } attributes - provide the boolean  value.\n * @private\n */\nexport function applyStyleAgainstCsp(svg, attributes) {\n    var keys = attributes.split(';');\n    for (var i = 0; i < keys.length; i++) {\n        var attribute = keys[i].split(':');\n        if (attribute.length === 2) {\n            svg.style[attribute[0].trim()] = attribute[1].trim();\n        }\n    }\n}\n/**\n * setAttributeHtml method   \\\n *\n * @returns {void} setAttributeHtml method .\\\n * @param { HTMLElement } element - provide the svg  value.\n * @param { Object } attributes - provide the boolean  value.\n * @private\n */\nexport function setAttributeHtml(element, attributes) {\n    var keys = Object.keys(attributes);\n    for (var i = 0; i < keys.length; i++) {\n        if (keys[i] !== 'style') {\n            element.setAttribute(keys[i], attributes[keys[i]]);\n        }\n        else {\n            applyStyleAgainstCsp(element, attributes[keys[i]]);\n        }\n    }\n}\n/**\n * createMeasureElements method   \\\n *\n * @returns {void} createMeasureElements method .\\\n * @private\n */\nexport function createMeasureElements() {\n    var measureWindowElement = 'measureElement';\n    if (!window[measureWindowElement]) {\n        var divElement = createHtmlElement('div', {\n            id: 'measureElement',\n            style: 'visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;'\n        });\n        var text = createHtmlElement('span', { 'style': 'display:inline-block ; line-height: normal' });\n        divElement.appendChild(text);\n        //let imageElement: HTMLImageElement;\n        var imageElement = createHtmlElement('img', { 'alt': 'measureElementImage', 'src': 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7' });\n        divElement.appendChild(imageElement);\n        var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        svg.setAttribute('xmlns:xlink', 'http://www.w3.org/1999/xlink');\n        divElement.appendChild(svg);\n        var element = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        element.setAttribute('d', '');\n        svg.appendChild(element);\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var data = document.createTextNode('');\n        var tSpan = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n        tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n        svg.appendChild(tSpan);\n        window[measureWindowElement] = divElement;\n        window[measureWindowElement].usageCount = 1;\n        document.body.appendChild(divElement);\n        var measureElementCount = 'measureElementCount';\n        if (!window[measureElementCount]) {\n            window[measureElementCount] = 1;\n        }\n        else {\n            window[measureElementCount]++;\n        }\n    }\n    else {\n        window[measureWindowElement].usageCount += 1;\n    }\n}\n/**\n * setChildPosition method   \\\n *\n * @returns {number} setChildPosition method .\\\n * @param {SubTextElement} temp - provide the temp  value.\n * @param {SubTextElement[]} childNodes - provide the childNodes  value.\n * @param {number} i - provide the i  value.\n * @param {TextAttributes} options - provide the options  value.\n * @private\n */\nexport function setChildPosition(temp, childNodes, i, options) {\n    if (childNodes.length >= 1 && temp.x === 0 &&\n        (options.textOverflow === 'Clip' || options.textOverflow === 'Ellipsis') &&\n        (options.textWrapping === 'Wrap' || options.textWrapping === 'WrapWithOverflow')) {\n        temp.x = childNodes[i - 1] ? childNodes[i - 1].x : -(temp.width / 2);\n        return temp.x;\n    }\n    return temp.x;\n}\n/**\n * getTemplateContent method   \\\n *\n * @returns {DiagramHtmlElement} getTemplateContent method .\\\n * @param {DiagramHtmlElement} annotationcontent - provide the annotationcontent  value.\n * @param {Annotation} annotation - provide the annotation  value.\n * @param {number} annotationTemplate - provide the annotationTemplate  value.\n * @private\n */\nexport function getTemplateContent(\n// eslint-disable-next-line @typescript-eslint/ban-types\nannotationcontent, annotation, annotationTemplate) {\n    if (annotationTemplate && !annotation.template) {\n        annotationcontent.isTemplate = true;\n        annotationcontent.template = annotationcontent.content = getContent(annotationcontent, true, annotation);\n    }\n    else {\n        annotationcontent.content = annotation.template;\n    }\n    return annotationcontent;\n}\n/* eslint-disable */\n/** @private */\nexport function createUserHandleTemplates(userHandleTemplate, template, selectedItems, diagramID) {\n    var userHandleFn;\n    var handle;\n    var compiledString;\n    var i;\n    var div;\n    var diagramElement = document.getElementById(diagramID);\n    var instance = 'ej2_instances';\n    var diagram = diagramElement[instance][0];\n    if (userHandleTemplate && template) {\n        userHandleFn = templateCompiler(userHandleTemplate);\n        for (var _i = 0, _a = selectedItems.userHandles; _i < _a.length; _i++) {\n            handle = _a[_i];\n            if (userHandleFn) {\n                compiledString = userHandleFn(cloneObject(handle), diagram, 'userHandleTemplate' + '_' + handle.name, undefined, undefined, false);\n                for (i = 0; i < compiledString.length; i++) {\n                    var attr = {\n                        'style': 'height: 100%; width: 100%; pointer-events: all',\n                        'id': handle.name + '_template_hiddenUserHandle'\n                    };\n                    div = createHtmlElement('div', attr);\n                    div.appendChild(compiledString[i]);\n                }\n                template[0].appendChild(div);\n            }\n        }\n    }\n    else if (isBlazor()) {\n        var content = 'diagramsf_userHandle_template';\n        var a = void 0;\n        for (var _b = 0, _c = selectedItems.userHandles; _b < _c.length; _b++) {\n            handle = _c[_b];\n            if (!handle.pathData && !handle.content && !handle.source) {\n                compiledString = compile(handle.content);\n                for (i = 0, a = compiledString(cloneBlazorObject(handle), diagram, 'userHandleTemplate', content); i < a.length; i++) {\n                    var attr = {\n                        'style': 'height: 100%; width: 100%; pointer-events: all',\n                        'id': handle.name + '_template_hiddenUserHandle'\n                    };\n                    div = createHtmlElement('div', attr);\n                    div.appendChild(a[i]);\n                }\n                template[0].appendChild(div);\n            }\n        }\n    }\n}\n/* eslint-enable */\n"]},"metadata":{},"sourceType":"module"}